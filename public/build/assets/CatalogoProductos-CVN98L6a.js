import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as a,R as K}from"./index-RYns6xqu.js";import{G as J,C as Y}from"./CreateReactScript-BuKYEKxn.js";import{c as Q}from"./ReactAppend-vpV7VTGG.js";import{B as X}from"./Base-B0jCVaQs.js";import{H as Z}from"./Header-Cr5ifcob.js";import{F}from"./Footer-DBGXNGtf.js";import{C as ee}from"./Detail-BUTDw3GY.js";import{L as te,G as se,M as oe}from"./esm-DE6x54Dx.js";import{P as le}from"./PropertyCard-Wm8yFHdp.js";import"./index.esm-zkRd-kwu.js";import"./axios-B4uVmeYG.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./main-Y8JAyXgE.js";/* empty css               *//* empty css              */import"./index-CXU7o9CY.js";import"./Filter-CpekYgBC.js";import"./Results-BBVbNL2k.js";import"./useTranslation-CZbMeh78.js";import"./createLucideIcon-D_WcjKff.js";import"./proxy-Dg7W2VMC.js";import"./index-SDlHnhXR.js";import"./index-DNUR7M9R.js";import"./HtmlContent-CZmf3wHb.js";import"./sweetalert2.all-DJo0UVK6.js";import"./HomeSeccionBlog-B1gXNdAR.js";import"./navigation-B2UEjSS3.js";import"./classes-to-selector-DtC0LQ2m.js";import"./pagination-iC1L0vLA.js";import"./Strengths-CX6bGGPm.js";import"./CarruselBrands-Dk-UaKph.js";const re=({propiedades:r=[],center:c=null})=>{var p;const[A,m]=a.useState(null),[g,y]=a.useState(null),[d,M]=a.useState(1),i=12,w=Math.ceil(r.length/i),z=(d-1)*i,k=z+i,N=r.slice(z,k);a.useEffect(()=>{M(1),y(null)},[r.length]),a.useEffect(()=>{g&&N.length>0&&(N.some(b=>b.id===g)||y(null))},[d,g]);const C=c&&c.lat&&c.lng?{lat:c.lat,lng:c.lng}:r.length>0&&r[0].latitude&&r[0].longitude?{lat:parseFloat(r[0].latitude),lng:parseFloat(r[0].longitude)}:{lat:-12.0464,lng:-77.0428},R={width:"100%",height:"100vh"},[L,I]=a.useState({}),T=(l,b)=>{I(x=>({...x,[l]:b}))};return e.jsxs("div",{className:"flex h-screen px-[5%]",children:[e.jsxs("div",{className:"w-2/3 overflow-y-auto bg-white property-list-container",children:[g&&e.jsx("div",{className:"p-4 bg-primary/10 border-l-4 border-primary mx-4 mt-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-5 h-5 text-primary mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-sm text-primary font-medium",children:"Propiedad seleccionada en el mapa"})]}),e.jsx("button",{onClick:()=>y(null),className:"text-primary hover:text-primary/80 text-sm font-medium",children:"Limpiar selecciÃ³n"})]})}),e.jsx("div",{className:"py-10 grid grid-cols-3 gap-6",children:N&&N.length>0?N.map(l=>e.jsxs("div",{className:"relative cursor-pointer","data-property-id":l.id,onClick:()=>{y(g===l.id?null:l.id)},children:[g===l.id&&e.jsx("div",{className:"absolute top-2 left-2 z-20 bg-primary text-white w-6 h-6 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx(le,{propiedad:l,currentIndex:L[l.id]||0,onIndexChange:T})]},l.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No hay propiedades disponibles en este momento."})})}),r&&r.length>i&&e.jsx("div",{className:"p-4 bg-white sticky bottom-0 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",z+1,"-",Math.min(k,r.length)," de ",r.length," propiedades"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>M(Math.max(1,d-1)),disabled:d===1,className:`px-3 py-1 rounded-md text-sm transition-colors ${d===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"â€¹ Anterior"}),[...Array(Math.min(5,w))].map((l,b)=>{let x;if(w<=5)x=b+1;else{const P=Math.max(1,d-2),S=Math.min(w,P+4);if(x=P+b,x>S)return null}return e.jsx("button",{onClick:()=>M(x),className:`px-3 py-1 rounded-md text-sm transition-colors ${d===x?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:x},x)}),e.jsx("button",{onClick:()=>M(Math.min(w,d+1)),disabled:d===w,className:`px-3 py-1 rounded-md text-sm transition-colors ${d===w?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Siguiente â€º"})]})]})})]}),e.jsx("div",{className:"w-1/3 py-10 relative rounded-xl overflow-hidden",children:e.jsx(te,{googleMapsApiKey:((p=J)==null?void 0:p.GMAPS_API_KEY)||"",children:e.jsx(se,{mapContainerStyle:R,center:C,zoom:13,options:{zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},onLoad:()=>{},children:r.map(l=>{if(!l.latitude||!l.longitude)return null;const b=Math.floor(l.price_per_night||120),x=A===l.id,P=g===l.id,S={url:P?"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                    <svg width="85" height="45" viewBox="0 0 85 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="2" y="2" width="81" height="41" rx="20" fill="#195AEA" stroke="white" stroke-width="3"/>
                      <text x="42.5" y="28" text-anchor="middle" fill="white" font-size="15" font-weight="bold">S/${b}</text>
                    </svg>
                  `):x?"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                    <svg width="80" height="40" viewBox="0 0 80 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="2" y="2" width="76" height="36" rx="18" fill="#1f2937" stroke="white" stroke-width="2"/>
                      <text x="40" y="26" text-anchor="middle" fill="white" font-size="14" font-weight="bold">S/${b}</text>
                    </svg>
                  `):"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                    <svg width="70" height="32" viewBox="0 0 70 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="1" y="1" width="68" height="30" rx="15" fill="white" stroke="#d1d5db" stroke-width="1"/>
                      <text x="35" y="21" text-anchor="middle" fill="#374151" font-size="12" font-weight="600">S/${b}</text>
                    </svg>
                  `)};return window.google&&window.google.maps&&window.google.maps.Size&&(S.scaledSize=P?new window.google.maps.Size(85,45):x?new window.google.maps.Size(80,40):new window.google.maps.Size(70,32),S.anchor=P?new window.google.maps.Point(42.5,22.5):x?new window.google.maps.Point(40,20):new window.google.maps.Point(35,16)),e.jsx(oe,{position:{lat:parseFloat(l.latitude),lng:parseFloat(l.longitude)},title:l.title||l.address,icon:S,onClick:()=>{y(l.id);const V=r.findIndex(B=>B.id===l.id),H=Math.ceil((V+1)/i);if(H!==d)M(H),setTimeout(()=>{const B=document.querySelector(`[data-property-id="${l.id}"]`);B&&B.scrollIntoView({behavior:"smooth",block:"center"})},100);else{const B=document.querySelector(`[data-property-id="${l.id}"]`);B&&B.scrollIntoView({behavior:"smooth",block:"center"})}},onMouseOver:()=>m(l.id),onMouseOut:()=>m(null)},l.id)})})})})]})},ae=({isOpen:r,onClose:c,onApplyFilters:A,currentFilters:m={}})=>{const[g,y]=a.useState(m.instantBook?"reservacion":"estacionamiento"),[d,M]=a.useState(m.propertyType||"cualquier"),[i,w]=a.useState(m.services||["wifi","aire","televisor","cocina"]),[z,k]=a.useState(m.amenities||["lavadora","coworking"]),[N,C]=a.useState(m.characteristics||["piscina","estacionamiento"]),[R,L]=a.useState(m.featured?"favoritos":"luxe");if(K.useEffect(()=>{m&&(y(m.instantBook?"reservacion":"estacionamiento"),M(m.propertyType||"cualquier"),w(m.services||["wifi","aire","televisor","cocina"]),k(m.amenities||["lavadora","coworking"]),C(m.characteristics||["piscina","estacionamiento"]),L(m.featured?"favoritos":"luxe"))},[m]),!r)return null;const I=[{id:"reservacion",label:"ReservaciÃ³n inmediata",icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"estacionamiento",label:"Estacionamiento gratuito",icon:e.jsxs("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("path",{d:"M8 7h4a3 3 0 0 1 0 6h-4V7z"}),e.jsx("path",{d:"M8 13h3"})]}),selected:!1},{id:"lavadora",label:"Lavadora y secadora",icon:e.jsxs("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M8 3v3M16 3v3M8 18v3M16 18v3"})]}),selected:!1},{id:"llegada",label:"Llegada autÃ³noma",icon:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),selected:!1}],T=[{id:"cualquier",label:"Cualquier tipo"},{id:"habitacion",label:"HabitaciÃ³n"},{id:"alojamiento",label:"Alojamiento entero"}],p=[{id:"wifi",label:"Wifi",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})}),selected:!0},{id:"aire",label:"Aire acondicionado",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),selected:!0},{id:"televisor",label:"Televisor",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),selected:!0},{id:"cocina",label:"Cocina",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),selected:!0},{id:"secadora",label:"Secadora",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!1},{id:"gimnasio",label:"Gimnasio",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077l1.41-.513m14.095-5.13l1.41-.513M5.106 17.785l1.15-.964m11.49-9.642l1.149-.964M7.501 19.795l.75-1.3m7.5-12.99l.75-1.3m-6.063 16.658l.26-1.477m2.605-14.772l.26-1.477m0 17.726l-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205L12 12"})}),selected:!0}],l=[{id:"lavadora",label:"Lavadora",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M8 3v3M16 3v3M8 18v3M16 18v3"})]}),selected:!0},{id:"calefaccion",label:"CalefacciÃ³n",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!1},{id:"coworking",label:"Coworking",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m8 0H8m8 0v6a2 2 0 01-2 2H10a2 2 0 01-2-2V6m8 0H8"})}),selected:!0},{id:"secadora",label:"Secadora de...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!0},{id:"plancha",label:"Plancha",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),selected:!0}],b=[{id:"piscina",label:"Piscina",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),selected:!0},{id:"jacuzzi",label:"Jacuzzi",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18A2 2 0 0 1 23 12v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2z"})}),selected:!1},{id:"estacionamiento",label:"Estacionamiento...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"cargador",label:"Cargador de e...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"cuna",label:"Cuna para be...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z"})}),selected:!0},{id:"cama",label:"Cama King",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),selected:!0},{id:"parrilla",label:"Parrilla",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!0},{id:"desayuno",label:"Desayuno",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),selected:!1},{id:"apto",label:"Apto para fumador...",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!1}],x=[{id:"favoritos",label:"Favoritos entre huÃ©spedes",subtitle:"Los alojamientos mÃ¡s populares en Homlyink",icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),selected:!0},{id:"luxe",label:"Luxe",subtitle:"Alojamientos de lujo con un diseÃ±o Ãºnico",icon:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),selected:!1}],P=t=>{w(v=>v.includes(t)?v.filter(j=>j!==t):[...v,t])},S=t=>{k(v=>v.includes(t)?v.filter(j=>j!==t):[...v,t])},V=t=>{C(v=>v.includes(t)?v.filter(j=>j!==t):[...v,t])},H=()=>{y("reservacion"),M("cualquier"),w([]),k([]),C([]),L("favoritos")},B=()=>{A({recommended:g,accommodationType:d,services:i,amenities:z,features:N,highlighted:R}),c()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:e.jsx("div",{className:"overflow-hidden rounded-xl",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filtros"}),e.jsx("button",{onClick:c,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recomendado para ti"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:I.map(t=>e.jsxs("button",{onClick:()=>y(t.id),className:`p-3 border rounded-lg text-left transition-all ${g===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:t.icon}),e.jsx("div",{className:"text-sm font-medium text-blue-600",children:t.label})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tipo de alojamiento"}),e.jsx("div",{className:"flex space-x-2",children:T.map(t=>e.jsx("button",{onClick:()=>M(t.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${d===t.id?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.label},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Servicios"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Popular"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.map(t=>e.jsx("button",{onClick:()=>P(t.id),className:`p-3 border rounded-lg text-left transition-all ${i.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),i.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Comodidades"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(t=>e.jsx("button",{onClick:()=>S(t.id),className:`p-3 border rounded-lg text-left transition-all ${z.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),z.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"CaracterÃ­sticas"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(t=>e.jsx("button",{onClick:()=>V(t.id),className:`p-3 border rounded-lg text-left transition-all ${N.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),N.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Alojamientos destacados"}),e.jsx("div",{className:"space-y-3",children:x.map(t=>e.jsx("button",{onClick:()=>L(t.id),className:`w-full p-4 border rounded-lg text-left transition-all ${R===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.icon,e.jsx("span",{className:"font-medium text-blue-600",children:t.label})]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.subtitle})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${R===t.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:R===t.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},t.id))})]})]}),e.jsxs("div",{className:"flex space-x-3 p-4 border-t bg-gray-50",children:[e.jsx("button",{onClick:H,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Limpiar filtros"}),e.jsx("button",{onClick:B,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Mostrar alojamientos"})]})]})})})};function ne({propiedades:r,searchFilters:c={}}){const[A,m]=a.useState(c.location||"");a.useState("Fecha");const[g,y]=a.useState(""),[d,M]=a.useState([0,500]),[i,w]=a.useState("relevancia"),[z,k]=a.useState(!1),[N,C]=a.useState(!1),[R,L]=a.useState(!1),[I,T]=a.useState(!1),[p,l]=a.useState({priceRange:[0,500],guests:"",bedrooms:"",amenities:[],services:[],characteristics:[],propertyType:"",location:null,instantBook:!1,featured:!1}),[b,x]=a.useState(r||[]),[P,S]=a.useState({total:(r==null?void 0:r.length)||0}),[V,H]=a.useState(null),[B,t]=a.useState(null),v=async()=>{try{const o=await(await fetch("/api/properties/location-stats")).json();o.success&&o.center&&(H(o),t(o.center),console.log("ðŸ—ºï¸ Mapa centrado en:",o.center.location,"con",o.center.count,"propiedades"))}catch(s){console.error("Error loading location stats:",s),t({lat:-12.046374,lng:-77.042793,location:"Lima, PerÃº",count:0})}};a.useEffect(()=>{if(v(),c){const s=(parseInt(c.adults)||0)+(parseInt(c.children)||0);s>0&&(y(s.toString()),l(o=>({...o,guests:s.toString()}))),(c.location||s>0)&&console.log("Filtros de bÃºsqueda aplicados:",c)}},[c]),a.useEffect(()=>{r&&(x(r),S({total:r.length}))},[r]);const j=(s=p)=>{let o=r||[];A&&(o=o.filter(n=>[n.district||"",n.province||"",n.department||"",n.address||""].join(" ").toLowerCase().includes(A.toLowerCase())));const f=s.priceRange||d;(f[0]>0||f[1]<500)&&(o=o.filter(n=>{const $=parseFloat(n.price_per_night||0);return $>=f[0]&&$<=f[1]}));const u=s.guests||g;u&&(o=o.filter(n=>parseInt(n.max_guests||0)>=parseInt(u))),s.bedrooms&&(o=o.filter(n=>parseInt(n.bedrooms||0)>=parseInt(s.bedrooms)));const h=[...s.amenities||[],...s.services||[],...s.characteristics||[]];h.length>0&&(o=o.filter(n=>{const $=n.amenities||[];return h.some(E=>$.some(G=>G.toLowerCase().includes(E.toLowerCase())))})),s.propertyType&&s.propertyType!=="cualquier"&&(o=o.filter(n=>n.property_type&&n.property_type.toLowerCase().includes(s.propertyType.toLowerCase()))),s.instantBook&&(o=o.filter(n=>n.instant_book===!0)),s.featured&&(o=o.filter(n=>n.featured===!0)),s.location&&(o=o.filter(n=>!n.latitude||!n.longitude?!1:O(s.location.lat,s.location.lng,parseFloat(n.latitude),parseFloat(n.longitude))<=5)),o=q(o,i),x(o),S({total:o.length})},q=(s,o)=>{const f=[...s];switch(o){case"precio-menor":return f.sort((u,h)=>parseFloat(u.price_per_night||0)-parseFloat(h.price_per_night||0));case"precio-mayor":return f.sort((u,h)=>parseFloat(h.price_per_night||0)-parseFloat(u.price_per_night||0));case"fecha-reciente":return f.sort((u,h)=>new Date(h.created_at||0)-new Date(u.created_at||0));case"fecha-antigua":return f.sort((u,h)=>new Date(u.created_at||0)-new Date(h.created_at||0));case"rating":return f.sort((u,h)=>parseFloat(h.rating||0)-parseFloat(u.rating||0));case"huespedes":return f.sort((u,h)=>parseInt(h.max_guests||0)-parseInt(u.max_guests||0));default:return f.sort((u,h)=>u.featured&&!h.featured?-1:!u.featured&&h.featured?1:parseFloat(h.rating||0)-parseFloat(u.rating||0))}},O=(s,o,f,u)=>{const n=(f-s)*Math.PI/180,$=(u-o)*Math.PI/180,E=Math.sin(n/2)*Math.sin(n/2)+Math.cos(s*Math.PI/180)*Math.cos(f*Math.PI/180)*Math.sin($/2)*Math.sin($/2);return 6371*(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E)))},U=s=>{m(s.target.value),setTimeout(()=>j(),300)},D=s=>{y(s),C(!1);const o={...p,guests:s};l(o),j(o)},W=(s,o)=>{M([s,o]),L(!1);const f={...p,priceRange:[s,o]};l(f),j(f)},_=s=>{w(s),k(!1),j()};return a.useEffect(()=>{r&&j()},[i]),a.useEffect(()=>{r&&(x(r),S({total:r.length}),c&&(c.location||c.adults||c.children)&&setTimeout(()=>{j()},100))},[r,c]),a.useEffect(()=>{const s=o=>{o.target.closest(".dropdown-container")||(k(!1),C(!1),L(!1))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Z,{}),e.jsx("div",{className:"bg-white sticky top-0 z-40",children:e.jsxs("div",{className:"mx-auto px-[5%] py-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:A,onChange:U,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-full leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Â¿A dÃ³nde vas?"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{k(!z),C(!1),L(!1)},className:"px-4 py-2 border border-gray-300 rounded-full text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2",children:[i==="relevancia"?"Relevancia":i==="precio-menor"?"Precio: menor a mayor":i==="precio-mayor"?"Precio: mayor a menor":i==="fecha-reciente"?"MÃ¡s recientes":i==="fecha-antigua"?"MÃ¡s antiguos":i==="rating"?"Mejor valorados":i==="huespedes"?"MÃ¡s huÃ©spedes":"Ordenar",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),z&&e.jsx("div",{className:"absolute top-full mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:()=>_("relevancia"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="relevancia"?"bg-blue-50 text-blue-700":""}`,children:"Relevancia"}),e.jsx("button",{onClick:()=>_("precio-menor"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="precio-menor"?"bg-blue-50 text-blue-700":""}`,children:"Precio: menor a mayor"}),e.jsx("button",{onClick:()=>_("precio-mayor"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="precio-mayor"?"bg-blue-50 text-blue-700":""}`,children:"Precio: mayor a menor"}),e.jsx("button",{onClick:()=>_("fecha-reciente"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="fecha-reciente"?"bg-blue-50 text-blue-700":""}`,children:"MÃ¡s recientes"}),e.jsx("button",{onClick:()=>_("fecha-antigua"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="fecha-antigua"?"bg-blue-50 text-blue-700":""}`,children:"MÃ¡s antiguos"}),e.jsx("button",{onClick:()=>_("rating"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="rating"?"bg-blue-50 text-blue-700":""}`,children:"Mejor valorados"}),e.jsx("button",{onClick:()=>_("huespedes"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="huespedes"?"bg-blue-50 text-blue-700":""}`,children:"MÃ¡s huÃ©spedes"})]})})]}),e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{C(!N),k(!1),L(!1)},className:`px-4 py-2 border rounded-full text-sm font-medium ${g?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700"} hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2`,children:[g?`${g} huÃ©spedes`:"HuÃ©spedes",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),N&&e.jsx("div",{className:"absolute top-full mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[[1,2,3,4,5,6,7,8].map(s=>e.jsxs("button",{onClick:()=>D(s.toString()),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${g===s.toString()?"bg-blue-50 text-blue-700":""}`,children:[s," huÃ©sped",s>1?"es":""]},s)),e.jsx("button",{onClick:()=>D("8+"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${g==="8+"?"bg-blue-50 text-blue-700":""}`,children:"8+ huÃ©spedes"}),g&&e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsx("button",{onClick:()=>D(""),className:"w-full text-left px-3 py-2 rounded-md text-sm text-red-600 hover:bg-red-50",children:"Limpiar"})})]})})]}),e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{L(!R),k(!1),C(!1)},className:`px-4 py-2 border rounded-full text-sm font-medium ${d[0]>0||d[1]<500?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700"} hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2`,children:[d[0]>0||d[1]<500?`S/ ${d[0]} - S/ ${d[1]}`:"Rango de precio",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),R&&e.jsx("div",{className:"absolute top-full mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Rango de precio por noche"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>W(0,50),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 0 - S/ 50"}),e.jsx("button",{onClick:()=>W(50,100),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 50 - S/ 100"}),e.jsx("button",{onClick:()=>W(100,200),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 100 - S/ 200"}),e.jsx("button",{onClick:()=>W(200,300),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 200 - S/ 300"}),e.jsx("button",{onClick:()=>W(300,500),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 300 - S/ 500"}),e.jsx("button",{onClick:()=>W(500,1e3),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 500+"}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsx("button",{onClick:()=>W(0,500),className:"w-full text-left px-3 py-2 rounded-md text-sm text-red-600 hover:bg-red-50",children:"Limpiar rango"})})]})]})})]}),e.jsx("button",{onClick:()=>{T(!0)},className:"p-2 border border-gray-300 rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-lg text-gray-600",children:[P.total," propiedades encontradas"]})})]})}),e.jsx(ae,{isOpen:I,onClose:()=>T(!1),onApplyFilters:s=>{console.log("Modal filters received:",s);const o={...p,instantBook:s.recommended==="reservacion",featured:s.highlighted==="favoritos",propertyType:s.accommodationType==="cualquier"?"":s.accommodationType,services:s.services||[],amenities:s.amenities||[],characteristics:s.features||[],priceRange:p.priceRange,guests:p.guests,bedrooms:p.bedrooms,location:p.location};console.log("Applied filters:",o),l(o),j(o)},currentFilters:p}),e.jsx(re,{propiedades:b,center:B,locationStats:V}),e.jsx(F,{})]})}Y((r,c)=>{Q(r).render(e.jsx(ee,{children:e.jsx(X,{...c,children:e.jsx(ne,{...c})})}))});
