import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as g}from"./index-RYns6xqu.js";import{a as W}from"./axios-B4uVmeYG.js";class te{constructor(){this.baseURL="/api/cambiafx",this.localAPI="/api",this.tcData=[],this.tcBase=[]}async getExchangeRates(){try{console.log("ğŸ”§ CambiaFXService.getExchangeRates() iniciado - USANDO DATOS REALES ACTUALIZADOS");const t=[{id:1,desde:0,hasta:1e3,tc_compra:3.533,tc_venta:3.565},{id:2,desde:1001,hasta:5e3,tc_compra:3.534,tc_venta:3.566},{id:3,desde:5001,hasta:1e4,tc_compra:3.535,tc_venta:3.567},{id:4,desde:10001,hasta:999999,tc_compra:3.536,tc_venta:3.568}];return console.log("ğŸ“Š Usando datos reales actualizados:",t),this.tcBase=t,this.tcData=[...t],console.log("âœ… TC Data asignado (REAL):",{tcBase:this.tcBase,tcData:this.tcData}),t}catch(t){console.error("âŒ Error en getExchangeRates:",t);const n=[{id:1,desde:0,hasta:1e3,tc_compra:3.533,tc_venta:3.565},{id:2,desde:1001,hasta:5e3,tc_compra:3.534,tc_venta:3.566},{id:3,desde:5001,hasta:1e4,tc_compra:3.535,tc_venta:3.567},{id:4,desde:10001,hasta:999999,tc_compra:3.536,tc_venta:3.568}];return console.log("ğŸ“Š Usando datos de respaldo actualizados:",n),this.tcBase=n,this.tcData=[...n],n}}async validateCoupon(t){try{if(!t||!t.trim())return console.log("ğŸ« CupÃ³n vacÃ­o, restaurando TC base"),this.tcData=[...this.tcBase],{valid:!1,data:this.tcData};console.log("ğŸ« Validando cupÃ³n:",t);try{console.log("ğŸ« Intentando validar via proxy Laravel:",t),console.log("ğŸ« URL completa:",`${this.baseURL}/cupon/${t}`);const l=await W.get(`${this.baseURL}/cupon/${t}`,{timeout:8e3,headers:{Accept:"application/json","Content-Type":"application/json"}});console.log("ğŸ« Status de respuesta proxy:",l.status),console.log("ğŸ« Respuesta completa proxy:",l.data);let o=null;if(l.data&&l.data.status===200&&Array.isArray(l.data.data)?(o=l.data.data,console.log("âœ… Formato proxy: Laravel Response wrapper con data")):Array.isArray(l.data)?(o=l.data,console.log("âœ… Formato proxy: Array directo")):l.data&&l.data.data&&Array.isArray(l.data.data)?(o=l.data.data,console.log("âœ… Formato proxy: Objeto con propiedad data")):l.data&&l.data.success&&Array.isArray(l.data.result)&&(o=l.data.result,console.log("âœ… Formato proxy: success/result")),o&&o.length>0){const u=o.map(s=>({id:s.id,desde:parseFloat(s.desde||0),hasta:parseFloat(s.hasta||999999),tc_compra:parseFloat(s.tc_compra),tc_venta:parseFloat(s.tc_venta),pizarra:s.pizarra||null,puntos_compra:parseFloat(s.puntos_compra||0),puntos_venta:parseFloat(s.puntos_venta||0)}));return this.tcData=u,console.log("âœ… CupÃ³n vÃ¡lido via proxy, TC FORZADAMENTE actualizados:",this.tcData),console.log("ğŸ” VerificaciÃ³n: tcData[0]:",this.tcData[0]),console.log("ğŸ¯ TC Compra ahora es:",this.tcData[0].tc_compra),console.log("ğŸ¯ TC Venta ahora es:",this.tcData[0].tc_venta),{valid:!0,data:u}}}catch(l){console.warn("âš ï¸ Error con proxy Laravel, intentando con API directa:",l.message);try{console.log("ğŸ« Intentando validar via API directa de CambiaFX:",t);const o=`https://cambiafx.pe/api/cupon/${t}`;console.log("ğŸ« URL de la API:",o);const u=await W.get(o,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log("ğŸ« Status de respuesta API directa:",u.status),console.log("ğŸ« Respuesta completa de la API:",u.data),Array.isArray(u.data)&&u.data.length>0){console.log("âœ… CupÃ³n vÃ¡lido encontrado en API directa");const s=u.data[0],C=[{id:s.id,desde:parseFloat(s.desde),hasta:parseFloat(s.hasta),tc_compra:parseFloat(s.tc_compra),tc_venta:parseFloat(s.tc_venta),pizarra:s.pizarra,puntos_compra:parseFloat(s.puntos_compra),puntos_venta:parseFloat(s.puntos_venta)}];return console.log("ğŸ”„ Datos transformados:",C),this.tcData=C,console.log("âœ… TC actualizados con cupÃ³n de API directa:",this.tcData),{valid:!0,data:C}}}catch(o){console.warn("âš ï¸ Error con API directa:",o.message)}}const n={FELIZ28:[{id:3742,desde:100,hasta:5e4,tc_compra:3.557,tc_venta:3.571,pizarra:3713,puntos_compra:.002,puntos_venta:-.002}],TEST:[{id:9999,desde:0,hasta:999999,tc_compra:3.52,tc_venta:3.55,pizarra:1,puntos_compra:.005,puntos_venta:-.005}]};return n[t.toUpperCase()]?(console.log("âœ… CupÃ³n encontrado en fallback:",t),this.tcData=n[t.toUpperCase()],console.log("âœ… TC actualizados con fallback:",this.tcData),{valid:!0,data:this.tcData}):(this.tcData=[...this.tcBase],console.log("âŒ CupÃ³n invÃ¡lido, usando TC base"),{valid:!1,data:this.tcData,message:"El cÃ³digo de promociÃ³n no es vÃ¡lido."})}catch(n){return console.error("âŒ Error general en validateCoupon:",n),this.tcData=[...this.tcBase],{valid:!1,data:this.tcData,message:"Error al validar el cÃ³digo de promociÃ³n."}}}getTCFromAmount(t,n="venta"){if(console.log("ğŸ¯ getTCFromAmount llamado:",{amount:t,operationType:n,tcDataLength:this.tcData.length,tcData:this.tcData}),!t||t<=0){if(console.log("âš ï¸ Monto <= 0, usando primer TC disponible"),this.tcData.length>0){const o=this.tcData[0],u=n==="C"?o.tc_venta:o.tc_compra;return console.log("ğŸ’± TC base seleccionado:",{obj:o,tc:u,operationType:n}),u}return console.log("âŒ No hay datos de TC, retornando 0"),0}let l=null;if(console.log("ğŸ” Buscando rango para monto:",t),this.tcData.length===1){const o=this.tcData[0];if(console.log("ğŸ“Š Solo hay un elemento en tcData (cupÃ³n):",o),console.log("ğŸ” Verificando rango del cupÃ³n:",{desde:o.desde,hasta:o.hasta,amount:t,dentroDelRango:o.desde<=t&&t<=o.hasta}),o.desde<=t&&t<=o.hasta)l=o,console.log("âœ… Monto dentro del rango del cupÃ³n:",l),console.log("ğŸ¯ TC que se usarÃ¡:",{operationType:n,tc_compra:l.tc_compra,tc_venta:l.tc_venta,seleccionado:n==="C"?l.tc_venta:l.tc_compra});else if(console.log("âš ï¸ Monto fuera del rango del cupÃ³n, usando TC base"),this.tcBase.length>0)return this.getTCFromBase(t,n)}else for(let o of this.tcData)if(console.log("ğŸ” Verificando rango:",{desde:o.desde,hasta:o.hasta,monto:t}),o.desde<=t&&t<=o.hasta){l=o,console.log("âœ… Rango encontrado:",l);break}if(l===null&&this.tcData.length>0&&(l=this.tcData[this.tcData.length-1],console.log("ğŸ“Š Usando Ãºltimo rango disponible:",l)),l!==null){const o=n==="C"?l.tc_venta:l.tc_compra;return console.log("ğŸ¯ TC final calculado:",{tc:o,operationType:n,rango:l}),o}return console.log("âŒ No se encontrÃ³ TC, retornando 0"),0}getTCFromBase(t,n="venta"){console.log("ğŸ¦ getTCFromBase llamado:",{amount:t,operationType:n});for(let l of this.tcBase)if(l.desde<=t&&t<=l.hasta){const o=n==="C"?l.tc_venta:l.tc_compra;return console.log("âœ… TC base encontrado:",{tc:o,operationType:n,rango:l}),o}if(this.tcBase.length>0){const l=this.tcBase[this.tcBase.length-1],o=n==="C"?l.tc_venta:l.tc_compra;return console.log("ğŸ“Š Usando Ãºltimo TC base:",{tc:o,operationType:n,rango:l}),o}return 0}calculateExchange(t,n="venta",l="from"){console.log("Calculando cambio:",{amount:t,operationType:n,origin:l});const o=this.getTCFromAmount(t,n);console.log("TC obtenido:",o);let u=0;l==="from"?n==="C"?(u=t/o,console.log("Cliente Compra USD: PEN",t,"/ tc_venta",o,"=",u,"USD")):(u=t*o,console.log("Cliente Vende USD: USD",t,"* tc_compra",o,"=",u,"PEN")):n==="C"?(u=t*o,console.log("Cliente Compra USD inverso: USD",t,"* tc_venta",o,"=",u,"PEN")):(u=t/o,console.log("Cliente Vende USD inverso: PEN",t,"/ tc_compra",o,"=",u,"USD"));const s={result:parseFloat(u.toFixed(2)),exchangeRate:o,operation:n};return console.log("Resultado final:",s),s}getCurrentRates(){if(console.log("ğŸ“Š getCurrentRates llamado"),console.log("ğŸ’¾ Estado actual tcData:",this.tcData),this.tcData.length===0)return console.log("âš ï¸ tcData vacÃ­o, retornando valores por defecto"),{compra:"3.5650",venta:"3.5330"};const t=this.tcData[0];console.log("ğŸ¦ Primer elemento tcData:",t);const n={compra:t.tc_venta.toFixed(4),venta:t.tc_compra.toFixed(4)};return console.log("âœ… Rates calculados:",n),n}formatNumberToString(t){if(console.log("ğŸ“ formatNumberToString llamado:",{input:t,type:typeof t}),!t||isNaN(t))return console.log("ğŸ“ Input invÃ¡lido, retornando string vacÃ­o"),"";const n=t.toFixed(2);return console.log("ğŸ“ Resultado formatNumberToString:",{input:t,result:n}),n}formatStringToNumber(t){if(console.log("ğŸ”¢ formatStringToNumber llamado:",{input:t,type:typeof t}),!t)return console.log("ğŸ”¢ Input vacÃ­o, retornando 0"),0;const n=parseFloat(t.toString().replace(/,/g,""))||0;return console.log("ğŸ”¢ Resultado formatStringToNumber:",{input:t,result:n}),n}async initializeOperation(t){try{console.log("Initializing operation with data:",t);const n="https://mi.cambiafx.pe/login";return window.location.href=n,{success:!0,redirectUrl:n}}catch(n){throw console.error("Error initializing operation:",n),n}}checkUrlCoupon(){return new URLSearchParams(window.location.search).get("utm_campaign")}}const r=new te,ne=({title:N="Comienza tu cambio ahora",initialOperationType:t="venta",showCoupons:n=!0,showCredits:l=!0,className:o="",onOperationStart:u=null})=>{var Z;const[s,C]=g.useState(t),[m,E]=g.useState(""),[x,L]=g.useState(""),[_,R]=g.useState(0),[w,D]=g.useState(""),[I,O]=g.useState(!1),[U,H]=g.useState(null),[S,M]=g.useState({compra:"0.0000",venta:"0.0000"}),[X,z]=g.useState(!1),[i,A]=g.useState(null),[q,B]=g.useState(!1);g.useEffect(()=>{console.log("ğŸš€ ExchangeCard - useEffect inicial ejecutÃ¡ndose"),(async()=>{console.log("ğŸ”„ Iniciando inicializaciÃ³n..."),await G(),Q(),console.log("âœ… InicializaciÃ³n completada")})()},[]),g.useEffect(()=>{console.log("ğŸ”„ useEffect operationType ejecutÃ¡ndose:",{operationType:s,amount1:m}),m&&(console.log("ğŸ’° Recalculando por cambio de operationType..."),y("O")),console.log("ğŸ“Š Actualizando rates por cambio de operationType..."),b()},[s]),g.useEffect(()=>{console.log("ğŸ« useEffect promotionalCode ejecutÃ¡ndose:",{promotionalCode:w}),w&&(console.log("ğŸ”„ CupÃ³n aplicado, actualizando rates..."),b(),m&&(console.log("ğŸ’° Recalculando con cupÃ³n aplicado..."),y("O")))},[w]);const G=async()=>{var a,p;try{console.log("ğŸ”§ Inicializando tipos de cambio...");const d=await r.getExchangeRates();console.log("ğŸ“ˆ Tipos de cambio obtenidos desde API:",d),console.log("ğŸ“Š Detalle de tipos de cambio - Compra:",((a=d==null?void 0:d.tcData)==null?void 0:a.compra)||"N/A","Venta:",((p=d==null?void 0:d.tcData)==null?void 0:p.venta)||"N/A"),b();const v=s==="compra"?"C":"V",c=r.getTCFromAmount(1,v);console.log("ğŸ¯ TC inicial calculado:",{initialTc:c,operationType:s,serviceOperationType:v}),R(c),console.log("âœ… Tipos de cambio inicializados:",r.tcData),console.log("ğŸ“Š Estado actual del servicio:",{tcData:r.tcData,tcBase:r.tcBase})}catch(d){console.error("âŒ Error initializing exchange rates:",d)}},b=()=>{var p,d;console.log("ğŸ“Š updateCurrentRates llamado"),console.log("ğŸ” Estado actual del servicio antes de getCurrentRates:",{tcData:r.tcData,tcBase:r.tcBase,tcDataLength:(p=r.tcData)==null?void 0:p.length});const a=r.getCurrentRates();console.log("ğŸ’± Tasas obtenidas del servicio:",a),console.log("ğŸ¦ Estado previo currentRates:",S),M(a),console.log("âœ… currentRates actualizado a:",a),console.log("ğŸ”¢ VerificaciÃ³n post-actualizaciÃ³n:",{ratesCompra:a.compra,ratesVenta:a.venta,deberiaSerConCupon:((d=r.tcData)==null?void 0:d.length)===1,tcDataActual:r.tcData[0]})},Q=()=>{const a=r.checkUrlCoupon();a&&(D(a),P(a,"p"))},y=(a="O",p=null)=>{var j,T;console.log("ğŸ§® calculateExchange iniciado:",{origin:a,inputValue:p,amount1:m,amount2:x,operationType:s});let d;if(p!==null?(d=r.formatStringToNumber(p),console.log("ğŸ’° Usando valor directo del input:",{inputValue:p,amount:d})):(d=a==="O"?r.formatStringToNumber(m):r.formatStringToNumber(x),console.log("ğŸ’° Usando valor del estado:",{origin:a,rawAmount:a==="O"?m:x,amount:d})),d===0){console.log("âš ï¸ Monto es 0, limpiando campos..."),a==="O"?(L(""),console.log("ğŸ§¹ amount2 limpiado")):(E(""),console.log("ğŸ§¹ amount1 limpiado"));const h=s==="compra"?"C":"V",k=r.getTCFromAmount(1,h);R(k),console.log("ğŸ¯ TC base establecido:",{baseTc:k,operationType:s,serviceOperationType:h});return}console.log("ğŸ”„ Llamando calculateExchange del servicio...");const v=s==="compra"?"C":"V";console.log("ğŸ”„ Convertido operationType:",{original:s,service:v}),console.log("ğŸ” DIAGNÃ“STICO PRE-CÃLCULO:",{amount:d,serviceOperationType:v,tcDataActual:r.tcData,tcDataLength:(j=r.tcData)==null?void 0:j.length,esCupon:((T=r.tcData)==null?void 0:T.length)===1,promotionalCode:w});const c=r.calculateExchange(d,v,a==="O"?"from":"to");if(console.log("ğŸ“Š Resultado del cÃ¡lculo completo:",c),console.log("ğŸ¯ VERIFICACIÃ“N DEL CÃLCULO:",{tcUsado:c.exchangeRate,resultadoObtenido:c.result,deberiaSerConCuponFELIZ28:c.exchangeRate===3.557||c.exchangeRate===3.571,calculoManual:s==="venta"?`${d} * ${c.exchangeRate} = ${(d*c.exchangeRate).toFixed(2)}`:`${d} / ${c.exchangeRate} = ${(d/c.exchangeRate).toFixed(2)}`}),R(c.exchangeRate),console.log("ğŸ’± TC actualizado en estado:",c.exchangeRate),a==="O"){const h=r.formatNumberToString(c.result);console.log("ğŸ“ Actualizando amount2:",{result:c.result,formatted:h}),L(h)}else{const h=r.formatNumberToString(c.result);console.log("ğŸ“ Actualizando amount1:",{result:c.result,formatted:h}),E(h)}console.log("âœ… calculateExchange completado")},Y=()=>{const a=m;E(x),L(a),C(s==="compra"?"venta":"compra")},V=(a,p)=>{console.log("ğŸ”¥ğŸ”¥ğŸ”¥ USUARIO ESCRIBIENDO:",{value:a,origin:p,operationType:s}),console.log("âŒ¨ï¸ handleAmountChange SIN DELAY - valor inmediato:",a),p==="O"?(console.log("ğŸ“ Actualizando amount1 de",m,"a",a),E(a)):(console.log("ğŸ“ Actualizando amount2 de",x,"a",a),L(a)),console.log("âš¡ Calculando INMEDIATAMENTE con valor:",a),setTimeout(()=>{y(p,a)},0)},P=async(a,p="c")=>{var d,v;console.log("ğŸ« validateCoupon iniciado:",{couponCode:a,tipo:p}),O(!0);try{console.log("ğŸ« Llamando CambiaFXService.validateCoupon...");const c=await r.validateCoupon(a);if(console.log("ğŸ« Resultado completo de validateCoupon:",c),console.log("ğŸ« result.valid:",c.valid),console.log("ğŸ« result.data:",c.data),console.log("ğŸ« result.message:",c.message),!c.valid&&p==="c")console.log("âŒ CupÃ³n invÃ¡lido, mostrando alert y limpiando..."),D(""),A(null),alert(c.message||"El cÃ³digo de promociÃ³n no es vÃ¡lido."),b();else if(c.valid){console.log("âœ… CupÃ³n vÃ¡lido, FORZANDO actualizaciÃ³n inmediata...");const j=c.data[0];if(A({codigo:a,montoMinimo:j.desde,montoMaximo:j.hasta,tcCompra:j.tc_compra,tcVenta:j.tc_venta}),B(!0),console.log("ğŸš€ Estado actual tcData antes de actualizar:",r.tcData),b(),M(r.getCurrentRates()),m){console.log("ğŸ’¥ RECALCULANDO INMEDIATAMENTE con amount1:",m);const T=s==="compra"?"C":"V",h=r.formatStringToNumber(m),k=r.getTCFromAmount(h,T);console.log("ğŸ¯ TC actual despuÃ©s del cupÃ³n:",k),console.log("ğŸ“Š Datos tcData actuales:",r.tcData),y("O")}console.log("âœ… ActualizaciÃ³n de cupÃ³n completada")}}catch(c){console.error("âŒ Error en validateCoupon:",c),console.error("âŒ Error details:",{message:c.message,response:(d=c.response)==null?void 0:d.data,status:(v=c.response)==null?void 0:v.status}),p==="c"&&(D(""),A(null),alert("El cÃ³digo de promociÃ³n no es vÃ¡lido."),b())}finally{O(!1)}},J=a=>{D(a),U&&clearTimeout(U);const p=setTimeout(()=>{P(a,"c")},2e3);H(p)},$=()=>{if(!i||!m)return{applies:!1,reason:""};const a=r.formatStringToNumber(m);return a<i.montoMinimo?{applies:!1,reason:`Monto mÃ­nimo requerido: $${i.montoMinimo} USD`}:a>i.montoMaximo?{applies:!1,reason:`Monto mÃ¡ximo permitido: $${i.montoMaximo} USD`}:{applies:!0,reason:""}},K=()=>i&&$().applies?{compra:i.tcVenta.toFixed(4),venta:i.tcCompra.toFixed(4)}:S,ee=()=>{const a=r.formatStringToNumber(m);if(a===0){alert("Debe ingresar un monto");return}const p={type:s==="venta"?"V":"C",fromAmount:s==="venta"?a:r.formatStringToNumber(x),toAmount:s==="venta"?r.formatStringToNumber(x):a,exchangeRate:_,couponCode:w};u?u(p):r.initializeOperation(p)},F=K(),f=$();return console.log("ğŸ¯ ESTADO ACTUAL DEL COMPONENTE:",{operationType:s,amount1:m,amount2:x,currentTc:_,currentRates:S,rates:F,initialized:((Z=r.tcData)==null?void 0:Z.length)>0}),e.jsxs("div",{className:`bg-secondary z-[99999] rounded-3xl p-8 shadow-xl flex flex-col gap-6 w-full max-w-[480px] ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-[28px] leading-[94%] font-base text-neutral-light",children:N.includes("cambio")?e.jsxs(e.Fragment,{children:[N.split("cambio")[0],e.jsx("span",{className:"text-neutral-light font-semibold",children:"cambio"}),N.split("cambio")[1]]}):N})}),e.jsxs("div",{className:"min-w-max text-sm font-medium text-neutral-light flex items-center gap-1",children:["Registrados en la SBS",e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16.8825 15L17.5527 18.2099C17.9833 20.2723 18.1986 21.3035 17.7563 21.7923C17.3141 22.281 16.546 21.8606 15.0099 21.0198L12.7364 19.7753C12.3734 19.5766 12.1919 19.4773 12 19.4773C11.8081 19.4773 11.6266 19.5766 11.2636 19.7753L8.99008 21.0198C7.45397 21.8606 6.68592 22.281 6.24365 21.7923C5.80139 21.3035 6.01669 20.2723 6.44731 18.2099L7.11752 15",stroke:"#212121",strokeWidth:"1.5",strokeLinejoin:"round"}),e.jsx("path",{d:"M4.5 9.5C4.5 13.6421 7.85786 17 12 17C16.1421 17 19.5 13.6421 19.5 9.5C19.5 5.35786 16.1421 2 12 2C7.85786 2 4.5 5.35786 4.5 9.5Z",stroke:"#212121",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 10.1667C9 10.1667 9.75 10.1667 10.5 11.5C10.5 11.5 12.8824 8.16667 15 7.5",stroke:"#212121",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 tracking-wider bg-white rounded-2xl p-2 !font-paragraph",children:[e.jsxs("button",{onClick:()=>C("compra"),className:`flex-1 py-3 rounded-xl font-medium transition-all duration-200 relative ${s==="compra"?"bg-constrast text-white shadow-lg shadow-constrast/25":"bg-white text-neutral-dark hover:bg-neutral hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-sm font-semibold",children:["COMPRA S/ ",F.compra]}),i&&f.applies&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs opacity-90 font-medium",children:"Â¡CupÃ³n activo!"})]}),i&&!f.applies&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary/60 rounded-full"}),e.jsxs("span",{className:"text-xs opacity-75 font-medium",children:["S/ ",i.tcVenta.toFixed(4)," disponible"]})]})]}),i&&f.applies&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-secondary rounded-full border-2 border-white"})]}),e.jsxs("button",{onClick:()=>C("venta"),className:`flex-1 py-3 rounded-xl font-medium transition-all duration-200 relative ${s==="venta"?"bg-constrast text-white shadow-lg shadow-constrast/25":"bg-white text-neutral-dark hover:bg-neutral hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-sm font-semibold",children:["VENTA S/ ",F.venta]}),i&&f.applies&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs opacity-90 font-medium",children:"Â¡CupÃ³n activo!"})]}),i&&!f.applies&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary/60 rounded-full"}),e.jsxs("span",{className:"text-xs opacity-75 font-medium",children:["S/ ",i.tcCompra.toFixed(4)," disponible"]})]})]}),i&&f.applies&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-secondary rounded-full border-2 border-white"})]})]}),e.jsxs("div",{className:"flex relative flex-col items-center space-y-4",children:[e.jsxs("div",{className:"flex items-center bg-white rounded-2xl shadow-lg p-2 w-full relative",children:[e.jsxs("div",{className:"flex-1 h-full flex flex-col ml-2 justify-center",children:[e.jsx("p",{className:"text-neutral-light text-[8px] uppercase font-semibold",children:s==="compra"?"ENVÃO SOLES":"ENVÃO DÃ“LARES"}),e.jsx("input",{type:"number",placeholder:"00.00",value:m,onChange:a=>{console.log("ğŸ–Šï¸ Input onChange disparado:",{value:a.target.value,tipo:"amount1",operationType:s}),V(a.target.value,"O")},className:"text-lg text-neutral-light bg-transparent border-none outline-none w-full placeholder:text-neutral-light"})]}),e.jsxs("div",{className:"flex items-center bg-secondary bg-opacity-50 rounded-xl px-6 py-3 ml-4",children:[e.jsx("img",{src:s==="compra"?"https://flagcdn.com/w580/pe.png":"https://flagcdn.com/w580/us.png",alt:s==="compra"?"PEN Flag":"USD Flag",className:"w-6 h-6 object-cover rounded-full mr-2"}),e.jsx("span",{className:"text-base font-medium tracking-wide text-neutral-light",children:s==="compra"?"PEN":"USD"})]})]}),e.jsx("div",{className:"absolute right-4 top-8 z-10",children:e.jsx("button",{onClick:Y,className:"bg-constrast text-white p-3 rounded-xl shadow-lg transition-all duration-200 hover:bg-opacity-90",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M14.9767 17.5C17.4017 15.8876 19 13.1305 19 10C19 5.02944 14.9706 1 10 1C9.3126 1 8.6432 1.07706 8 1.22302M14.9767 17.5V14M14.9767 17.5H18.5M5 2.51555C2.58803 4.13007 1 6.87958 1 10C1 14.9706 5.02944 19 10 19C10.6874 19 11.3568 18.9229 12 18.777M5 2.51555V6M5 2.51555H1.5",stroke:"#FAF3E1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})}),e.jsxs("div",{className:"flex items-center bg-white rounded-2xl shadow-lg p-2 w-full relative",children:[e.jsxs("div",{className:"flex-1 h-full flex flex-col ml-2 justify-center",children:[e.jsx("p",{className:"text-neutral-light text-[8px] uppercase font-semibold",children:s==="compra"?"RECIBO DÃ“LARES":"RECIBO SOLES"}),e.jsx("input",{type:"number",placeholder:"00.00",value:x,onChange:a=>{console.log("ğŸ–Šï¸ Input onChange disparado:",{value:a.target.value,tipo:"amount2",operationType:s}),V(a.target.value,"D")},className:"text-lg text-neutral-light bg-transparent border-none outline-none w-full placeholder:text-neutral-light"})]}),e.jsxs("div",{className:"flex items-center bg-secondary bg-opacity-50 rounded-xl px-6 py-3 ml-4",children:[e.jsx("img",{src:s==="compra"?"https://flagcdn.com/w580/us.png":"https://flagcdn.com/w580/pe.png",alt:s==="compra"?"USD Flag":"PEN Flag",className:"w-6 h-6 object-cover rounded-full mr-2"}),e.jsx("span",{className:"text-base font-medium tracking-wide text-neutral-light",children:s==="compra"?"USD":"PEN"})]})]})]}),i&&!f.applies&&e.jsxs("div",{className:"bg-gradient-to-r from-secondary/10 to-secondary/20 border-2 border-secondary/30 rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-secondary rounded-full flex items-center justify-center",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 1L10.5 6L16 6.75L12 10.5L13 16L8 13L3 16L4 10.5L0 6.75L5.5 6L8 1Z",fill:"#0C0C0C"})})}),e.jsxs("span",{className:"font-semibold text-neutral-dark text-sm",children:["CupÃ³n ",i.codigo," disponible"]})]}),e.jsxs("div",{className:"ml-11 space-y-1",children:[e.jsx("p",{className:"text-xs text-neutral-light font-medium",children:f.reason}),e.jsxs("p",{className:"text-xs text-constrast font-semibold",children:["ğŸ’° Tasa preferencial: S/ ",s==="compra"?i.tcVenta.toFixed(4):i.tcCompra.toFixed(4)]})]})]}),i&&f.applies&&e.jsxs("div",{className:"bg-gradient-to-r from-constrast/10 to-constrast/20 border-2 border-constrast/40 rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-constrast rounded-full flex items-center justify-center",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M13.5 6L6 13.5L2.5 10",stroke:"#F9F3E0",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("span",{className:"font-semibold text-neutral-dark text-sm",children:["Â¡CupÃ³n ",i.codigo," aplicado!"]})]}),e.jsx("div",{className:"ml-11",children:e.jsxs("p",{className:"text-xs text-neutral-light font-medium",children:["ğŸ‰ EstÃ¡s obteniendo la tasa preferencial de ",e.jsxs("span",{className:"font-bold text-constrast",children:["S/ ",s==="compra"?i.tcVenta.toFixed(4):i.tcCompra.toFixed(4)]})]})})]}),(n||l)&&e.jsx("div",{className:"flex justify-center gap-2 mt-1",children:n&&e.jsx(e.Fragment,{children:X?e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Ingresa tu cÃ³digo promocional",value:w,onChange:a=>J(a.target.value),className:"w-full py-4 px-4 pr-12 rounded-xl border-2 border-constrast/30 bg-white text-sm text-neutral-dark placeholder:text-neutral-light/60 focus:outline-none focus:border-constrast focus:ring-4 focus:ring-constrast/20 transition-all duration-200 font-paragraph",disabled:I,autoFocus:!0}),e.jsx("button",{onClick:()=>{z(!1),D(""),console.log("ğŸ§¹ Limpiando cupÃ³n y restaurando TC base..."),r.validateCoupon(""),A(null),b(),m&&y("O")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-light/60 hover:text-neutral-dark transition-colors p-1 hover:bg-neutral/50 rounded-lg",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),I&&e.jsx("div",{className:"absolute right-12 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-constrast border-t-transparent rounded-full"})})]}):e.jsxs("button",{onClick:()=>z(!0),className:"flex-1 justify-center flex gap-3 items-center py-4 px-4 rounded-xl text-neutral-dark font-medium text-sm hover:bg-neutral hover:shadow-md transition-all duration-200 border-2 border-transparent hover:border-secondary/30",children:["USAR CUPÃ“N",e.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M7.74985 14.3412L6.39628 13.5378C6.05276 13.3339 5.88099 13.2319 5.69036 13.2261C5.48436 13.2197 5.30956 13.3175 4.93835 13.5378C4.52261 13.7846 3.69594 14.4643 3.1612 14.1402C2.83398 13.9418 2.83398 13.4379 2.83398 12.4301V5.33301C2.83398 3.44739 2.83398 2.50458 3.41977 1.91879C4.00556 1.33301 4.94836 1.33301 6.83398 1.33301H10.1673C12.0529 1.33301 12.9957 1.33301 13.5815 1.91879C14.1673 2.50458 14.1673 3.44739 14.1673 5.33301V12.4301C14.1673 13.4379 14.1673 13.9418 13.8401 14.1402C13.3054 14.4643 12.4787 13.7846 12.0629 13.5378C11.7194 13.3339 11.5477 13.2319 11.3571 13.2261C11.1511 13.2197 10.9763 13.3175 10.6051 13.5378L9.25145 14.3412C8.88638 14.5579 8.70378 14.6663 8.50065 14.6663C8.29752 14.6663 8.11492 14.5579 7.74985 14.3412Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.5 5.33301L6.5 9.33301",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.5 9.33301H10.494M6.50598 5.33301H6.5",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})]})]})})}),e.jsxs("div",{className:"bg-white rounded-xl p-4 text-xs text-neutral-light mt-2",children:["Operaciones mayores a USD 5,000.00. Consigue un tipo de cambio preferencial"," ",e.jsx("a",{href:"https://mi.cambiafx.pe",target:"_blank",rel:"noopener noreferrer",className:"text-constrast underline font-medium",children:"AQUÃ"})]}),e.jsx("button",{onClick:ee,className:"mt-3 py-4 rounded-full bg-neutral-dark text-white font-semibold tracking-wider text-sm w-full hover:bg-opacity-90 transition-all duration-200",children:"INICIAR OPERACIÃ“N"}),q&&i&&e.jsx("div",{className:"fixed inset-0 bg-neutral-dark/80 backdrop-blur-sm flex items-center justify-center z-[100000] p-4",children:e.jsx("div",{className:"bg-primary rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl border border-neutral/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-constrast to-constrast/80 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-constrast/30",children:e.jsx("svg",{width:"36",height:"36",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M27 12L12 27L5 20",stroke:"#F9F3E0",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("h3",{className:"text-2xl font-bold text-neutral-dark mb-3 font-title",children:["Â¡CupÃ³n ",i.codigo," Validado!"]}),e.jsxs("div",{className:"bg-neutral/30 rounded-2xl p-5 mb-6 text-left",children:[e.jsxs("h4",{className:"font-bold text-neutral-dark mb-3 flex items-center gap-2 font-title",children:[e.jsx("div",{className:"w-6 h-6 bg-secondary rounded-full flex items-center justify-center",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 1L10.5 6L16 6.75L12 10.5L13 16L8 13L3 16L4 10.5L0 6.75L5.5 6L8 1Z",fill:"#0C0C0C"})})}),"Detalles del cupÃ³n:"]}),e.jsxs("ul",{className:"text-sm text-neutral-light space-y-2 font-paragraph",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-constrast rounded-full"}),"Rango vÃ¡lido: ",e.jsxs("span",{className:"font-semibold text-constrast",children:["$",i.montoMinimo," - $",i.montoMaximo," USD"]})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-constrast rounded-full"}),"Tasa de compra: ",e.jsxs("span",{className:"font-semibold text-constrast",children:["S/ ",i.tcVenta.toFixed(4)]})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-constrast rounded-full"}),"Tasa de venta: ",e.jsxs("span",{className:"font-semibold text-constrast",children:["S/ ",i.tcCompra.toFixed(4)]})]})]})]}),e.jsx("p",{className:"text-sm text-neutral-light mb-6 font-paragraph leading-relaxed",children:"El cupÃ³n se aplicarÃ¡ automÃ¡ticamente cuando el monto estÃ© dentro del rango vÃ¡lido."}),e.jsx("button",{onClick:()=>B(!1),className:"w-full py-4 bg-gradient-to-r from-constrast to-constrast/90 text-primary rounded-2xl font-bold text-sm hover:shadow-lg hover:shadow-constrast/30 transition-all duration-300 font-title tracking-wide",children:"Entendido"})]})})})]})};export{ne as E};
