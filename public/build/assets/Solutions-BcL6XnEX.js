import{j as i}from"./RequirementCard-DEdD30eg.js";import{r as n}from"./index-RYns6xqu.js";import{c as ee}from"./ReactAppend-vpV7VTGG.js";import{C as ie,e as se,s as ne,R as re,D as z,l as te,ai as ce,h as v,j as D,at as oe,al as le}from"./CreateReactScript-C-mUikVe.js";import{r as ae}from"./DxBox-DZgBbgD6.js";import"./sweetalert2.all-DJo0UVK6.js";import{L as me}from"./Filter-BDLE8FWR.js";import"./index-CXU7o9CY.js";import"./TippyButton-Duhaw_sS.js";import"./DataGrid-Cd7cnf9r.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./MenuItem-CBKDeUjr.js";import"./axios-B4uVmeYG.js";import"./Results-CoLI09XT.js";import"./TinyMCEFormGroup-TcwoFScW.js";import"./index-DNUR7M9R.js";import"./Detail-BKcVR7Sx.js";import"./index-SDlHnhXR.js";import"./HomeSeccionBlog-CZ04iwe8.js";import"./CarruselBrands-Chpi1Apc.js";import"./Strengths-8rnVxSkq.js";import"./ModalAppointment-BjEduSb5.js";import"./CallToAction-3RvJBMpr.js";import"./WeCupSection-CkKcxXUy.js";import"./BlurText-Cr9yZ_QA.js";import"./Supplies-DJwkpyzw.js";import"./Banner-CXqQ-nCn.js";import"./HeroSecctionEmpresa-Bs7Po8J9.js";import"./WhatsAppModal-BCTi89gL.js";const O=new oe,U=({feature:f,index:t,onUpdate:d,onRemove:x,type:m,canRemove:b,characteristics:w,benefits:j,addCharacteristic:R,addBenefit:N})=>{const g=(o,_)=>{d(t,o,_)},C=o=>{d(t,"image",o)};return i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx(v,{label:"Título",value:f.title,onChange:o=>g("title",o.target.value)}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:"Descripción"}),i.jsx("textarea",{className:"form-control",rows:3,value:f.description,onChange:o=>g("description",o.target.value)})]})]}),i.jsx("div",{className:"col-md-6",children:i.jsx(le,{current:"solution",label:"Imagen",currentImage:f.image,onChange:C,aspect:16/9})})]}),i.jsxs("div",{className:"d-flex justify-content-between",children:[i.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>x(t),disabled:!b,children:"Eliminar"}),m==="characteristic"&&t===w.length-1||m==="benefit"&&t===j.length-1?i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:m==="characteristic"?R:N,children:["Agregar"," ",m==="characteristic"?"Característica":"Beneficio"]}):null]})]})})},ue=({brands:f})=>{var M;const t=n.useRef(),d=n.useRef(),x=n.useRef(),m=n.useRef(),b=n.useRef(),w=n.useRef(),j=n.useRef(),R=n.useRef(),N=n.useRef(),g=n.useRef(),C=n.useRef(),o=n.useRef(),_=n.useRef(),I=n.useRef(),B=n.useRef(),F=n.useRef(),E=n.useRef(),[V,T]=n.useState(!1),[k,W]=n.useState(null),[u,y]=n.useState([{title:"",description:"",image:void 0}]),[p,S]=n.useState([{title:"",description:"",image:void 0}]),[J,A]=n.useState(""),q=()=>{y([...u,{title:"",description:"",image:void 0}])},K=n.useCallback((e,s,c)=>{y(h=>{const l=[...h];return l[e]={...l[e],[s]:c},l})},[]),Q=e=>{u.length<=1||y(u.filter((s,c)=>c!==e))},P=()=>{S([...p,{title:"",description:"",image:void 0}])},X=n.useCallback((e,s,c)=>{S(h=>{const l=[...h];return l[e]={...l[e],[s]:c},l})},[]),Y=e=>{p.length<=1||S(p.filter((s,c)=>c!==e))},G=e=>{e!=null&&e.id?T(!0):T(!1),x.current.value=(e==null?void 0:e.id)??"",m.current.value=(e==null?void 0:e.title)??"",b.current.value=(e==null?void 0:e.title_second)??"",w.current.value=(e==null?void 0:e.category.name)??"",A(e==null?void 0:e.category.name),W(e),j.current.value=(e==null?void 0:e.description)??"",R.current.value=(e==null?void 0:e.description_second)??"",N.current.value=(e==null?void 0:e.how_it_helps)??"",g.current.value=(e==null?void 0:e.description_helps)??"",C.current.value=(e==null?void 0:e.value_proposition)??"",o.current.value=(e==null?void 0:e.innovation_focus)??"",_.current.value=(e==null?void 0:e.customer_relation)??"",I.image.src=`/api/solution/media/${(e==null?void 0:e.image_icon)??"undefined"}`,B.image.src=`/api/solution/media/${(e==null?void 0:e.image)??"undefined"}`,F.image.src=`/api/solution/media/${(e==null?void 0:e.image_secondary)??"undefined"}`,E.image.src=`/api/solution/media/${(e==null?void 0:e.image_banner)??"undefined"}`,e!=null&&e.characteristics&&y(e.characteristics.map(s=>({title:s.title,description:s.description,image:s.image}))),e!=null&&e.benefits&&S(e.benefits.map(s=>({title:s.title,description:s.description,image:s.image}))),$(d.current).modal("show")},Z=async e=>{e.preventDefault();const s=new FormData,c={id:x.current.value||void 0,title:m.current.value,title_second:b.current.value,description:j.current.value,description_second:R.current.value,how_it_helps:N.current.value,description_helps:g.current.value,value_proposition:C.current.value,innovation_focus:o.current.value,customer_relation:_.current.value};for(const r in c)s.append(r,c[r]);const h=I.current.files[0];h&&s.append("image_icon",h);const l=B.current.files[0];l&&s.append("image",l);const H=F.current.files[0];H&&s.append("image_secondary",H);const L=E.current.files[0];L&&s.append("image_banner",L),u.forEach((r,a)=>{s.append(`characteristics[${a}][title]`,r.title),s.append(`characteristics[${a}][description]`,r.description),r.image&&(r.image.file?s.append(`characteristics[${a}][image]`,r.image.file):typeof r.image=="string"&&s.append(`characteristics[${a}][existing_image]`,r.image))}),p.forEach((r,a)=>{s.append(`benefits[${a}][title]`,r.title),s.append(`benefits[${a}][description]`,r.description),r.image&&(r.image.file?s.append(`benefits[${a}][image]`,r.image.file):typeof r.image=="string"&&s.append(`benefits[${a}][existing_image]`,r.image))}),s.append("category_name",J),await O.save(s)&&($(t.current).dxDataGrid("instance").refresh(),$(d.current).modal("hide"))};return i.jsxs(i.Fragment,{children:[i.jsx(ne,{gridRef:t,title:"Soluciones",rest:O,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar nueva solución",onClick:()=>G()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"title",caption:"Título",width:"200px"},{dataField:"description",caption:"Descripción",cellTemplate:(e,{data:s})=>{e.html(ae(i.jsx("div",{className:"text-truncate",style:{maxWidth:"300px"},children:s.description})))}},{dataField:"image",caption:"Imagen",width:"100px",cellTemplate:(e,{data:s})=>{re(e,i.jsx("img",{src:`/api/solution/media/${s.image}`,style:{width:"80px",height:"45px",objectFit:"cover",borderRadius:"4px"},onError:c=>c.target.src="/images/default-thumbnail.jpg"}))}},{caption:"Acciones",width:"100px",cellTemplate:(e,{data:s})=>{e.append(z({className:"btn btn-xs btn-soft-primary me-1",title:"Editar",icon:"fa fa-pen",onClick:()=>G(s)})),e.append(z({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>onDeleteClicked(s.id)}))}}]}),i.jsxs(te,{modalRef:d,title:V?"Editar Solución":"Nueva Solución",onSubmit:Z,size:"lg",children:[i.jsx("input",{ref:x,type:"hidden"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",id:"solution-container",children:[i.jsx(ce,{eRef:w,dropdownParent:"#solution-container",label:"Categoría",searchAPI:"/api/admin/category_solutions/paginate",searchBy:"name",allowCreate:!0,onChange:e=>A(e),initialValue:((M=k==null?void 0:k.category)==null?void 0:M.name)||""}),i.jsx(v,{eRef:m,label:"Título de la solución",required:!0}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:"Descripción"}),i.jsx("textarea",{ref:j,className:"form-control",rows:4,required:!0})]})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(v,{eRef:N,label:"Cómo ayuda"}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:"Descripción de ayuda"}),i.jsx("textarea",{ref:g,className:"form-control",rows:4})]})]})]}),i.jsx("div",{className:"row mt-3",children:i.jsxs("div",{className:"col-md-12",children:[i.jsx(v,{eRef:b,label:"Título complementario",required:!0}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:"Descripción complementaria"}),i.jsx("textarea",{ref:R,className:"form-control",rows:4,required:!0})]})]})}),i.jsxs("div",{className:"row mt-3",children:[i.jsx("div",{className:"col-md-12",children:i.jsx("div",{className:"col-md-2",children:i.jsx(D,{eRef:I,label:"Imagen icono (Card en portada)",aspect:1/1})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(D,{eRef:B,label:"Imagen principal",aspect:16/9})}),i.jsx("div",{className:"col-md-6",children:i.jsx(D,{eRef:F,label:"Imagen secundaria (Card en portada)",aspect:16/9})}),i.jsx("div",{className:"col-md-12 mt-3",children:i.jsx(D,{eRef:E,label:"Banner",aspect:16/9})})]}),i.jsx("div",{className:"row mt-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx(v,{eRef:C,label:"Propuesta de valor"}),i.jsx("h5",{className:"mb-3",children:"Características"}),u.map((e,s)=>i.jsx(U,{feature:e,index:s,onUpdate:K,onRemove:Q,canRemove:u.length>1,type:"characteristic",characteristics:u,benefits:p,addCharacteristic:q,addBenefit:P},`char-${s}`))]})}),i.jsxs("div",{className:"row mt-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(v,{eRef:o,label:"Enfoque de innovación"})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:"Relación con el cliente"}),i.jsx("textarea",{ref:_,className:"form-control",rows:5})]})}),i.jsxs("div",{className:"col-md-12",children:[i.jsx("h5",{className:"mb-3 mt-4",children:"Beneficios"}),p.map((e,s)=>i.jsx(U,{feature:e,index:s,onUpdate:X,onRemove:Y,canRemove:p.length>1,type:"benefit",characteristics:u,benefits:p,addCharacteristic:q,addBenefit:P},`benefit-${s}`))]})]})]})]})};ie((f,t)=>{ee(f).render(i.jsx(me,{children:i.jsx(se,{...t,title:"Soluciones",children:i.jsx(ue,{...t})})}))});
