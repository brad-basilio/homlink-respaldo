var Q=Object.defineProperty;var V=(c,t,m)=>t in c?Q(c,t,{enumerable:!0,configurable:!0,writable:!0,value:m}):c[t]=m;var B=(c,t,m)=>(V(c,typeof t!="symbol"?t+"":t,m),m);import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as l}from"./index-RYns6xqu.js";import{c as X}from"./ReactAppend-vpV7VTGG.js";import{B as Y}from"./Base-DmQtm8t4.js";import{r as Z}from"./DxBox-DZgBbgD6.js";import"./sweetalert2.all-DJo0UVK6.js";import{B as ee}from"./Results-BBVbNL2k.js";import{M as se}from"./Modal-IE2ysmSM.js";import{T as ie}from"./Table-BTG--uQT.js";import{I as k}from"./ImageFormGroup-Csvj9Cte.js";import{I as x}from"./InputFormGroup-B7mKwzkx.js";import{D as te}from"./DxButton-CsjWvhyj.js";import{C as ae}from"./CreateReactScript-BuKYEKxn.js";import{R as F}from"./ReactAppend-DPXaoPQG.js";import{S as re}from"./SwitchFormGroup-SB6Qzl6-.js";import{L as le}from"./Filter-CpekYgBC.js";import{D as ce}from"./DragDropImage-BoC6KBUm.js";import"./main-Y8JAyXgE.js";import"./index-CXU7o9CY.js";import"./tippy-react.esm-DYFqe69e.js";/* empty css              */import"./Logout-BlWggqgx.js";import"./index.esm-zkRd-kwu.js";import"./axios-B4uVmeYG.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./useTranslation-CZbMeh78.js";/* empty css               */import"./index-DNUR7M9R.js";class ne extends ee{constructor(){super(...arguments);B(this,"path","admin/services");B(this,"hasFiles",!0)}}const T=new ne,E=({feature:c,index:t,onUpdate:m,onRemove:v,type:d,canRemove:j,characteristics:N,benefits:R,addCharacteristic:w,addBenefit:y,addStep:C,steps:S})=>{const h=(n,u)=>{m(t,n,u)},q=n=>{m(t,"image",n)},_=()=>{switch(d){case"characteristic":return"fas fa-check-circle text-success";case"benefit":return"fas fa-star text-warning";case"step":return"fas fa-arrow-right text-primary";default:return"fas fa-circle"}},f=()=>{switch(d){case"characteristic":return"Característica";case"benefit":return"Beneficio";case"step":return"Paso";default:return"Item"}};return e.jsxs("div",{className:"card border shadow-sm h-100",children:[e.jsx("div",{className:"card-header bg-transparent border-bottom-0 pb-0",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:_()+" me-2"}),f()," ",t+1]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger rounded-circle d-flex align-items-center justify-content-center",onClick:()=>v(t),disabled:!j,title:"Eliminar",style:{width:"30px",height:"30px"},children:e.jsx("i",{className:"fas fa-times"})})]})}),e.jsx("div",{className:"card-body pt-2",children:d==="characteristic"?e.jsx("div",{className:"mb-3",children:e.jsx(x,{label:"Título de la característica",value:c.title,onChange:n=>h("title",n.target.value),placeholder:"Ingresa el título..."})}):e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-8 mb-3",children:[e.jsx(x,{label:"Título",value:c.title,onChange:n=>h("title",n.target.value),placeholder:"Ingresa el título..."}),e.jsx("label",{className:"form-label fw-semibold",children:"Descripción"}),e.jsx("textarea",{className:"form-control",rows:3,value:c.description,onChange:n=>h("description",n.target.value),placeholder:"Describe brevemente..."})]}),e.jsx("div",{className:"col-lg-3",children:e.jsx(ce,{label:"Imagen",currentImage:c.image,onChange:q,aspect:1})})]})}),e.jsx("div",{className:"card-footer bg-transparent border-top-0 pt-0",children:d==="characteristic"&&t===N.length-1||d==="benefit"&&t===R.length-1||d==="step"&&t===S.length-1?e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary w-100",onClick:d==="characteristic"?w:d==="benefit"?y:C,children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar ",f()]}):null})]})},oe=({brands:c})=>{const t=l.useRef(),m=l.useRef(),v=l.useRef(),d=l.useRef(),j=l.useRef(),N=l.useRef(),R=l.useRef(),w=l.useRef(),y=l.useRef(),C=l.useRef(),S=l.useRef(),h=l.useRef(),[q,_]=l.useState(!1),[f,n]=l.useState([{title:""}]),[u,D]=l.useState([{title:"",description:"",image:void 0}]),[g,I]=l.useState([{title:"",description:"",image:void 0}]),M=()=>{n([...f,{title:""}])},G=l.useCallback((s,i,a)=>{n(b=>{const o=[...b];return o[s]={...o[s],[i]:a},o})},[]),P=s=>{f.length<=1||n(f.filter((i,a)=>a!==s))},z=()=>{D([...u,{title:"",description:"",image:void 0}])},A=l.useCallback((s,i,a)=>{D(b=>{const o=[...b];return o[s]={...o[s],[i]:a},o})},[]),L=s=>{u.length<=1||D(u.filter((i,a)=>a!==s))},U=()=>{I([...g,{title:"",description:"",image:void 0}])},O=l.useCallback((s,i,a)=>{I(b=>{const o=[...b];return o[s]={...o[s],[i]:a},o})},[]),W=s=>{g.length<=1||I(g.filter((i,a)=>a!==s))},H=s=>{s!=null&&s.id?_(!0):_(!1),v.current.value=(s==null?void 0:s.id)??"",d.current.value=(s==null?void 0:s.name)??"",j.current.value=(s==null?void 0:s.title)??"",N.current.value=(s==null?void 0:s.description)??"",R.current.value=(s==null?void 0:s.title_approach)??"",w.current.value=(s==null?void 0:s.description_approach)??"",y.current.value=(s==null?void 0:s.title_methodology)??"",C.current.value=(s==null?void 0:s.description_methodology)??"",S.image.src=`/api/service/media/${(s==null?void 0:s.image)??"undefined"}`,h.image.src=`/api/service/media/${(s==null?void 0:s.image_banner)??"undefined"}`,s!=null&&s.characteristics_approach&&n(s.characteristics_approach.map(i=>({title:i.title}))),s!=null&&s.benefits&&D(s.benefits.map(i=>({title:i.title,description:i.description,image:i.image}))),s!=null&&s.steps_methodology&&I(s.steps_methodology.map(i=>({title:i.title,description:i.description,image:i.image}))),$(m.current).modal("show")},J=async s=>{s.preventDefault();const i=new FormData,a={id:v.current.value||void 0,name:d.current.value,title:j.current.value,description:N.current.value,title_approach:R.current.value,description_approach:w.current.value,title_methodology:y.current.value,description_methodology:C.current.value};for(const r in a)i.append(r,a[r]);const b=S.current.files[0];b&&i.append("image",b);const o=h.current.files[0];o&&i.append("image_banner",o),f.forEach((r,p)=>{i.append(`characteristics[${p}][title]`,r.title)}),u.forEach((r,p)=>{i.append(`benefits[${p}][title]`,r.title),i.append(`benefits[${p}][description]`,r.description),r.image&&(r.image.file?i.append(`benefits[${p}][image]`,r.image.file):typeof r.image=="string"&&i.append(`benefits[${p}][existing_image]`,r.image))}),g.forEach((r,p)=>{i.append(`steps[${p}][title]`,r.title),i.append(`steps[${p}][description]`,r.description),r.image&&(r.image.file?i.append(`steps[${p}][image]`,r.image.file):typeof r.image=="string"&&i.append(`steps[${p}][existing_image]`,r.image))}),await T.save(i)&&($(t.current).dxDataGrid("instance").refresh(),$(m.current).modal("hide"))},K=async({id:s,field:i,value:a})=>{await T.boolean({id:s,field:i,value:a})&&$(t.current).dxDataGrid("instance").refresh()};return e.jsxs(e.Fragment,{children:[e.jsx(ie,{gridRef:t,title:"Servicios",rest:T,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre del servicio",width:"200px"},{dataField:"title",caption:"Título",width:"200px"},{dataField:"description",caption:"Descripción",cellTemplate:(s,{data:i})=>{s.html(Z(e.jsx("div",{className:"text-truncate",style:{maxWidth:"300px"},children:i.description})))}},{dataField:"image",caption:"Imagen",width:"100px",cellTemplate:(s,{data:i})=>{F(s,e.jsx("img",{src:`/api/service/media/${i.image}`,style:{width:"80px",height:"45px",objectFit:"cover",borderRadius:"4px"},onError:a=>a.target.src="/images/default-thumbnail.jpg"}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:i})=>{F(s,e.jsx(re,{checked:i.featured,onChange:a=>K({id:i.id,field:"featured",value:a.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:i})=>{s.append(te({className:"btn btn-xs btn-soft-primary me-1",title:"Editar",icon:"fa fa-pen",onClick:()=>H(i)}))}}]}),e.jsxs(se,{modalRef:m,title:q?"Editar Servicio":"Nuevo Servicio",onSubmit:J,size:"xl",children:[e.jsx("input",{ref:v,type:"hidden"}),e.jsxs("ul",{className:"nav nav-tabs nav-justified",id:"serviceModalTabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-tab","data-bs-toggle":"tab","data-bs-target":"#basic-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Información Básica"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"benefits-tab","data-bs-toggle":"tab","data-bs-target":"#benefits-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-star me-1"}),"Beneficios"]})})]}),e.jsxs("div",{className:"tab-content mt-3",id:"serviceModalTabsContent",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-tab-pane",role:"tabpanel","aria-labelledby":"basic-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información General del Servicio"]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-bold text-muted mb-3",children:"Datos Principales"}),e.jsx(x,{eRef:d,label:"Nombre del servicio",required:!0}),e.jsx(x,{eRef:j,label:"Título del servicio",required:!0}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción del servicio"}),e.jsx("textarea",{ref:N,className:"form-control",rows:4,placeholder:"Describe brevemente el servicio...",required:!0})]})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-bold text-muted mb-3",children:"Imágenes del Servicio"}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"mb-3 ",children:[e.jsx(k,{eRef:S,label:"Imagen principal",aspect:1}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Imagen que representa el servicio"]})]})})]})})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"approach-tab-pane",role:"tabpanel","aria-labelledby":"approach-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-bullseye me-2"}),"Enfoque del Servicio"]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-lg-8",children:[e.jsx(x,{eRef:R,label:"Título del enfoque",required:!0}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción del enfoque"}),e.jsx("textarea",{ref:w,className:"form-control",rows:6,placeholder:"Explica el enfoque del servicio...",required:!0})]})]}),e.jsx("div",{className:" col-lg-4",children:e.jsx(k,{eRef:h,label:"Imagen del enfoque al servicio",aspect:4/3})})]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-list-check me-2"}),"Características del Enfoque"]}),e.jsx("div",{className:"row",children:f.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(E,{feature:s,index:i,onUpdate:G,onRemove:P,canRemove:f.length>1,type:"characteristic",characteristics:f,addCharacteristic:M})},`char-${i}`))})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"methodology-tab-pane",role:"tabpanel","aria-labelledby":"methodology-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-tasks me-2"}),"Metodología del Servicio"]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-lg-12",children:e.jsx(x,{eRef:y,label:"Título de metodología",required:!0})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción de metodología"}),e.jsx("textarea",{ref:C,className:"form-control",rows:4,placeholder:"Describe la metodología utilizada...",required:!0})]})})]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-route me-2"}),"Pasos de la Metodología"]}),e.jsx("div",{className:"row",children:g.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("span",{className:"badge bg-primary position-absolute",style:{top:"-5px",left:"-5px",zIndex:10},children:i+1}),e.jsx(E,{feature:s,index:i,onUpdate:O,onRemove:W,canRemove:g.length>1,type:"step",addStep:U,steps:g})]})},`step-${i}`))})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"benefits-tab-pane",role:"tabpanel","aria-labelledby":"benefits-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-star me-2"}),"Beneficios del Servicio"]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-thumbs-up me-2"}),"Lista de Beneficios"]}),e.jsx("div",{className:"row",children:u.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(E,{feature:s,index:i,onUpdate:A,onRemove:L,canRemove:u.length>1,type:"benefit",benefits:u,addBenefit:z})},`benefit-${i}`))})]})]})})})]})]})]})};ae((c,t)=>{X(c).render(e.jsx(le,{children:e.jsx(Y,{...t,title:"Servicios",children:e.jsx(oe,{...t})})}))});
