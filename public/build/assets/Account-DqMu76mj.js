var x=Object.defineProperty;var w=(t,a,r)=>a in t?x(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;var d=(t,a,r)=>(w(t,typeof a!="symbol"?a+"":a,r),r);import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as i}from"./index-RYns6xqu.js";import{c as j}from"./ReactAppend-vpV7VTGG.js";/* empty css              */import{J as N}from"./JSEncrypt-D3I3x59l.js";import{B as g}from"./Base-4XzyVO90.js";import{C as R,G as C}from"./CreateReactScript-BuKYEKxn.js";import{m as o}from"./main-Y8JAyXgE.js";import{I as P}from"./InputFormGroup-B7mKwzkx.js";import{P as n}from"./PasswordFormGroup-Djf3DWKl.js";import{L as b}from"./Logout-BlWggqgx.js";import"./index-CXU7o9CY.js";import"./tippy-react.esm-DYFqe69e.js";import"./index.esm-zkRd-kwu.js";import"./axios-B4uVmeYG.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./useTranslation-CZbMeh78.js";import"./Filter-CpekYgBC.js";/* empty css               */class c{}d(c,"email",async a=>{try{const{status:r,result:s}=await o.Fetch("/api/admin/account/email",{method:"PATCH",body:JSON.stringify(a)});if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:s.message,type:"success"}),!0}catch(r){return o.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:r.message,type:"danger"}),!1}}),d(c,"password",async a=>{try{const{status:r,result:s}=await o.Fetch("/api/admin/account/password",{method:"PATCH",body:JSON.stringify(a)});if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:s.message,type:"success"}),!0}catch(r){return o.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:r.message,type:"danger"}),!1}});const E=({session:t})=>{const a=new N;a.setPublicKey(C.PUBLIC_RSA_KEY);const r=i.useRef(),s=i.useRef(),u=i.useRef(),p=i.useRef(),f=i.useRef(),y=async l=>{l.preventDefault();const m={email:r.current.value,password:a.encrypt(s.current.value)};await c.email(m)&&b()},h=async l=>{l.preventDefault();const m={password:a.encrypt(u.current.value),newPassword:a.encrypt(p.current.value),confirmPassword:a.encrypt(f.current.value)};await c.password(m)&&b()};return e.jsx("div",{className:"row justify-content-center align-items-center",style:{height:"calc(100vh - 135px)"},children:e.jsx("div",{className:"col-lg-6 col-md-8 col-sm-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title mb-0",children:"Cuenta de usuario"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"nav flex-column nav-pills nav-pills-tab",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e.jsx("a",{className:"nav-link active show mb-1",id:"email-container-tab","data-bs-toggle":"pill",href:"#email-container",role:"tab","aria-controls":"email-container","aria-selected":"true",children:"Correo"}),e.jsx("a",{className:"nav-link mb-1",id:"password-container-tab","data-bs-toggle":"pill",href:"#password-container",role:"tab","aria-controls":"password-container","aria-selected":"false",children:"Contraseña"})]})}),e.jsx("div",{className:"col-sm-8",children:e.jsxs("div",{className:"tab-content pt-0",children:[e.jsxs("form",{className:"tab-pane fade active show",id:"email-container",role:"tabpanel","aria-labelledby":"email-container-tab",onSubmit:y,children:[e.jsx("h4",{className:"mt-0",children:"Actualizar correo de usuario"}),e.jsx(P,{eRef:r,label:"Correo de usuario",type:"email",value:t.email,required:!0}),e.jsx(n,{eRef:s,label:"Contraseña de confirmacion",type:"password",value:null,required:!0}),e.jsxs("button",{className:"btn btn-primary btn-block",type:"submit",children:[e.jsx("i",{className:"fa fa-save"})," Actualizar"]})]}),e.jsxs("form",{className:"tab-pane fade",id:"password-container",role:"tabpanel","aria-labelledby":"password-container-tab",onSubmit:h,children:[e.jsx("h4",{className:"mt-0",children:"Actualizar contraseña de usuario"}),e.jsx(n,{eRef:u,label:"Contraseña anterior",type:"password",value:null,required:!0}),e.jsx(n,{eRef:p,label:"Contraseña nueva",type:"password",value:null,required:!0}),e.jsx(n,{eRef:f,label:"Repita la contraseña nueva",type:"password",value:null,required:!0}),e.jsxs("button",{className:"btn btn-primary btn-block",type:"submit",children:[e.jsx("i",{className:"fa fa-save"})," Actualizar"]})]})]})})]}),e.jsx("hr",{className:"mt-3 mb-2"}),e.jsx("p",{className:"card-text text-center",children:e.jsxs("small",{className:"text-muted",children:["Ultima actualizacion ",moment(t.updated_at).fromNow()]})})]})]})})})};R((t,a)=>{j(t).render(e.jsx(g,{...a,title:"Cuenta de usuario",children:e.jsx(E,{...a})}))});
