import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as s}from"./index-RYns6xqu.js";import{c as T}from"./ReactAppend-vpV7VTGG.js";import{C as w,e as y,T as F,R as b,M as S,h as v,aC as N}from"./CreateReactScript-C-mUikVe.js";import"./sweetalert2.all-DJo0UVK6.js";import{r as j}from"./DxBox-DZgBbgD6.js";import"./index-CXU7o9CY.js";import"./Filter-BDLE8FWR.js";import"./axios-B4uVmeYG.js";import"./TippyButton-Duhaw_sS.js";import"./DataGrid-Cd7cnf9r.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./MenuItem-CBKDeUjr.js";import"./Results-CoLI09XT.js";import"./TinyMCEFormGroup-TcwoFScW.js";import"./index-DNUR7M9R.js";import"./Detail-BKcVR7Sx.js";import"./index-SDlHnhXR.js";import"./HomeSeccionBlog-CZ04iwe8.js";import"./CarruselBrands-Chpi1Apc.js";import"./Strengths-8rnVxSkq.js";import"./ModalAppointment-BjEduSb5.js";import"./CallToAction-3RvJBMpr.js";import"./WeCupSection-CkKcxXUy.js";import"./BlurText-Cr9yZ_QA.js";import"./Supplies-DJwkpyzw.js";import"./Banner-CXqQ-nCn.js";import"./HeroSecctionEmpresa-Bs7Po8J9.js";import"./WhatsAppModal-BCTi89gL.js";const f=new N,E=({data:r,gridRef:l,isTranslationMode:n,current_lang_id:d,default_lang_id:m})=>{const[o,p]=s.useState(r.value||r.value_base),[c,u]=s.useState(!1),g=s.useRef(null),x=r.value!==null&&r.value!==r.value_base,h=async()=>{try{const i={group:r.group,key:r.key,value:o};n?await f.translate(i):await f.save({...i,id:r.id}),$(l.current).dxDataGrid("instance").refresh(),u(!1)}catch{Notify.error("Error al guardar traducción")}};return e.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[!c&&e.jsx("span",{className:"text-nowrap",children:x?e.jsx("i",{className:"fas fa-check text-success"}):e.jsx("i",{className:"fas fa-times text-danger"})}),e.jsx("input",{ref:g,className:"form-control flex-grow-1",value:o,onChange:i=>{p(i.target.value),u(!0)},onFocus:()=>u(!0),onBlur:()=>setTimeout(()=>u(!1),200)}),c&&e.jsx("button",{className:"btn btn-xs btn-soft-primary",onClick:h,children:n?e.jsx("i",{className:"fa fa-language"}):e.jsx("i",{className:"fa fa-pen"})})]})},k=({current_lang_id:r,default_lang_id:l})=>{const n=s.useRef(),d=s.useRef(),m=s.useRef(),o=s.useRef(),p=s.useRef(),c=s.useRef(),[u,g]=s.useState(!1),x=t=>{g(!1),m.current.value="",o.current.value="",p.current.value="",c.current.value="",$(d.current).modal("show")},h=async t=>{t.preventDefault();const a={id:m.current.value||void 0,group:o.current.value,key:p.current.value,value:c.current.value};await f.save(a)&&($(n.current).dxDataGrid("instance").refresh(),$(d.current).modal("hide"))},i=r!==l;return e.jsxs(e.Fragment,{children:[e.jsx(F,{gridRef:n,title:"Traducciones",rest:f,remoteOperations:{paging:!0,filtering:!0,sorting:!0},toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>x()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"group",caption:"Grupo",allowFiltering:!1,filterOperations:["contains"],filterType:"text",cellTemplate:(t,{data:a})=>{t.html(j(e.jsx(e.Fragment,{children:a.group})))}},{dataField:"key",caption:"Clave",allowFiltering:!1,filterOperations:["contains"],filterType:"text",cellTemplate:(t,{data:a})=>{t.html(j(e.jsx(e.Fragment,{children:a.key})))}},{dataField:"value_base",caption:"Valor Español",width:"200px",allowFiltering:!0,filterOperations:["contains"],filterType:"text"},{dataField:"is_translated",caption:"Estado",width:"80px",allowFiltering:!1,filterType:"text",cellTemplate:(t,{data:a})=>{const R=a.value&&a.value!==a.value_base;t.html(j(e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100%"},children:R?e.jsx("i",{className:"fas fa-check-circle text-success",title:"Traducido"}):e.jsx("i",{className:"fas fa-times-circle text-danger",title:"Sin traducir"})})))},calculateFilterExpression:(t,a)=>t==="traducido"?["is_translated","=",!0]:t==="no traducido"?["is_translated","=",!1]:null},{dataField:"value",caption:i?"Traducción":"Valor",allowFiltering:!1,cellTemplate:(t,{data:a})=>{b(t,e.jsx(E,{data:a,gridRef:n,isTranslationMode:i,current_lang_id:r,default_lang_id:l}))}}],options:{searchPanel:{visible:!0,width:240,placeholder:"Buscar...",highlightSearchText:!0},filterRow:{visible:!0,applyFilter:"auto"},paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,25,50,100],showInfo:!0}}}),e.jsx(S,{modalRef:d,title:u?"Editar traducción":"Agregar traducción",onSubmit:h,size:"md",children:e.jsxs("div",{className:"row",id:"translations-container",children:[e.jsx("input",{ref:m,type:"hidden"}),e.jsx(v,{eRef:o,label:"Grupo",col:"col-12",required:!0}),e.jsx(v,{eRef:p,label:"Clave",col:"col-6",required:!0}),e.jsx(v,{eRef:c,label:"Valor",col:"col-6",required:!0})]})})]})};w((r,l)=>{T(r).render(e.jsx(y,{...l,title:"Traducciones",children:e.jsx(k,{...l})}))});
