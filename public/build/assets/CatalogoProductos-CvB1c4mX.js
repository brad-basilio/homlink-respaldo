import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as n,R as I}from"./index-RYns6xqu.js";import{G as E,C as G}from"./CreateReactScript-BuKYEKxn.js";import{c as q}from"./ReactAppend-vpV7VTGG.js";import{B as O}from"./Base-B0jCVaQs.js";import{H as U}from"./Header-Cr5ifcob.js";import{F as K}from"./Footer-DBGXNGtf.js";import{C as F}from"./Detail-BUTDw3GY.js";import{L as J,G as Y,M as Q}from"./esm-DE6x54Dx.js";import{P as X}from"./PropertyCard-Wm8yFHdp.js";import"./index.esm-zkRd-kwu.js";import"./axios-B4uVmeYG.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./main-Y8JAyXgE.js";/* empty css               *//* empty css              */import"./index-CXU7o9CY.js";import"./Filter-CpekYgBC.js";import"./Results-BBVbNL2k.js";import"./useTranslation-CZbMeh78.js";import"./createLucideIcon-D_WcjKff.js";import"./proxy-Dg7W2VMC.js";import"./index-SDlHnhXR.js";import"./index-DNUR7M9R.js";import"./HtmlContent-CZmf3wHb.js";import"./sweetalert2.all-DJo0UVK6.js";import"./HomeSeccionBlog-B1gXNdAR.js";import"./navigation-B2UEjSS3.js";import"./classes-to-selector-DtC0LQ2m.js";import"./pagination-iC1L0vLA.js";import"./Strengths-CX6bGGPm.js";import"./CarruselBrands-Dk-UaKph.js";const Z=({propiedades:a=[]})=>{var M;const[b,N]=n.useState(null),i=a.length>0&&a[0].latitude&&a[0].longitude?{lat:parseFloat(a[0].latitude),lng:parseFloat(a[0].longitude)}:{lat:-12.0464,lng:-77.0428},L={width:"100%",height:"100vh"},[g,S]=n.useState({}),c=(o,m)=>{S(v=>({...v,[o]:m}))};return e.jsxs("div",{className:"flex h-screen px-[5%]",children:[e.jsxs("div",{className:"w-2/3 overflow-y-auto bg-white property-list-container",children:[e.jsx("div",{className:"py-10 grid grid-cols-3 gap-6",children:a&&a.length>0?a.map(o=>e.jsx("div",{className:`transition-all duration-300 ${b===o.id?"shadow-lg ring-1 ring-secondary transform scale-[1.02]":""}`,onMouseEnter:()=>N(o.id),onMouseLeave:()=>N(null),"data-property-id":o.id,children:e.jsx(X,{propiedad:o,currentIndex:g[o.id]||0,onIndexChange:c})},o.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No hay propiedades disponibles en este momento."})})}),a&&a.length>0&&e.jsx("div",{className:"p-4 text-center  bg-white sticky bottom-0",children:e.jsx("button",{className:"w-full py-3 px-6 bg-secondary hover:bg-primary text-white rounded-lg font-medium transition-colors",children:"Ver más propiedades"})})]}),e.jsx("div",{className:"w-1/3 py-10 relative rounded-xl overflow-hidden",children:e.jsx(J,{googleMapsApiKey:((M=E)==null?void 0:M.GMAPS_API_KEY)||"",children:e.jsx(Y,{mapContainerStyle:L,center:i,zoom:13,options:{zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},onLoad:()=>{},children:a.map(o=>{if(!o.latitude||!o.longitude)return null;const m=Math.floor(o.price_per_night||120),v=b===o.id,p={url:v?"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                    <svg width="80" height="40" viewBox="0 0 80 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="2" y="2" width="76" height="36" rx="18" fill="#1f2937" stroke="white" stroke-width="2"/>
                      <text x="40" y="26" text-anchor="middle" fill="white" font-size="14" font-weight="bold">S/${m}</text>
                    </svg>
                  `):"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                    <svg width="70" height="32" viewBox="0 0 70 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="1" y="1" width="68" height="30" rx="15" fill="white" stroke="#d1d5db" stroke-width="1"/>
                      <text x="35" y="21" text-anchor="middle" fill="#374151" font-size="12" font-weight="600">S/${m}</text>
                    </svg>
                  `)};return window.google&&window.google.maps&&window.google.maps.Size&&(p.scaledSize=v?new window.google.maps.Size(80,40):new window.google.maps.Size(70,32),p.anchor=v?new window.google.maps.Point(40,20):new window.google.maps.Point(35,16)),e.jsx(Q,{position:{lat:parseFloat(o.latitude),lng:parseFloat(o.longitude)},title:o.title||o.address,icon:p,onClick:()=>{const y=document.querySelector(`[data-property-id="${o.id}"]`);y&&y.scrollIntoView({behavior:"smooth",block:"center"})},onMouseOver:()=>N(o.id),onMouseOut:()=>N(null)},o.id)})})})})]})},ee=({isOpen:a,onClose:b,onApplyFilters:N,currentFilters:i={}})=>{const[L,g]=n.useState(i.instantBook?"reservacion":"estacionamiento"),[S,c]=n.useState(i.propertyType||"cualquier"),[M,o]=n.useState(i.services||["wifi","aire","televisor","cocina"]),[m,v]=n.useState(i.amenities||["lavadora","coworking"]),[p,y]=n.useState(i.characteristics||["piscina","estacionamiento"]),[w,B]=n.useState(i.featured?"favoritos":"luxe");if(I.useEffect(()=>{i&&(g(i.instantBook?"reservacion":"estacionamiento"),c(i.propertyType||"cualquier"),o(i.services||["wifi","aire","televisor","cocina"]),v(i.amenities||["lavadora","coworking"]),y(i.characteristics||["piscina","estacionamiento"]),B(i.featured?"favoritos":"luxe"))},[i]),!a)return null;const P=[{id:"reservacion",label:"Reservación inmediata",icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"estacionamiento",label:"Estacionamiento gratuito",icon:e.jsxs("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("path",{d:"M8 7h4a3 3 0 0 1 0 6h-4V7z"}),e.jsx("path",{d:"M8 13h3"})]}),selected:!1},{id:"lavadora",label:"Lavadora y secadora",icon:e.jsxs("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M8 3v3M16 3v3M8 18v3M16 18v3"})]}),selected:!1},{id:"llegada",label:"Llegada autónoma",icon:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),selected:!1}],j=[{id:"cualquier",label:"Cualquier tipo"},{id:"habitacion",label:"Habitación"},{id:"alojamiento",label:"Alojamiento entero"}],z=[{id:"wifi",label:"Wifi",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})}),selected:!0},{id:"aire",label:"Aire acondicionado",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),selected:!0},{id:"televisor",label:"Televisor",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),selected:!0},{id:"cocina",label:"Cocina",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),selected:!0},{id:"secadora",label:"Secadora",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!1},{id:"gimnasio",label:"Gimnasio",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077l1.41-.513m14.095-5.13l1.41-.513M5.106 17.785l1.15-.964m11.49-9.642l1.149-.964M7.501 19.795l.75-1.3m7.5-12.99l.75-1.3m-6.063 16.658l.26-1.477m2.605-14.772l.26-1.477m0 17.726l-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205L12 12"})}),selected:!0}],_=[{id:"lavadora",label:"Lavadora",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M8 3v3M16 3v3M8 18v3M16 18v3"})]}),selected:!0},{id:"calefaccion",label:"Calefacción",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!1},{id:"coworking",label:"Coworking",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m8 0H8m8 0v6a2 2 0 01-2 2H10a2 2 0 01-2-2V6m8 0H8"})}),selected:!0},{id:"secadora",label:"Secadora de...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!0},{id:"plancha",label:"Plancha",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),selected:!0}],R=[{id:"piscina",label:"Piscina",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),selected:!0},{id:"jacuzzi",label:"Jacuzzi",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18A2 2 0 0 1 23 12v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2z"})}),selected:!1},{id:"estacionamiento",label:"Estacionamiento...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"cargador",label:"Cargador de e...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"cuna",label:"Cuna para be...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z"})}),selected:!0},{id:"cama",label:"Cama King",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),selected:!0},{id:"parrilla",label:"Parrilla",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!0},{id:"desayuno",label:"Desayuno",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),selected:!1},{id:"apto",label:"Apto para fumador...",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!1}],A=[{id:"favoritos",label:"Favoritos entre huéspedes",subtitle:"Los alojamientos más populares en Homlyink",icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),selected:!0},{id:"luxe",label:"Luxe",subtitle:"Alojamientos de lujo con un diseño único",icon:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),selected:!1}],W=t=>{o(u=>u.includes(t)?u.filter(f=>f!==t):[...u,t])},C=t=>{v(u=>u.includes(t)?u.filter(f=>f!==t):[...u,t])},H=t=>{y(u=>u.includes(t)?u.filter(f=>f!==t):[...u,t])},T=()=>{g("reservacion"),c("cualquier"),o([]),v([]),y([]),B("favoritos")},V=()=>{N({recommended:L,accommodationType:S,services:M,amenities:m,features:p,highlighted:w}),b()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:e.jsx("div",{className:"overflow-hidden rounded-xl",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filtros"}),e.jsx("button",{onClick:b,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recomendado para ti"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:P.map(t=>e.jsxs("button",{onClick:()=>g(t.id),className:`p-3 border rounded-lg text-left transition-all ${L===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:t.icon}),e.jsx("div",{className:"text-sm font-medium text-blue-600",children:t.label})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tipo de alojamiento"}),e.jsx("div",{className:"flex space-x-2",children:j.map(t=>e.jsx("button",{onClick:()=>c(t.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${S===t.id?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.label},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Servicios"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Popular"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:z.map(t=>e.jsx("button",{onClick:()=>W(t.id),className:`p-3 border rounded-lg text-left transition-all ${M.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),M.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Comodidades"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:_.map(t=>e.jsx("button",{onClick:()=>C(t.id),className:`p-3 border rounded-lg text-left transition-all ${m.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),m.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Características"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.map(t=>e.jsx("button",{onClick:()=>H(t.id),className:`p-3 border rounded-lg text-left transition-all ${p.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),p.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Alojamientos destacados"}),e.jsx("div",{className:"space-y-3",children:A.map(t=>e.jsx("button",{onClick:()=>B(t.id),className:`w-full p-4 border rounded-lg text-left transition-all ${w===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.icon,e.jsx("span",{className:"font-medium text-blue-600",children:t.label})]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.subtitle})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${w===t.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:w===t.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},t.id))})]})]}),e.jsxs("div",{className:"flex space-x-3 p-4 border-t bg-gray-50",children:[e.jsx("button",{onClick:T,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Limpiar filtros"}),e.jsx("button",{onClick:V,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Mostrar alojamientos"})]})]})})})};function te({propiedades:a}){const[b,N]=n.useState("");n.useState("Fecha");const[i,L]=n.useState(""),[g,S]=n.useState([0,500]),[c,M]=n.useState("relevancia"),[o,m]=n.useState(!1),[v,p]=n.useState(!1),[y,w]=n.useState(!1),[B,P]=n.useState(!1),[j,z]=n.useState({priceRange:[0,500],guests:"",bedrooms:"",amenities:[],services:[],characteristics:[],propertyType:"",location:null,instantBook:!1,featured:!1}),[_,R]=n.useState(a||[]),[A,W]=n.useState({total:(a==null?void 0:a.length)||0});n.useEffect(()=>{a&&(R(a),W({total:a.length}))},[a]);const C=(s=j)=>{let r=a||[];b&&(r=r.filter(l=>[l.district||"",l.province||"",l.department||"",l.address||""].join(" ").toLowerCase().includes(b.toLowerCase())));const x=s.priceRange||g;(x[0]>0||x[1]<500)&&(r=r.filter(l=>{const k=parseFloat(l.price_per_night||0);return k>=x[0]&&k<=x[1]}));const d=s.guests||i;d&&(r=r.filter(l=>parseInt(l.max_guests||0)>=parseInt(d))),s.bedrooms&&(r=r.filter(l=>parseInt(l.bedrooms||0)>=parseInt(s.bedrooms)));const h=[...s.amenities||[],...s.services||[],...s.characteristics||[]];h.length>0&&(r=r.filter(l=>{const k=l.amenities||[];return h.some($=>k.some(D=>D.toLowerCase().includes($.toLowerCase())))})),s.propertyType&&s.propertyType!=="cualquier"&&(r=r.filter(l=>l.property_type&&l.property_type.toLowerCase().includes(s.propertyType.toLowerCase()))),s.instantBook&&(r=r.filter(l=>l.instant_book===!0)),s.featured&&(r=r.filter(l=>l.featured===!0)),s.location&&(r=r.filter(l=>!l.latitude||!l.longitude?!1:T(s.location.lat,s.location.lng,parseFloat(l.latitude),parseFloat(l.longitude))<=5)),r=H(r,c),R(r),W({total:r.length})},H=(s,r)=>{const x=[...s];switch(r){case"precio-menor":return x.sort((d,h)=>parseFloat(d.price_per_night||0)-parseFloat(h.price_per_night||0));case"precio-mayor":return x.sort((d,h)=>parseFloat(h.price_per_night||0)-parseFloat(d.price_per_night||0));case"fecha-reciente":return x.sort((d,h)=>new Date(h.created_at||0)-new Date(d.created_at||0));case"fecha-antigua":return x.sort((d,h)=>new Date(d.created_at||0)-new Date(h.created_at||0));case"rating":return x.sort((d,h)=>parseFloat(h.rating||0)-parseFloat(d.rating||0));case"huespedes":return x.sort((d,h)=>parseInt(h.max_guests||0)-parseInt(d.max_guests||0));default:return x.sort((d,h)=>d.featured&&!h.featured?-1:!d.featured&&h.featured?1:parseFloat(h.rating||0)-parseFloat(d.rating||0))}},T=(s,r,x,d)=>{const l=(x-s)*Math.PI/180,k=(d-r)*Math.PI/180,$=Math.sin(l/2)*Math.sin(l/2)+Math.cos(s*Math.PI/180)*Math.cos(x*Math.PI/180)*Math.sin(k/2)*Math.sin(k/2);return 6371*(2*Math.atan2(Math.sqrt($),Math.sqrt(1-$)))},V=s=>{N(s.target.value),setTimeout(()=>C(),300)},t=s=>{L(s),p(!1);const r={...j,guests:s};z(r),C(r)},u=(s,r)=>{S([s,r]),w(!1);const x={...j,priceRange:[s,r]};z(x),C(x)},f=s=>{M(s),m(!1),C()};return n.useEffect(()=>{a&&C()},[c]),n.useEffect(()=>{const s=r=>{r.target.closest(".dropdown-container")||(m(!1),p(!1),w(!1))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(U,{}),e.jsx("div",{className:"bg-white sticky top-0 z-40",children:e.jsxs("div",{className:"mx-auto px-[5%] py-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:b,onChange:V,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-full leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"¿A dónde vas?"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{m(!o),p(!1),w(!1)},className:"px-4 py-2 border border-gray-300 rounded-full text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2",children:[c==="relevancia"?"Relevancia":c==="precio-menor"?"Precio: menor a mayor":c==="precio-mayor"?"Precio: mayor a menor":c==="fecha-reciente"?"Más recientes":c==="fecha-antigua"?"Más antiguos":c==="rating"?"Mejor valorados":c==="huespedes"?"Más huéspedes":"Ordenar",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&e.jsx("div",{className:"absolute top-full mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:()=>f("relevancia"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${c==="relevancia"?"bg-blue-50 text-blue-700":""}`,children:"Relevancia"}),e.jsx("button",{onClick:()=>f("precio-menor"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${c==="precio-menor"?"bg-blue-50 text-blue-700":""}`,children:"Precio: menor a mayor"}),e.jsx("button",{onClick:()=>f("precio-mayor"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${c==="precio-mayor"?"bg-blue-50 text-blue-700":""}`,children:"Precio: mayor a menor"}),e.jsx("button",{onClick:()=>f("fecha-reciente"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${c==="fecha-reciente"?"bg-blue-50 text-blue-700":""}`,children:"Más recientes"}),e.jsx("button",{onClick:()=>f("fecha-antigua"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${c==="fecha-antigua"?"bg-blue-50 text-blue-700":""}`,children:"Más antiguos"}),e.jsx("button",{onClick:()=>f("rating"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${c==="rating"?"bg-blue-50 text-blue-700":""}`,children:"Mejor valorados"}),e.jsx("button",{onClick:()=>f("huespedes"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${c==="huespedes"?"bg-blue-50 text-blue-700":""}`,children:"Más huéspedes"})]})})]}),e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{p(!v),m(!1),w(!1)},className:`px-4 py-2 border rounded-full text-sm font-medium ${i?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700"} hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2`,children:[i?`${i} huéspedes`:"Huéspedes",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&e.jsx("div",{className:"absolute top-full mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[[1,2,3,4,5,6,7,8].map(s=>e.jsxs("button",{onClick:()=>t(s.toString()),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i===s.toString()?"bg-blue-50 text-blue-700":""}`,children:[s," huésped",s>1?"es":""]},s)),e.jsx("button",{onClick:()=>t("8+"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="8+"?"bg-blue-50 text-blue-700":""}`,children:"8+ huéspedes"}),i&&e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsx("button",{onClick:()=>t(""),className:"w-full text-left px-3 py-2 rounded-md text-sm text-red-600 hover:bg-red-50",children:"Limpiar"})})]})})]}),e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{w(!y),m(!1),p(!1)},className:`px-4 py-2 border rounded-full text-sm font-medium ${g[0]>0||g[1]<500?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700"} hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2`,children:[g[0]>0||g[1]<500?`S/ ${g[0]} - S/ ${g[1]}`:"Rango de precio",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&e.jsx("div",{className:"absolute top-full mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Rango de precio por noche"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>u(0,50),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 0 - S/ 50"}),e.jsx("button",{onClick:()=>u(50,100),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 50 - S/ 100"}),e.jsx("button",{onClick:()=>u(100,200),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 100 - S/ 200"}),e.jsx("button",{onClick:()=>u(200,300),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 200 - S/ 300"}),e.jsx("button",{onClick:()=>u(300,500),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 300 - S/ 500"}),e.jsx("button",{onClick:()=>u(500,1e3),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 500+"}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsx("button",{onClick:()=>u(0,500),className:"w-full text-left px-3 py-2 rounded-md text-sm text-red-600 hover:bg-red-50",children:"Limpiar rango"})})]})]})})]}),e.jsx("button",{onClick:()=>{P(!0)},className:"p-2 border border-gray-300 rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-lg text-gray-600",children:[A.total," propiedades encontradas"]})})]})}),e.jsx(ee,{isOpen:B,onClose:()=>P(!1),onApplyFilters:s=>{console.log("Modal filters received:",s);const r={...j,instantBook:s.recommended==="reservacion",featured:s.highlighted==="favoritos",propertyType:s.accommodationType==="cualquier"?"":s.accommodationType,services:s.services||[],amenities:s.amenities||[],characteristics:s.features||[],priceRange:j.priceRange,guests:j.guests,bedrooms:j.bedrooms,location:j.location};console.log("Applied filters:",r),z(r),C(r)},currentFilters:j}),e.jsx(Z,{propiedades:_}),e.jsx(K,{})]})}G((a,b)=>{q(a).render(e.jsx(F,{children:e.jsx(O,{...b,children:e.jsx(te,{...b})})}))});
