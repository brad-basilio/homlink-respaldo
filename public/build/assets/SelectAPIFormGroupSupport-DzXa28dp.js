import{j as e}from"./RequirementCard-DEdD30eg.js";import{i as T}from"./tippy-react.esm-DYFqe69e.js";import{r as g}from"./index-RYns6xqu.js";import{m as j}from"./main-Y8JAyXgE.js";const U=({id:s,col:h,label:m,specification:i,eRef:o,required:p=!1,dropdownParent:N,searchAPI:u,searchBy:n,multiple:S=!1,filter:l=null,onChange:b=()=>{},templateResult:k,templateSelection:E,tags:C=!1,initialValue:c=null,allowCreate:d=!0})=>(o||(o=g.useRef()),s||(s=`select-${crypto.randomUUID()}`),g.useEffect(()=>{const a=$(o.current).select2({dropdownParent:N||document.body,minimumInputLength:0,tags:C,ajax:{url:u,headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(j.Cookies.get("XSRF-TOKEN"))},type:"POST",data:function(t){return j.JSON.stringify({sort:[{selector:n,desc:!1}],skip:(t.page-1)*10,take:10,filter:l?[[n,"contains",t.term||""],"and",l]:[n,"contains",t.term||""]})},processResults:function(t,r){const v=r.page||1,f=t.data.map(x=>({id:x[n],text:x[n]}));return t.data.length===0&&r.term&&d&&f.push({id:r.term,text:`Crear "${r.term}"`}),{results:f,pagination:{more:t.totalCount>v*10}}}},createTag:d?t=>({id:t.term,text:`Crear "${t.term}"`}):null,templateResult:t=>t.id===t.text?$(`<div class="bg-transparent">
                            <i class="fa fa-plus-circle me-2"></i>${t.text}
                        </div>`):t.text});if(c){const t=new Option(c,c,!0,!0);o.current.appendChild(t),a.trigger("change")}return a.on("change",t=>{const r=t.target.value;b(r)}),()=>a.select2("destroy")},[u,n,l,c]),e.jsxs("div",{className:`form-group ${h} mb-2`,children:[e.jsx("label",{htmlFor:s,className:"form-label mb-1",children:m&&e.jsxs(e.Fragment,{children:[m," ",p&&e.jsx("b",{className:"text-danger",children:"*"}),i&&e.jsx(T,{content:i,children:e.jsx("small",{className:"ms-1 fa fa-question-circle text-muted"})})]})}),e.jsx("select",{ref:o,id:s,required:p,className:"form-control",style:{width:"100%"},multiple:S})]}));export{U as S};
