import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as a,R as K}from"./index-RYns6xqu.js";import{G as J,C as Y}from"./CreateReactScript-BuKYEKxn.js";import{c as Q}from"./ReactAppend-vpV7VTGG.js";import{B as X}from"./Base-B0jCVaQs.js";import{H as Z}from"./Header-Cr5ifcob.js";import{F}from"./Footer-DBGXNGtf.js";import{C as ee}from"./Detail-BUTDw3GY.js";import{L as te,G as se,M as oe}from"./esm-DE6x54Dx.js";import{P as le}from"./PropertyCard-Wm8yFHdp.js";import"./index.esm-zkRd-kwu.js";import"./axios-B4uVmeYG.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./main-Y8JAyXgE.js";/* empty css               *//* empty css              */import"./index-CXU7o9CY.js";import"./Filter-CpekYgBC.js";import"./Results-BBVbNL2k.js";import"./useTranslation-CZbMeh78.js";import"./createLucideIcon-D_WcjKff.js";import"./proxy-Dg7W2VMC.js";import"./index-SDlHnhXR.js";import"./index-DNUR7M9R.js";import"./HtmlContent-CZmf3wHb.js";import"./sweetalert2.all-DJo0UVK6.js";import"./HomeSeccionBlog-B1gXNdAR.js";import"./navigation-B2UEjSS3.js";import"./classes-to-selector-DtC0LQ2m.js";import"./pagination-iC1L0vLA.js";import"./Strengths-CX6bGGPm.js";import"./CarruselBrands-Dk-UaKph.js";const re=({propiedades:l=[]})=>{var i;const[c,y]=a.useState(null),x=l.length>0&&l[0].latitude&&l[0].longitude?{lat:parseFloat(l[0].latitude),lng:parseFloat(l[0].longitude)}:{lat:-12.0464,lng:-77.0428},p={width:"100%",height:"100vh"},[C,b]=a.useState({}),L=(n,j)=>{b(h=>({...h,[n]:j}))};return e.jsxs("div",{className:"flex h-screen px-[5%]",children:[e.jsxs("div",{className:"w-2/3 overflow-y-auto bg-white property-list-container",children:[e.jsx("div",{className:"py-10 grid grid-cols-3 gap-6",children:l&&l.length>0?l.map(n=>e.jsx("div",{className:`transition-all duration-300 ${c===n.id?"shadow-lg ring-1 ring-secondary transform scale-[1.02]":""}`,onMouseEnter:()=>y(n.id),onMouseLeave:()=>y(null),"data-property-id":n.id,children:e.jsx(le,{propiedad:n,currentIndex:C[n.id]||0,onIndexChange:L})},n.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No hay propiedades disponibles en este momento."})})}),l&&l.length>0&&e.jsx("div",{className:"p-4 text-center  bg-white sticky bottom-0",children:e.jsx("button",{className:"w-full py-3 px-6 bg-secondary hover:bg-primary text-white rounded-lg font-medium transition-colors",children:"Ver más propiedades"})})]}),e.jsx("div",{className:"w-1/3 py-10 relative rounded-xl overflow-hidden",children:e.jsx(te,{googleMapsApiKey:((i=J)==null?void 0:i.GMAPS_API_KEY)||"",children:e.jsx(se,{mapContainerStyle:p,center:x,zoom:13,options:{zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},onLoad:()=>{},children:l.map(n=>{if(!n.latitude||!n.longitude)return null;const j=Math.floor(n.price_per_night||120),h=c===n.id,k={url:h?"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                    <svg width="80" height="40" viewBox="0 0 80 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="2" y="2" width="76" height="36" rx="18" fill="#1f2937" stroke="white" stroke-width="2"/>
                      <text x="40" y="26" text-anchor="middle" fill="white" font-size="14" font-weight="bold">S/${j}</text>
                    </svg>
                  `):"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                    <svg width="70" height="32" viewBox="0 0 70 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="1" y="1" width="68" height="30" rx="15" fill="white" stroke="#d1d5db" stroke-width="1"/>
                      <text x="35" y="21" text-anchor="middle" fill="#374151" font-size="12" font-weight="600">S/${j}</text>
                    </svg>
                  `)};return window.google&&window.google.maps&&window.google.maps.Size&&(k.scaledSize=h?new window.google.maps.Size(80,40):new window.google.maps.Size(70,32),k.anchor=h?new window.google.maps.Point(40,20):new window.google.maps.Point(35,16)),e.jsx(oe,{position:{lat:parseFloat(n.latitude),lng:parseFloat(n.longitude)},title:n.title||n.address,icon:k,onClick:()=>{const v=document.querySelector(`[data-property-id="${n.id}"]`);v&&v.scrollIntoView({behavior:"smooth",block:"center"})},onMouseOver:()=>y(n.id),onMouseOut:()=>y(null)},n.id)})})})})]})},ae=({isOpen:l,onClose:c,onApplyFilters:y,currentFilters:x={}})=>{const[p,C]=a.useState(x.instantBook?"reservacion":"estacionamiento"),[b,L]=a.useState(x.propertyType||"cualquier"),[i,n]=a.useState(x.services||["wifi","aire","televisor","cocina"]),[j,h]=a.useState(x.amenities||["lavadora","coworking"]),[k,v]=a.useState(x.characteristics||["piscina","estacionamiento"]),[S,N]=a.useState(x.featured?"favoritos":"luxe");if(K.useEffect(()=>{x&&(C(x.instantBook?"reservacion":"estacionamiento"),L(x.propertyType||"cualquier"),n(x.services||["wifi","aire","televisor","cocina"]),h(x.amenities||["lavadora","coworking"]),v(x.characteristics||["piscina","estacionamiento"]),N(x.featured?"favoritos":"luxe"))},[x]),!l)return null;const A=[{id:"reservacion",label:"Reservación inmediata",icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"estacionamiento",label:"Estacionamiento gratuito",icon:e.jsxs("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("path",{d:"M8 7h4a3 3 0 0 1 0 6h-4V7z"}),e.jsx("path",{d:"M8 13h3"})]}),selected:!1},{id:"lavadora",label:"Lavadora y secadora",icon:e.jsxs("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M8 3v3M16 3v3M8 18v3M16 18v3"})]}),selected:!1},{id:"llegada",label:"Llegada autónoma",icon:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),selected:!1}],$=[{id:"cualquier",label:"Cualquier tipo"},{id:"habitacion",label:"Habitación"},{id:"alojamiento",label:"Alojamiento entero"}],w=[{id:"wifi",label:"Wifi",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})}),selected:!0},{id:"aire",label:"Aire acondicionado",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),selected:!0},{id:"televisor",label:"Televisor",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),selected:!0},{id:"cocina",label:"Cocina",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),selected:!0},{id:"secadora",label:"Secadora",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!1},{id:"gimnasio",label:"Gimnasio",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077l1.41-.513m14.095-5.13l1.41-.513M5.106 17.785l1.15-.964m11.49-9.642l1.149-.964M7.501 19.795l.75-1.3m7.5-12.99l.75-1.3m-6.063 16.658l.26-1.477m2.605-14.772l.26-1.477m0 17.726l-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205L12 12"})}),selected:!0}],P=[{id:"lavadora",label:"Lavadora",icon:e.jsxs("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M8 3v3M16 3v3M8 18v3M16 18v3"})]}),selected:!0},{id:"calefaccion",label:"Calefacción",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!1},{id:"coworking",label:"Coworking",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m8 0H8m8 0v6a2 2 0 01-2 2H10a2 2 0 01-2-2V6m8 0H8"})}),selected:!0},{id:"secadora",label:"Secadora de...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!0},{id:"plancha",label:"Plancha",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),selected:!0}],H=[{id:"piscina",label:"Piscina",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),selected:!0},{id:"jacuzzi",label:"Jacuzzi",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18A2 2 0 0 1 23 12v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2z"})}),selected:!1},{id:"estacionamiento",label:"Estacionamiento...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"cargador",label:"Cargador de e...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!0},{id:"cuna",label:"Cuna para be...",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z"})}),selected:!0},{id:"cama",label:"Cama King",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),selected:!0},{id:"parrilla",label:"Parrilla",icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),selected:!0},{id:"desayuno",label:"Desayuno",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),selected:!1},{id:"apto",label:"Apto para fumador...",icon:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),selected:!1}],R=[{id:"favoritos",label:"Favoritos entre huéspedes",subtitle:"Los alojamientos más populares en Homlyink",icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),selected:!0},{id:"luxe",label:"Luxe",subtitle:"Alojamientos de lujo con un diseño único",icon:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),selected:!1}],T=t=>{n(g=>g.includes(t)?g.filter(f=>f!==t):[...g,t])},W=t=>{h(g=>g.includes(t)?g.filter(f=>f!==t):[...g,t])},I=t=>{v(g=>g.includes(t)?g.filter(f=>f!==t):[...g,t])},V=()=>{C("reservacion"),L("cualquier"),n([]),h([]),v([]),N("favoritos")},E=()=>{y({recommended:p,accommodationType:b,services:i,amenities:j,features:k,highlighted:S}),c()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",children:e.jsx("div",{className:"overflow-hidden rounded-xl",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filtros"}),e.jsx("button",{onClick:c,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recomendado para ti"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map(t=>e.jsxs("button",{onClick:()=>C(t.id),className:`p-3 border rounded-lg text-left transition-all ${p===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:t.icon}),e.jsx("div",{className:"text-sm font-medium text-blue-600",children:t.label})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tipo de alojamiento"}),e.jsx("div",{className:"flex space-x-2",children:$.map(t=>e.jsx("button",{onClick:()=>L(t.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${b===t.id?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.label},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Servicios"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Popular"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(t=>e.jsx("button",{onClick:()=>T(t.id),className:`p-3 border rounded-lg text-left transition-all ${i.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),i.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Comodidades"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:P.map(t=>e.jsx("button",{onClick:()=>W(t.id),className:`p-3 border rounded-lg text-left transition-all ${j.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),j.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Características"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:H.map(t=>e.jsx("button",{onClick:()=>I(t.id),className:`p-3 border rounded-lg text-left transition-all ${k.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.label})]}),k.includes(t.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Alojamientos destacados"}),e.jsx("div",{className:"space-y-3",children:R.map(t=>e.jsx("button",{onClick:()=>N(t.id),className:`w-full p-4 border rounded-lg text-left transition-all ${S===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.icon,e.jsx("span",{className:"font-medium text-blue-600",children:t.label})]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.subtitle})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${S===t.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:S===t.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},t.id))})]})]}),e.jsxs("div",{className:"flex space-x-3 p-4 border-t bg-gray-50",children:[e.jsx("button",{onClick:V,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Limpiar filtros"}),e.jsx("button",{onClick:E,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Mostrar alojamientos"})]})]})})})};function ne({propiedades:l,searchFilters:c={}}){const[y,x]=a.useState(c.location||"");a.useState("Fecha");const[p,C]=a.useState(""),[b,L]=a.useState([0,500]),[i,n]=a.useState("relevancia"),[j,h]=a.useState(!1),[k,v]=a.useState(!1),[S,N]=a.useState(!1),[A,$]=a.useState(!1),[w,P]=a.useState({priceRange:[0,500],guests:"",bedrooms:"",amenities:[],services:[],characteristics:[],propertyType:"",location:null,instantBook:!1,featured:!1}),[H,R]=a.useState(l||[]),[T,W]=a.useState({total:(l==null?void 0:l.length)||0}),[I,V]=a.useState(null),[E,t]=a.useState(null),g=async()=>{try{const o=await(await fetch("/api/properties/location-stats")).json();o.success&&o.center&&(V(o),t(o.center),console.log("🗺️ Mapa centrado en:",o.center.location,"con",o.center.count,"propiedades"))}catch(s){console.error("Error loading location stats:",s),t({lat:-12.046374,lng:-77.042793,location:"Lima, Perú",count:0})}};a.useEffect(()=>{if(g(),c){const s=(parseInt(c.adults)||0)+(parseInt(c.children)||0);s>0&&(C(s.toString()),P(o=>({...o,guests:s.toString()}))),(c.location||s>0)&&console.log("Filtros de búsqueda aplicados:",c)}},[c]),a.useEffect(()=>{l&&(R(l),W({total:l.length}))},[l]);const f=(s=w)=>{let o=l||[];y&&(o=o.filter(r=>[r.district||"",r.province||"",r.department||"",r.address||""].join(" ").toLowerCase().includes(y.toLowerCase())));const m=s.priceRange||b;(m[0]>0||m[1]<500)&&(o=o.filter(r=>{const M=parseFloat(r.price_per_night||0);return M>=m[0]&&M<=m[1]}));const d=s.guests||p;d&&(o=o.filter(r=>parseInt(r.max_guests||0)>=parseInt(d))),s.bedrooms&&(o=o.filter(r=>parseInt(r.bedrooms||0)>=parseInt(s.bedrooms)));const u=[...s.amenities||[],...s.services||[],...s.characteristics||[]];u.length>0&&(o=o.filter(r=>{const M=r.amenities||[];return u.some(_=>M.some(G=>G.toLowerCase().includes(_.toLowerCase())))})),s.propertyType&&s.propertyType!=="cualquier"&&(o=o.filter(r=>r.property_type&&r.property_type.toLowerCase().includes(s.propertyType.toLowerCase()))),s.instantBook&&(o=o.filter(r=>r.instant_book===!0)),s.featured&&(o=o.filter(r=>r.featured===!0)),s.location&&(o=o.filter(r=>!r.latitude||!r.longitude?!1:O(s.location.lat,s.location.lng,parseFloat(r.latitude),parseFloat(r.longitude))<=5)),o=q(o,i),R(o),W({total:o.length})},q=(s,o)=>{const m=[...s];switch(o){case"precio-menor":return m.sort((d,u)=>parseFloat(d.price_per_night||0)-parseFloat(u.price_per_night||0));case"precio-mayor":return m.sort((d,u)=>parseFloat(u.price_per_night||0)-parseFloat(d.price_per_night||0));case"fecha-reciente":return m.sort((d,u)=>new Date(u.created_at||0)-new Date(d.created_at||0));case"fecha-antigua":return m.sort((d,u)=>new Date(d.created_at||0)-new Date(u.created_at||0));case"rating":return m.sort((d,u)=>parseFloat(u.rating||0)-parseFloat(d.rating||0));case"huespedes":return m.sort((d,u)=>parseInt(u.max_guests||0)-parseInt(d.max_guests||0));default:return m.sort((d,u)=>d.featured&&!u.featured?-1:!d.featured&&u.featured?1:parseFloat(u.rating||0)-parseFloat(d.rating||0))}},O=(s,o,m,d)=>{const r=(m-s)*Math.PI/180,M=(d-o)*Math.PI/180,_=Math.sin(r/2)*Math.sin(r/2)+Math.cos(s*Math.PI/180)*Math.cos(m*Math.PI/180)*Math.sin(M/2)*Math.sin(M/2);return 6371*(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)))},U=s=>{x(s.target.value),setTimeout(()=>f(),300)},D=s=>{C(s),v(!1);const o={...w,guests:s};P(o),f(o)},B=(s,o)=>{L([s,o]),N(!1);const m={...w,priceRange:[s,o]};P(m),f(m)},z=s=>{n(s),h(!1),f()};return a.useEffect(()=>{l&&f()},[i]),a.useEffect(()=>{l&&(R(l),W({total:l.length}),c&&(c.location||c.adults||c.children)&&setTimeout(()=>{f()},100))},[l,c]),a.useEffect(()=>{const s=o=>{o.target.closest(".dropdown-container")||(h(!1),v(!1),N(!1))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Z,{}),e.jsx("div",{className:"bg-white sticky top-0 z-40",children:e.jsxs("div",{className:"mx-auto px-[5%] py-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:y,onChange:U,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-full leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"¿A dónde vas?"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{h(!j),v(!1),N(!1)},className:"px-4 py-2 border border-gray-300 rounded-full text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2",children:[i==="relevancia"?"Relevancia":i==="precio-menor"?"Precio: menor a mayor":i==="precio-mayor"?"Precio: mayor a menor":i==="fecha-reciente"?"Más recientes":i==="fecha-antigua"?"Más antiguos":i==="rating"?"Mejor valorados":i==="huespedes"?"Más huéspedes":"Ordenar",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&e.jsx("div",{className:"absolute top-full mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:()=>z("relevancia"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="relevancia"?"bg-blue-50 text-blue-700":""}`,children:"Relevancia"}),e.jsx("button",{onClick:()=>z("precio-menor"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="precio-menor"?"bg-blue-50 text-blue-700":""}`,children:"Precio: menor a mayor"}),e.jsx("button",{onClick:()=>z("precio-mayor"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="precio-mayor"?"bg-blue-50 text-blue-700":""}`,children:"Precio: mayor a menor"}),e.jsx("button",{onClick:()=>z("fecha-reciente"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="fecha-reciente"?"bg-blue-50 text-blue-700":""}`,children:"Más recientes"}),e.jsx("button",{onClick:()=>z("fecha-antigua"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="fecha-antigua"?"bg-blue-50 text-blue-700":""}`,children:"Más antiguos"}),e.jsx("button",{onClick:()=>z("rating"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="rating"?"bg-blue-50 text-blue-700":""}`,children:"Mejor valorados"}),e.jsx("button",{onClick:()=>z("huespedes"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${i==="huespedes"?"bg-blue-50 text-blue-700":""}`,children:"Más huéspedes"})]})})]}),e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{v(!k),h(!1),N(!1)},className:`px-4 py-2 border rounded-full text-sm font-medium ${p?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700"} hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2`,children:[p?`${p} huéspedes`:"Huéspedes",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),k&&e.jsx("div",{className:"absolute top-full mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[[1,2,3,4,5,6,7,8].map(s=>e.jsxs("button",{onClick:()=>D(s.toString()),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${p===s.toString()?"bg-blue-50 text-blue-700":""}`,children:[s," huésped",s>1?"es":""]},s)),e.jsx("button",{onClick:()=>D("8+"),className:`w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 ${p==="8+"?"bg-blue-50 text-blue-700":""}`,children:"8+ huéspedes"}),p&&e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsx("button",{onClick:()=>D(""),className:"w-full text-left px-3 py-2 rounded-md text-sm text-red-600 hover:bg-red-50",children:"Limpiar"})})]})})]}),e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>{N(!S),h(!1),v(!1)},className:`px-4 py-2 border rounded-full text-sm font-medium ${b[0]>0||b[1]<500?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700"} hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2`,children:[b[0]>0||b[1]<500?`S/ ${b[0]} - S/ ${b[1]}`:"Rango de precio",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),S&&e.jsx("div",{className:"absolute top-full mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Rango de precio por noche"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>B(0,50),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 0 - S/ 50"}),e.jsx("button",{onClick:()=>B(50,100),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 50 - S/ 100"}),e.jsx("button",{onClick:()=>B(100,200),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 100 - S/ 200"}),e.jsx("button",{onClick:()=>B(200,300),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 200 - S/ 300"}),e.jsx("button",{onClick:()=>B(300,500),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 300 - S/ 500"}),e.jsx("button",{onClick:()=>B(500,1e3),className:"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100",children:"S/ 500+"}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsx("button",{onClick:()=>B(0,500),className:"w-full text-left px-3 py-2 rounded-md text-sm text-red-600 hover:bg-red-50",children:"Limpiar rango"})})]})]})})]}),e.jsx("button",{onClick:()=>{$(!0)},className:"p-2 border border-gray-300 rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-lg text-gray-600",children:[T.total," propiedades encontradas"]})})]})}),e.jsx(ae,{isOpen:A,onClose:()=>$(!1),onApplyFilters:s=>{console.log("Modal filters received:",s);const o={...w,instantBook:s.recommended==="reservacion",featured:s.highlighted==="favoritos",propertyType:s.accommodationType==="cualquier"?"":s.accommodationType,services:s.services||[],amenities:s.amenities||[],characteristics:s.features||[],priceRange:w.priceRange,guests:w.guests,bedrooms:w.bedrooms,location:w.location};console.log("Applied filters:",o),P(o),f(o)},currentFilters:w}),e.jsx(re,{propiedades:H,center:E,locationStats:I}),e.jsx(F,{})]})}Y((l,c)=>{Q(l).render(e.jsx(ee,{children:e.jsx(X,{...c,children:e.jsx(ne,{...c})})}))});
