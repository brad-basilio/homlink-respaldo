import{j as e}from"./RequirementCard-DEdD30eg.js";import{r}from"./index-RYns6xqu.js";import{c as K}from"./ReactAppend-vpV7VTGG.js";import{C as Q,e as V,s as X,R as k,S as Y,D as Z,l as ee,h as x,j as B,ap as se,al as ie}from"./CreateReactScript-C-mUikVe.js";import{r as te}from"./DxBox-DZgBbgD6.js";import"./sweetalert2.all-DJo0UVK6.js";import{L as ae}from"./Filter-BDLE8FWR.js";import"./DataGrid-Cd7cnf9r.js";import"./index-CXU7o9CY.js";import"./TippyButton-Duhaw_sS.js";import"./MenuItem-CBKDeUjr.js";import"./axios-B4uVmeYG.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./Results-CoLI09XT.js";import"./TinyMCEFormGroup-TcwoFScW.js";import"./index-DNUR7M9R.js";import"./Detail-BKcVR7Sx.js";import"./index-SDlHnhXR.js";import"./HomeSeccionBlog-CZ04iwe8.js";import"./CarruselBrands-Chpi1Apc.js";import"./Strengths-8rnVxSkq.js";import"./ModalAppointment-BjEduSb5.js";import"./CallToAction-3RvJBMpr.js";import"./WeCupSection-CkKcxXUy.js";import"./BlurText-Cr9yZ_QA.js";import"./Supplies-DJwkpyzw.js";import"./Banner-CXqQ-nCn.js";import"./HeroSecctionEmpresa-Bs7Po8J9.js";import"./WhatsAppModal-BCTi89gL.js";const E=new se,T=({feature:u,index:l,onUpdate:g,onRemove:v,type:o,canRemove:j,characteristics:N,benefits:R,addCharacteristic:w,addBenefit:y,addStep:C,steps:S})=>{const b=(c,p)=>{g(l,c,p)},q=c=>{g(l,"image",c)},_=()=>{switch(o){case"characteristic":return"fas fa-check-circle text-success";case"benefit":return"fas fa-star text-warning";case"step":return"fas fa-arrow-right text-primary";default:return"fas fa-circle"}},d=()=>{switch(o){case"characteristic":return"Característica";case"benefit":return"Beneficio";case"step":return"Paso";default:return"Item"}};return e.jsxs("div",{className:"card border shadow-sm h-100",children:[e.jsx("div",{className:"card-header bg-transparent border-bottom-0 pb-0",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:_()+" me-2"}),d()," ",l+1]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger rounded-circle d-flex align-items-center justify-content-center",onClick:()=>v(l),disabled:!j,title:"Eliminar",style:{width:"30px",height:"30px"},children:e.jsx("i",{className:"fas fa-times"})})]})}),e.jsx("div",{className:"card-body pt-2",children:o==="characteristic"?e.jsx("div",{className:"mb-3",children:e.jsx(x,{label:"Título de la característica",value:u.title,onChange:c=>b("title",c.target.value),placeholder:"Ingresa el título..."})}):e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-8 mb-3",children:[e.jsx(x,{label:"Título",value:u.title,onChange:c=>b("title",c.target.value),placeholder:"Ingresa el título..."}),e.jsx("label",{className:"form-label fw-semibold",children:"Descripción"}),e.jsx("textarea",{className:"form-control",rows:3,value:u.description,onChange:c=>b("description",c.target.value),placeholder:"Describe brevemente..."})]}),e.jsx("div",{className:"col-lg-3",children:e.jsx(ie,{label:"Imagen",currentImage:u.image,onChange:q,aspect:1})})]})}),e.jsx("div",{className:"card-footer bg-transparent border-top-0 pt-0",children:o==="characteristic"&&l===N.length-1||o==="benefit"&&l===R.length-1||o==="step"&&l===S.length-1?e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary w-100",onClick:o==="characteristic"?w:o==="benefit"?y:C,children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar ",d()]}):null})]})},re=({brands:u})=>{const l=r.useRef(),g=r.useRef(),v=r.useRef(),o=r.useRef(),j=r.useRef(),N=r.useRef(),R=r.useRef(),w=r.useRef(),y=r.useRef(),C=r.useRef(),S=r.useRef(),b=r.useRef(),[q,_]=r.useState(!1),[d,c]=r.useState([{title:""}]),[p,D]=r.useState([{title:"",description:"",image:void 0}]),[h,I]=r.useState([{title:"",description:"",image:void 0}]),F=()=>{c([...d,{title:""}])},G=r.useCallback((s,i,t)=>{c(f=>{const n=[...f];return n[s]={...n[s],[i]:t},n})},[]),M=s=>{d.length<=1||c(d.filter((i,t)=>t!==s))},P=()=>{D([...p,{title:"",description:"",image:void 0}])},z=r.useCallback((s,i,t)=>{D(f=>{const n=[...f];return n[s]={...n[s],[i]:t},n})},[]),A=s=>{p.length<=1||D(p.filter((i,t)=>t!==s))},L=()=>{I([...h,{title:"",description:"",image:void 0}])},U=r.useCallback((s,i,t)=>{I(f=>{const n=[...f];return n[s]={...n[s],[i]:t},n})},[]),O=s=>{h.length<=1||I(h.filter((i,t)=>t!==s))},W=s=>{s!=null&&s.id?_(!0):_(!1),v.current.value=(s==null?void 0:s.id)??"",o.current.value=(s==null?void 0:s.name)??"",j.current.value=(s==null?void 0:s.title)??"",N.current.value=(s==null?void 0:s.description)??"",R.current.value=(s==null?void 0:s.title_approach)??"",w.current.value=(s==null?void 0:s.description_approach)??"",y.current.value=(s==null?void 0:s.title_methodology)??"",C.current.value=(s==null?void 0:s.description_methodology)??"",S.image.src=`/api/service/media/${(s==null?void 0:s.image)??"undefined"}`,b.image.src=`/api/service/media/${(s==null?void 0:s.image_banner)??"undefined"}`,s!=null&&s.characteristics_approach&&c(s.characteristics_approach.map(i=>({title:i.title}))),s!=null&&s.benefits&&D(s.benefits.map(i=>({title:i.title,description:i.description,image:i.image}))),s!=null&&s.steps_methodology&&I(s.steps_methodology.map(i=>({title:i.title,description:i.description,image:i.image}))),$(g.current).modal("show")},H=async s=>{s.preventDefault();const i=new FormData,t={id:v.current.value||void 0,name:o.current.value,title:j.current.value,description:N.current.value,title_approach:R.current.value,description_approach:w.current.value,title_methodology:y.current.value,description_methodology:C.current.value};for(const a in t)i.append(a,t[a]);const f=S.current.files[0];f&&i.append("image",f);const n=b.current.files[0];n&&i.append("image_banner",n),d.forEach((a,m)=>{i.append(`characteristics[${m}][title]`,a.title)}),p.forEach((a,m)=>{i.append(`benefits[${m}][title]`,a.title),i.append(`benefits[${m}][description]`,a.description),a.image&&(a.image.file?i.append(`benefits[${m}][image]`,a.image.file):typeof a.image=="string"&&i.append(`benefits[${m}][existing_image]`,a.image))}),h.forEach((a,m)=>{i.append(`steps[${m}][title]`,a.title),i.append(`steps[${m}][description]`,a.description),a.image&&(a.image.file?i.append(`steps[${m}][image]`,a.image.file):typeof a.image=="string"&&i.append(`steps[${m}][existing_image]`,a.image))}),await E.save(i)&&($(l.current).dxDataGrid("instance").refresh(),$(g.current).modal("hide"))},J=async({id:s,field:i,value:t})=>{await E.boolean({id:s,field:i,value:t})&&$(l.current).dxDataGrid("instance").refresh()};return e.jsxs(e.Fragment,{children:[e.jsx(X,{gridRef:l,title:"Servicios",rest:E,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(l.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre del servicio",width:"200px"},{dataField:"title",caption:"Título",width:"200px"},{dataField:"description",caption:"Descripción",cellTemplate:(s,{data:i})=>{s.html(te(e.jsx("div",{className:"text-truncate",style:{maxWidth:"300px"},children:i.description})))}},{dataField:"image",caption:"Imagen",width:"100px",cellTemplate:(s,{data:i})=>{k(s,e.jsx("img",{src:`/api/service/media/${i.image}`,style:{width:"80px",height:"45px",objectFit:"cover",borderRadius:"4px"},onError:t=>t.target.src="/images/default-thumbnail.jpg"}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:i})=>{k(s,e.jsx(Y,{checked:i.featured,onChange:t=>J({id:i.id,field:"featured",value:t.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:i})=>{s.append(Z({className:"btn btn-xs btn-soft-primary me-1",title:"Editar",icon:"fa fa-pen",onClick:()=>W(i)}))}}]}),e.jsxs(ee,{modalRef:g,title:q?"Editar Servicio":"Nuevo Servicio",onSubmit:H,size:"xl",children:[e.jsx("input",{ref:v,type:"hidden"}),e.jsxs("ul",{className:"nav nav-tabs nav-justified",id:"serviceModalTabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-tab","data-bs-toggle":"tab","data-bs-target":"#basic-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Información Básica"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"benefits-tab","data-bs-toggle":"tab","data-bs-target":"#benefits-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-star me-1"}),"Beneficios"]})})]}),e.jsxs("div",{className:"tab-content mt-3",id:"serviceModalTabsContent",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-tab-pane",role:"tabpanel","aria-labelledby":"basic-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información General del Servicio"]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-bold text-muted mb-3",children:"Datos Principales"}),e.jsx(x,{eRef:o,label:"Nombre del servicio",required:!0}),e.jsx(x,{eRef:j,label:"Título del servicio",required:!0}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción del servicio"}),e.jsx("textarea",{ref:N,className:"form-control",rows:4,placeholder:"Describe brevemente el servicio...",required:!0})]})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-bold text-muted mb-3",children:"Imágenes del Servicio"}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"mb-3 ",children:[e.jsx(B,{eRef:S,label:"Imagen principal",aspect:1}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Imagen que representa el servicio"]})]})})]})})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"approach-tab-pane",role:"tabpanel","aria-labelledby":"approach-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-bullseye me-2"}),"Enfoque del Servicio"]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-lg-8",children:[e.jsx(x,{eRef:R,label:"Título del enfoque",required:!0}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción del enfoque"}),e.jsx("textarea",{ref:w,className:"form-control",rows:6,placeholder:"Explica el enfoque del servicio...",required:!0})]})]}),e.jsx("div",{className:" col-lg-4",children:e.jsx(B,{eRef:b,label:"Imagen del enfoque al servicio",aspect:4/3})})]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-list-check me-2"}),"Características del Enfoque"]}),e.jsx("div",{className:"row",children:d.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(T,{feature:s,index:i,onUpdate:G,onRemove:M,canRemove:d.length>1,type:"characteristic",characteristics:d,addCharacteristic:F})},`char-${i}`))})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"methodology-tab-pane",role:"tabpanel","aria-labelledby":"methodology-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-tasks me-2"}),"Metodología del Servicio"]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-lg-12",children:e.jsx(x,{eRef:y,label:"Título de metodología",required:!0})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción de metodología"}),e.jsx("textarea",{ref:C,className:"form-control",rows:4,placeholder:"Describe la metodología utilizada...",required:!0})]})})]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-route me-2"}),"Pasos de la Metodología"]}),e.jsx("div",{className:"row",children:h.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("span",{className:"badge bg-primary position-absolute",style:{top:"-5px",left:"-5px",zIndex:10},children:i+1}),e.jsx(T,{feature:s,index:i,onUpdate:U,onRemove:O,canRemove:h.length>1,type:"step",addStep:L,steps:h})]})},`step-${i}`))})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"benefits-tab-pane",role:"tabpanel","aria-labelledby":"benefits-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-star me-2"}),"Beneficios del Servicio"]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-thumbs-up me-2"}),"Lista de Beneficios"]}),e.jsx("div",{className:"row",children:p.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(T,{feature:s,index:i,onUpdate:z,onRemove:A,canRemove:p.length>1,type:"benefit",benefits:p,addBenefit:P})},`benefit-${i}`))})]})]})})})]})]})]})};Q((u,l)=>{K(u).render(e.jsx(ae,{children:e.jsx(V,{...l,title:"Servicios",children:e.jsx(re,{...l})})}))});
