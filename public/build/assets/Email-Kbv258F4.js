var x=Object.defineProperty;var p=(a,t,e)=>t in a?x(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var f=(a,t,e)=>(p(a,typeof t!="symbol"?t+"":t,e),e);import{j as r}from"./RequirementCard-DEdD30eg.js";import{r as m}from"./index-RYns6xqu.js";import{S as b}from"./sweetalert2.all-DJo0UVK6.js";import{B as h}from"./Results-BBVbNL2k.js";import{m as j}from"./main-Y8JAyXgE.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";class g extends h{constructor(){super(...arguments);f(this,"path","user-formulas")}}const v=new g,F=({test:a,setTest:t,session:e})=>{const i=m.useRef(),[s,o]=m.useState(!1),n=async l=>{var d,c;if((d=l==null?void 0:l.preventDefault)==null||d.call(l),s)return;if(!((c=i.current.value)==null?void 0:c.trim()))return b.fire({icon:"error",title:"Oops...",text:"Por favor, ingresa tu correo electrónico"});o(!0);const u=await v.save({...a,email:i.current.value});o(!1),u&&(j.Local.delete("test"),location.href=`/test/result/${u.data.id}`,t({}))};return m.useEffect(()=>{e&&n({target:{value:e==null?void 0:e.email}})},[null]),r.jsx("section",{className:"p-[5%] py-[15%] md:py-[10%] lg:py-[5%] bg-white text-center text-[#404040]",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsxs("h1",{className:"text-2xl mb-4",children:["¡Por último, para enviárte tu fórmula ",r.jsx("br",{})," personalizada déjanos ",r.jsx("b",{className:"font-bold text-[#303030]",children:"tu correo!"})]}),r.jsx("p",{className:"mb-4",children:"y entérate de nuestras novedades"}),r.jsxs("form",{className:"relative",onSubmit:n,children:[r.jsx("input",{ref:i,className:"border text-center border-[#9577B9] text-[#9577B9] bg-white text-sm rounded-full w-full px-5 py-2.5 outline-none",type:"email",placeholder:"ESCRIBE AQUÍ",defaultValue:e==null?void 0:e.email,required:!0,disabled:s}),r.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 right-3 w-6 h-6 bg-[#A191B8] text-white font-bold rounded-full",type:"submit",disabled:s,children:r.jsx("i",{className:`mdi ${s?"mdi-loading mdi-spin":"mdi-arrow-right"}`})})]})]})})};export{F as default};
