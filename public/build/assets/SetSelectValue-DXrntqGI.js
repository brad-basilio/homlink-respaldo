import{j as o}from"./RequirementCard-DEdD30eg.js";import{i as y}from"./tippy-react.esm-DYFqe69e.js";import{r as f}from"./index-RYns6xqu.js";import{m as x}from"./main-Y8JAyXgE.js";const C=({id:e,col:n,label:a,specification:c,eRef:t,required:m=!1,dropdownParent:s,searchAPI:j,searchBy:l,multiple:g=!1,filter:i=null,onChange:d=()=>{},templateResult:h,templateSelection:E,tags:N})=>(t||(t=f.useRef()),e||(e=`select-${crypto.randomUUID()}`),f.useEffect(()=>{$(t.current).select2({dropdownParent:s,minimumInputLength:0,tags:N,ajax:{url:j,headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(x.Cookies.get("XSRF-TOKEN"))},type:"POST",quietMillis:50,data:function({term:r,page:p}){return x.JSON.stringify({sort:[{selector:l,desc:!1}],skip:((p??1)-1)*10,take:10,filter:i?[[l,"contains",r||""],"and",i]:[l,"contains",r||""]})},processResults:function(r,{page:p}){return{results:((r==null?void 0:r.data)??[]).map(u=>{const S=x.JSON.flatten(u);return{id:u.id,text:S[l],data:u}}),pagination:{more:(p??1)*10<r.totalCount}}}},templateResult:h,templateSelection:E})},[s,i]),f.useEffect(()=>{$(t.current).on("change",d)},[i]),o.jsxs("div",{className:`form-group ${n} mb-2`,children:[o.jsx("label",{htmlFor:e,className:"form-label mb-1",children:a&&o.jsxs(o.Fragment,{children:[a," ",m&&o.jsx("b",{className:"text-danger",children:"*"}),c&&o.jsx(y,{content:c,children:o.jsx("small",{className:"ms-1 fa fa-question-circle text-muted"})})]})}),o.jsx("select",{ref:t,id:e,required:m,className:"form-control",style:{width:"100%"},multiple:g})]})),F=(e,n,a,c)=>{if($(e).empty(),!!n){if(Array.isArray(n))n.forEach(({[a]:t,[c]:m})=>{const s=document.createElement("option");s.value=t,s.text=m,s.selected=!0,$(e).append(s)});else{const t=document.createElement("option");t.value=n,t.text=a??n,$(e).append(t),$(e).val(n)}$(e).trigger("change")}};export{C as S,F as a};
