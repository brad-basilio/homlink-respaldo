var v=Object.defineProperty;var N=(t,o,l)=>o in t?v(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l;var b=(t,o,l)=>(N(t,typeof o!="symbol"?o+"":o,l),l);import{j as e}from"./FileViewer-CpM0iYLI.js";import{r as n}from"./index-B80Lgev0.js";import{B as w}from"./Results-B9dLaNz0.js";import{S as y}from"./sweetalert2.all-Dh0rZL5X.js";import"./ModalAppointment-D7vfeYVN.js";import{u as C}from"./useTranslation-BvL_iu_4.js";import{C as E}from"./chevron-down-CyYB_9vX.js";class R extends w{constructor(){super(...arguments);b(this,"path","messages")}}const S=new R,k=({onPhoneChange:t})=>{const[o,l]=n.useState([]),[r,c]=n.useState(null),[u,f]=n.useState(""),[m,d]=n.useState(!1),p=n.useRef(null);n.useEffect(()=>{(async()=>{try{const x=await(await fetch("/assets/data/countries_phone.json")).json();l(x);const j=x.find(g=>g.iso2==="PE");c(j||x[0])}catch(i){console.error("Error loading countries:",i)}})()},[]),n.useEffect(()=>{const s=i=>{p.current&&!p.current.contains(i.target)&&d(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const a=s=>{const i=s.target.value.replace(/\D/g,"");if(f(i),r){const x=`+${r.phoneCode.replace(/\D/g,"")}${i}`;t(x)}},h=s=>{c(s),d(!1)};return e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Teléfono*"}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-500",children:[e.jsxs("div",{className:"relative",ref:p,children:[e.jsxs("button",{type:"button",className:"flex items-center justify-between px-3 py-2 h-full border-r border-gray-300 bg-gray-50 rounded-l-md w-20",onClick:()=>d(!m),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`fi fi-${r==null?void 0:r.iso2.toLowerCase()} mr-2`}),e.jsx("span",{children:r==null?void 0:r.iso2})]}),e.jsx(E,{className:`h-4 w-4 transition-transform ${m?"rotate-180":""}`})]}),m&&e.jsx("div",{className:"absolute z-10 mt-1 w-64 bg-white shadow-lg rounded-md py-1 max-h-60 overflow-auto border border-gray-200",children:o.map(s=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>h(s),children:[e.jsx("span",{className:`fi fi-${s.iso2.toLowerCase()} mr-3`}),e.jsx("span",{className:"flex-1",children:s.nameES}),e.jsxs("span",{className:"text-gray-500",children:["+",s.phoneCode]})]},s.iso2))})]}),e.jsx("input",{type:"tel",value:u,onChange:a,placeholder:"Ej: 987654321",className:"flex-1 px-4 py-2 focus:outline-none rounded-r-md",pattern:"[0-9]*"})]}),u&&r&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Número completo: +",r.phoneCode," ",u]})]})},T=({})=>{const[t,o]=n.useState({phone:""}),l=n.useRef(),r=n.useRef(),c=n.useRef(),u=n.useRef(),f=n.useRef(),[m,d]=n.useState(!1),p=async h=>{h.preventDefault(),d(!0);const s={name:l.current.value+" "+r.current.value,email:c.current.value,subject:t.phone,description:f.current.value},i=await S.save(s);d(!1),window.location.href="/thanks",i&&(y.fire({icon:"success",title:"Mensaje enviado",text:"Tu mensaje ha sido enviado correctamente. ¡Nos pondremos en contacto contigo pronto!",showConfirmButton:!1,timer:3e3}),l.current.value=null,r.current.value=null,c.current.value=null,u.current.value=null,f.current.value=null,o({phone:""}))},{t:a}=C();return e.jsxs("form",{className:"flex flex-col gap-y-6",onSubmit:p,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium  mb-1",children:a("public.form.name","Nombre")}),e.jsx("input",{ref:l,type:"text",id:"nombre",placeholder:a("public.form.name","Nombre"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apellido-materno",className:"block text-sm font-medium  mb-1",children:a("public.form.lastname","Apelldios")}),e.jsx("input",{ref:r,type:"text",id:"apellido-materno",placeholder:a("public.form.lastname","Apelldios"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium  mb-1",children:a("public.form.email","E-mail")}),e.jsx("input",{ref:c,type:"email",id:"email",placeholder:a("public.form.email","E-mail"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{children:e.jsx(k,{onPhoneChange:h=>o({...t,phone:h})})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium  mb-1",children:a("public.form.message","Escribe un mensaje")}),e.jsx("textarea",{ref:f,id:"mensaje",rows:6,placeholder:a("public.form.message","Escribe un mensaje"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"privacidad",type:"checkbox",className:"h-4 w-4 text-azul border-gray-300 rounded focus:ring-azul/50"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("label",{htmlFor:"privacidad",className:"",children:a("public.form.privacy","Usted acepta nuestra amigable política de privacidad.")})})]}),e.jsxs("button",{disabled:m,type:"submit",className:" mt-5 bg-[#224483] font-semibold w-8/12 lg:w-3/6 text-white py-1 pl-1 pr-3  gap-2 rounded-full flex items-center lg:h-14",children:[e.jsx("div",{className:"bg-[#EFF0F1] w-12 p-2 rounded-full",children:e.jsx("img",{src:"/assets/img/icons/send.png",className:" h-auto"})}),m?e.jsxs("p",{children:[" ",a("public.btn.sending","Enviando formulario...")]}):e.jsx("p",{className:"ml-4",children:a("public.btn.send_form","Enviar formulario")})]})]})};export{T as C};
