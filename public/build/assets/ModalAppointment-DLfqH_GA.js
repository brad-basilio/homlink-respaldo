import{j as e}from"./RequirementCard-CpM0iYLI.js";import{r as l}from"./index-B80Lgev0.js";import{S as y}from"./sweetalert2.all-Dh0rZL5X.js";import"./ModalAppointment-BlXPYe-O.js";import{A as C}from"./AppointmentsRest-uOBo3G3_.js";import{u as v}from"./useTranslation-eU9E4S-_.js";import{T as R}from"./TextWithHighlight-DAk9q59f.js";import{X as E}from"./Header-9MB80LHj.js";import{C as z}from"./chevron-down-CyYB_9vX.js";const F=new C,S=({onPhoneChange:h})=>{const[b,g]=l.useState([]),[a,d]=l.useState(null),[m,u]=l.useState(""),[t,n]=l.useState(!1),i=l.useRef(null);l.useEffect(()=>{(async()=>{try{const c=await(await fetch("/assets/data/countries_phone.json")).json();g(c);const s=c.find(x=>x.iso2==="PE");d(s||c[0])}catch(o){console.error("Error loading countries:",o)}})()},[]),l.useEffect(()=>{const r=o=>{i.current&&!i.current.contains(o.target)&&n(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const p=r=>{const o=r.target.value.replace(/\D/g,"");if(u(o),a){const c=`+${a.phoneCode.replace(/\D/g,"")}${o}`;h(c)}},j=r=>{d(r),n(!1)},{t:f}=v();return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("label",{className:"block text-sm  mb-1",children:[f("public.form.phone","Número de teléfono"),"*"]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-azul",children:[e.jsxs("div",{className:"relative",ref:i,children:[e.jsxs("button",{type:"button",className:"flex items-center justify-between px-3 py-2 h-full border-r border-gray-300 bg-gray-50 rounded-l-md w-20",onClick:()=>n(!t),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`fi fi-${a==null?void 0:a.iso2.toLowerCase()} mr-2`}),e.jsx("span",{children:a==null?void 0:a.iso2})]}),e.jsx(z,{className:`h-4 w-4 transition-transform ${t?"rotate-180":""}`})]}),t&&e.jsx("div",{className:"absolute z-10 mt-1 w-64 bg-white shadow-lg rounded-md py-1 max-h-60 overflow-auto border border-gray-200",children:b.map(r=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>j(r),children:[e.jsx("span",{className:`fi fi-${r.iso2.toLowerCase()} mr-3`}),e.jsx("span",{className:"flex-1",children:r.nameES}),e.jsxs("span",{className:"text-gray-500",children:["+",r.phoneCode]})]},r.iso2))})]}),e.jsx("input",{required:!0,type:"tel",value:m,onChange:p,placeholder:"Ej: 987654321",className:"flex-1 px-4 py-2 focus:outline-none rounded-r-md",pattern:"[0-9]*"})]}),m&&a&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Número completo: +",a.phoneCode," ",m]})]})};function T({isOpen:h,onClose:b,randomImage:g,linkWhatsApp:a}){const[d,m]=l.useState({phone:""}),u=l.useRef(),t=l.useRef(),n=l.useRef(),i=l.useRef(),p=l.useRef(),j=l.useRef(),f=l.useRef(),[r,o]=l.useState(!1),c=async x=>{x.preventDefault(),o(!0);const N={name:u.current.value,lastname_father:t.current.value,lastname_mother:n.current.value,document:i.current.value,email:p.current.value,number:d.phone,description:f.current.value},w=await F.save(N);o(!1),w&&(y.fire({icon:"success",title:"Mensaje enviado",text:"Tu mensaje ha sido enviado correctamente. ¡Nos pondremos en contacto contigo pronto!",showConfirmButton:!1,timer:3e3}),u.current.value=null,t.current.value=null,n.current.value=null,i.current.value=null,p.current.value=null,j.current.value=null,f.current.value=null,m({phone:""}))};if(!h)return null;const{t:s}=v();return e.jsx("div",{className:"fixed inset-0 px-[5%] lg:px-0 z-50 flex items-center justify-center py-10  bg-black bg-opacity-50 overflow-y-auto scrollbar-hide",children:e.jsxs("div",{className:"relative  w-full mt-[1000px] lg:mt-[500px] max-w-5xl bg-white rounded-3xl shadow-3xl overflow-hidden flex flex-col md:flex-row",children:[e.jsx("button",{onClick:b,className:"absolute top-8 lg:top-4 right-4 bg-gray-100 rounded-full p-1 z-10","aria-label":"Cerrar",children:e.jsx(E,{className:"h-5 w-5 text-azul"})}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8",children:[e.jsx("h2",{className:"text-[40px]  mb-6 max-w-[15rem] leading-10",children:e.jsx(R,{text:s("public.form.form_cita"," Reservar una *cita* ahora")})}),e.jsxs("form",{className:"flex flex-col gap-y-6",onSubmit:c,children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"nombre",className:"block text-sm   mb-1",children:[s("public.form.name","Nombre"),"*"]}),e.jsx("input",{ref:u,required:!0,type:"text",id:"nombre",placeholder:s("public.form.name","Nombre"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-azul"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"apellido-paterno",className:"block text-sm   mb-1",children:[s("public.form.lastname_father","Apellido paterno"),"*"]}),e.jsx("input",{ref:t,required:!0,type:"text",id:"apellido-paterno",placeholder:s("public.form.lastname_father","Apellido paterno"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-azul"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"apellido-materno",className:"block text-sm   mb-1",children:[s("public.form.lastname_mother","Apellido materno"),"*"]}),e.jsx("input",{ref:n,required:!0,type:"text",id:"apellido-materno",placeholder:s("public.form.lastname_mother","Apellido materno"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-azul"})]})]}),e.jsx("div",{children:e.jsx(S,{onPhoneChange:x=>m({...d,phone:x})})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"document",className:"block text-sm   mb-1",children:s("public.form.dni"," DNI o CE")}),e.jsx("input",{ref:i,type:"text",id:"document",placeholder:s("public.form.dni"," DNI o CE"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-azul"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm   mb-1",children:s("public.form.email"," Correo electrónico")}),e.jsx("input",{required:!0,ref:p,type:"email",id:"email",placeholder:s("public.form.email","Correo electrónico"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-azul"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mensaje",className:"block text-sm   mb-1",children:s("public.form.message","Escribe un mensaje")}),e.jsx("textarea",{required:!0,ref:f,id:"mensaje",rows:6,placeholder:s("public.form.message","Escribe un mensaje"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-azul"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"privacidad",type:"checkbox",className:"h-4 w-4 text-azul border-gray-300 rounded focus:ring-azul/50"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("label",{htmlFor:"privacidad",className:"",children:s("public.form.privacy"," Usted acepta nuestra amigable política de privacidad.")})})]}),e.jsxs("button",{disabled:r,type:"submit",className:" mt-5 bg-[#224483] font-semibold w-max text-white py-1 pl-1 pr-3  gap-2 rounded-full flex items-center lg:h-14",children:[e.jsx("div",{className:"bg-[#EFF0F1] w-12 p-2 rounded-full",children:e.jsx("img",{src:"/assets/img/icons/send.png",className:" h-auto"})}),r?e.jsx("p",{children:s("public.btn.sending"," Enviando formulario...")}):e.jsx("p",{className:"ml-4",children:s("public.btn.send_form","Enviar formulario")})]})]}),e.jsxs("div",{className:"mt-6 bg-[#F2F4F8] p-4 rounded-3xl flex items-center",children:[e.jsx("div",{className:"bg-green-500 text-white p-2 rounded-full mr-3 flex-shrink-0",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),e.jsx("div",{children:e.jsxs("p",{className:"text-[#242424] text-base",children:[s("public.form.whatsapp","¿Tienes dudas sobre como agendar?"),e.jsx("br",{}),e.jsx("a",{href:a==null?void 0:a.link,target:"_blank",rel:"noopener noreferrer",className:"text-azul cursor-pointer",children:s("public.form.link_whatsapp","Chatea con nosotros por WhatsApp")})]})})]})]}),e.jsx("div",{className:"block lg:w-1/2 bg-gray-100",children:e.jsx("img",{src:`/api/service/media/${g.image}`,alt:"Fisioterapeuta con paciente",className:"w-full h-80 lg:h-full object-cover"})})]})})}export{T as M};
