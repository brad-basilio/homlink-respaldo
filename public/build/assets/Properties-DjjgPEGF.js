var qe=Object.defineProperty;var He=(d,l,g)=>l in d?qe(d,l,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[l]=g;var de=(d,l,g)=>(He(d,typeof l!="symbol"?l+"":l,g),g);import{j as e}from"./RequirementCard-DEdD30eg.js";import{r as c}from"./index-RYns6xqu.js";import{c as Le}from"./ReactAppend-vpV7VTGG.js";import{B as Ve}from"./Base-elrL0iSu.js";import{T as ze}from"./Table-BTG--uQT.js";import{M as Je}from"./Modal-IE2ysmSM.js";import{I as v}from"./InputFormGroup-B7mKwzkx.js";import{I as Ke}from"./ImageFormGroup-Csvj9Cte.js";import{S as ne}from"./SelectFormGroup-CVn9r_7Q.js";import{C as Qe}from"./CreateReactScript-BuKYEKxn.js";import{R as S}from"./ReactAppend-DPXaoPQG.js";import{B as We}from"./Results-BBVbNL2k.js";import{S as ee}from"./sweetalert2.all-DJo0UVK6.js";import{r as Xe}from"./DxBox-DZgBbgD6.js";import"./index-CXU7o9CY.js";import"./tippy-react.esm-DYFqe69e.js";/* empty css              */import"./Logout-BlWggqgx.js";import"./main-Y8JAyXgE.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./index.esm-zkRd-kwu.js";import"./axios-B4uVmeYG.js";import"./useTranslation-CZbMeh78.js";import"./Filter-CpekYgBC.js";/* empty css               */class Ye extends We{constructor(){super(...arguments);de(this,"path","admin/properties");de(this,"hasFiles",!0)}async getPublicProperties(g={}){try{const b=new URLSearchParams(g).toString();return await(await fetch(`/api/properties/public?${b}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})).json()}catch(b){throw console.error("Error fetching public properties:",b),b}}}const ce=new Ye,oe=({feature:d,index:l,onUpdate:g,onRemove:b,type:m,canRemove:E,amenities:A,services:T,characteristics:N,houseRules:u,addAmenity:f,addService:k,addCharacteristic:_,addHouseRule:F,propertyIcons:I})=>{const x=(i,G)=>{g(l,i,G)},O=()=>{switch(m){case"amenity":return"fas fa-wifi";case"service":return"fas fa-concierge-bell";case"characteristic":return"fas fa-home";case"houseRule":return"fas fa-gavel";default:return"fas fa-star"}},R=()=>{switch(m){case"amenity":return"Amenidad";case"service":return"Servicio";case"characteristic":return"Característica";case"houseRule":return"Regla";default:return"Elemento"}},B=()=>{switch(m){case"amenity":return A;case"service":return T;case"characteristic":return N;case"houseRule":return u;default:return[]}},U=()=>{switch(m){case"amenity":return f;case"service":return k;case"characteristic":return _;case"houseRule":return F;default:return()=>{}}},M=()=>I.filter(i=>i.category===m),j=i=>{if(i.id)return $(Xe(e.jsxs("span",{children:[e.jsx("i",{className:`${i.id} me-2`}),i.text]})))};return e.jsxs("div",{className:"card border shadow-sm h-100",children:[e.jsx("div",{className:"card-header bg-transparent border-bottom-0 pb-0",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:O()+" me-2"}),R()," ",l+1]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger rounded-circle d-flex align-items-center justify-content-center",onClick:()=>b(l),disabled:!E,title:"Eliminar",style:{width:"30px",height:"30px"},children:e.jsx("i",{className:"fas fa-times"})})]})}),e.jsxs("div",{className:"card-body pt-2",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(v,{label:"Nombre",value:d.name||"",onChange:i=>x("name",i.target.value),placeholder:"Ingresa el nombre..."})}),e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsxs(ne,{label:"Icono",value:d.icon||"",onChange:i=>x("icon",i.target.value),templateResult:j,templateSelection:j,dropdownParent:"#principal-container",children:[e.jsx("option",{value:"",children:"Seleccionar icono..."}),M().map((i,G)=>e.jsx("option",{value:i.id,children:i.name},G))]})})]}),(m==="service"||m==="characteristic")&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:m==="characteristic"?"Valor":"Descripción"}),e.jsx("textarea",{className:"form-control",rows:2,value:m==="characteristic"?d.value||"":d.description||"",onChange:i=>x(m==="characteristic"?"value":"description",i.target.value),placeholder:m==="characteristic"?"Valor de la característica...":"Describe el servicio..."})]}),m==="houseRule"&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Texto de la regla"}),e.jsx("textarea",{className:"form-control",rows:2,value:d.text||"",onChange:i=>x("text",i.target.value),placeholder:"Texto de la regla..."})]}),m==="amenity"&&e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:d.available||!1,onChange:i=>x("available",i.target.checked),id:`amenity-${l}`}),e.jsx("label",{className:"form-check-label",htmlFor:`amenity-${l}`,children:"Disponible"})]})]}),e.jsx("div",{className:"card-footer bg-transparent border-top-0 pt-0",id:`feature-${m}-${l}`,children:l===B().length-1&&e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary w-100",onClick:U(),children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar ",R()]})})]})},Ze=()=>{const d=c.useRef(),l=c.useRef(),g=c.useRef(),b=c.useRef(),m=c.useRef(),E=c.useRef(),A=c.useRef(),T=c.useRef(),N=c.useRef(),u=c.useRef(),f=c.useRef(),k=c.useRef(),_=c.useRef(),F=c.useRef(),I=c.useRef(),x=c.useRef(),O=c.useRef(),R=c.useRef(),B=c.useRef(),U=c.useRef(),M=c.useRef(),j=c.useRef(),i=c.useRef(),[G,ge]=c.useState(!1),[re,H]=c.useState([]),[ae,fe]=c.useState([]),[q,le]=c.useState([]),[ve,be]=c.useState([]),[L,ie]=c.useState([]),[V,z]=c.useState([]),[J,se]=c.useState(""),[xe,K]=c.useState(""),[er,Q]=c.useState(""),[w,W]=c.useState([{name:"",icon:"",available:!0}]),[y,X]=c.useState([{name:"",description:"",icon:"",available:!0}]),[D,Y]=c.useState([{name:"",value:"",icon:""}]),[C,Z]=c.useState([{text:"",icon:"fas fa-info-circle"}]);c.useEffect(()=>{Ne(),Re()},[]),c.useEffect(()=>{console.log("Provinces state cambió:",L),console.log("Cantidad de provincias:",L.length),u.current&&L.length>0&&(console.log("Actualizando select2 de provincia..."),$(u.current).trigger("change.select2"),setTimeout(()=>{je()},200))},[L]),c.useEffect(()=>{console.log("Districts state cambió:",V),console.log("Cantidad de distritos:",V.length),f.current&&V.length>0&&(console.log("Actualizando select2 de distrito..."),$(f.current).trigger("change.select2"))},[V]);const je=()=>{if(u.current){console.log("HTML del select de provincia:",u.current.outerHTML),console.log("Opciones del select:",u.current.options.length);for(let r=0;r<u.current.options.length;r++)console.log(`Opción ${r}:`,u.current.options[r].value,"-",u.current.options[r].text)}},Ne=async()=>{try{const a=await(await fetch("/property-icons.json")).json();fe(a)}catch(r){console.error("Error loading property icons:",r)}},Re=async()=>{try{console.log("Cargando datos de ubigeo...");const a=await(await fetch("/ubigeo.json?"+new Date().getTime())).json();console.log("Datos ubigeo cargados:",a.length,"registros"),console.log("Primer registro:",a[0]),console.log("Estructura del primer registro:",Object.keys(a[0])),le(a);const s=[...new Set(a.map(n=>n.departamento?n.departamento.trim():"").filter(n=>n.length>0))].sort();console.log("Departamentos únicos extraídos:",s),console.log("Total departamentos:",s.length),be(s)}catch(r){console.error("Error loading ubigeo data:",r)}},me=async r=>{if(console.log("=== CAMBIO DE DEPARTAMENTO ==="),console.log("Departamento seleccionado:",r),console.log("ubigeoData length:",q.length),se(r),K(""),Q(""),u.current&&$(u.current).val("").trigger("change.select2"),f.current&&$(f.current).val("").trigger("change.select2"),r&&r.trim()){let a=q;if(q.length===0){console.log("ubigeoData está vacío, intentando recargar...");try{const h=await(await fetch("/ubigeo.json")).json();console.log("Datos recargados:",h.length,"registros"),a=h,le(h)}catch(p){console.error("Error recargando datos:",p),ie([]),z([]);return}}const s=r.trim();console.log("Departamento después de trim:",s);const n=a.slice(0,5).map(p=>p.departamento);console.log("Primeros 5 departamentos en los datos:",n);const t=a.filter(p=>p.departamento&&p.departamento.trim()===s);console.log("Datos filtrados por departamento:",t.length),console.log("Primeros 3 registros filtrados:",t.slice(0,3)),t.length===0&&(console.log("⚠️ NO SE ENCONTRARON DATOS para departamento:",s),console.log("Departamentos únicos disponibles:",[...new Set(a.map(p=>p.departamento))]));const o=new Set(t.map(p=>p.provincia?p.provincia.trim():"").filter(p=>p.length>0));console.log("Provincias set:",o);const P=[...o].sort();console.log("Provincias finales:",P),ie(P),setTimeout(()=>{console.log("Estado de provinces después de 100ms:",P)},100)}else ie([]);z([]),console.log("=== FIN CAMBIO DEPARTAMENTO ===")},pe=async(r,a=null)=>{console.log("=== CAMBIO DE PROVINCIA ==="),console.log("Provincia seleccionada:",r);const s=a||J;if(console.log("Departamento a usar:",s),console.log("selectedDepartment del estado:",J),console.log("ubigeoData length:",q.length),K(r),Q(""),f.current&&$(f.current).val("").trigger("change.select2"),r&&r.trim()&&s&&s.trim()){let n=q;if(q.length===0){console.log("ubigeoData está vacío en handleProvinceChange, intentando recargar...");try{const te=await(await fetch("/ubigeo.json?"+new Date().getTime())).json();console.log("Datos recargados para provincia:",te.length,"registros"),console.log("Primer registro:",te[0]),n=te,le(te)}catch(h){console.error("Error recargando datos en handleProvinceChange:",h),z([]);return}}const t=r.trim(),o=s.trim();console.log("Buscando distritos para:",{departmentTrimmed:o,provinceTrimmed:t}),console.log("Datos disponibles para filtrar:",n.length,"registros");const P=n.filter(h=>h.departamento&&h.departamento.trim()===o&&h.provincia&&h.provincia.trim()===t);console.log("Registros filtrados por depto y provincia:",P.length),console.log("Primeros 3 registros filtrados:",P.slice(0,3));const p=P.map(h=>h.distrito?h.distrito.trim():"").filter(h=>h.length>0).sort();console.log("Distritos encontrados:",p),console.log("Cantidad de distritos:",p.length),z(p)}else console.log("❌ Condición no cumplida:"),console.log("  - province:",r),console.log("  - province.trim():",r?r.trim():"N/A"),console.log("  - currentDepartment:",s),console.log("  - currentDepartment.trim():",s?s.trim():"N/A"),z([]);console.log("=== FIN CAMBIO PROVINCIA ===")},we=r=>{Q(r),console.log("Distrito seleccionado:",r)},ye=r=>{const a=Array.from(r.target.files);H(s=>[...s,...a])},De=r=>{r.preventDefault();const a=Array.from(r.dataTransfer.files);H(s=>[...s,...a])},Ce=r=>{r.preventDefault()},Pe=r=>{H(a=>a.filter((s,n)=>n!==r))},Se=()=>{W([...w,{name:"",icon:"",available:!0}])},Ee=c.useCallback((r,a,s)=>{W(n=>n.map((t,o)=>o===r?{...t,[a]:s}:t))},[]),$e=r=>{w.length>1&&W(w.filter((a,s)=>s!==r))},Ae=()=>{X([...y,{name:"",description:"",icon:"",available:!0}])},Te=c.useCallback((r,a,s)=>{X(n=>n.map((t,o)=>o===r?{...t,[a]:s}:t))},[]),ke=r=>{y.length>1&&X(y.filter((a,s)=>s!==r))},_e=()=>{Y([...D,{name:"",value:"",icon:""}])},Fe=c.useCallback((r,a,s)=>{Y(n=>n.map((t,o)=>o===r?{...t,[a]:s}:t))},[]),Ie=r=>{D.length>1&&Y(D.filter((a,s)=>s!==r))},Oe=()=>{Z([...C,{text:"",icon:"fas fa-info-circle"}])},Be=c.useCallback((r,a,s)=>{Z(n=>n.map((t,o)=>o===r?{...t,[a]:s}:t))},[]),Ue=r=>{C.length>1&&Z(C.filter((a,s)=>s!==r))},ue=async r=>{var a,s,n,t;ge(!!r),r?(g.current.value=r.id||"",b.current.value=r.title||"",m.current.value=r.platform||"Airbnb",E.current.value=r.price_per_night||"",A.current.value=r.currency||"PEN",T.current.value=r.address||"",r.department&&(se(r.department),await me(r.department),$(N.current).val(r.department).trigger("change"),r.province&&(K(r.province),await pe(r.province,r.department),setTimeout(()=>{$(u.current).val(r.province).trigger("change")},100),r.district&&(Q(r.district),setTimeout(()=>{$(f.current).val(r.district).trigger("change")},200)))),k.current.value=r.bedrooms||1,_.current.value=r.bathrooms||1,F.current.value=r.max_guests||2,I.current.value=r.area_m2||"",x.current.value=r.latitude||"",O.current.value=r.longitude||"",R.current.value=r.description||"",B.current.value=r.short_description||"",U.current.value=r.rating||5,M.current.value=r.reviews_count||0,r.main_image&&(j.image.src=`/api/property/media/${r.main_image}`),W((a=r.amenities)!=null&&a.length?r.amenities:[{name:"",icon:"",available:!0}]),X((s=r.services)!=null&&s.length?r.services:[{name:"",description:"",icon:"",available:!0}]),Y((n=r.characteristics)!=null&&n.length?r.characteristics:[{name:"",value:"",icon:""}]),Z((t=r.house_rules)!=null&&t.length?r.house_rules:[{text:"",icon:"fas fa-info-circle"}]),H(r.gallery||[])):(g.current.value="",b.current.value="",m.current.value="Airbnb",E.current.value="",A.current.value="PEN",T.current.value="",se(""),K(""),$(N.current).val("").trigger("change"),$(u.current).val("").trigger("change"),$(f.current).val("").trigger("change"),k.current.value=1,_.current.value=1,F.current.value=2,I.current.value="",x.current.value="",O.current.value="",R.current.value="",B.current.value="",U.current.value=5,M.current.value=0,j.current.value="",j.current.image.src="/api/property/media/undefined",W([{name:"",icon:"",available:!0}]),X([{name:"",description:"",icon:"",available:!0}]),Y([{name:"",value:"",icon:""}]),Z([{text:"",icon:"fas fa-info-circle"}]),H([])),$(l.current).modal("show")},Me=async r=>{var s,n;r.preventDefault();const a=new FormData;if(g.current.value&&a.append("id",g.current.value),a.append("title",b.current.value),a.append("platform",m.current.value),a.append("price_per_night",E.current.value),a.append("currency",A.current.value),a.append("address",T.current.value),a.append("department",$(N.current).val()),a.append("province",$(u.current).val()),a.append("district",$(f.current).val()),a.append("bedrooms",k.current.value),a.append("bathrooms",_.current.value),a.append("max_guests",F.current.value),a.append("area_m2",I.current.value),a.append("latitude",x.current.value),a.append("longitude",O.current.value),a.append("description",R.current.value),a.append("short_description",B.current.value),a.append("rating",U.current.value),a.append("reviews_count",M.current.value),(n=(s=j.current)==null?void 0:s.files)!=null&&n[0]&&a.append("main_image",j.current.files[0]),re.forEach((t,o)=>{t instanceof File&&a.append("gallery[]",t)}),G){const t=re.filter(o=>typeof o=="string");a.append("existing_gallery",JSON.stringify(t))}w.forEach((t,o)=>{a.append(`amenities[${o}][name]`,t.name),a.append(`amenities[${o}][icon]`,t.icon),a.append(`amenities[${o}][available]`,t.available)}),y.forEach((t,o)=>{a.append(`services[${o}][name]`,t.name),a.append(`services[${o}][description]`,t.description||""),a.append(`services[${o}][icon]`,t.icon),a.append(`services[${o}][available]`,t.available)}),D.forEach((t,o)=>{a.append(`characteristics[${o}][name]`,t.name),a.append(`characteristics[${o}][value]`,t.value||""),a.append(`characteristics[${o}][icon]`,t.icon)}),C.forEach((t,o)=>{a.append(`house_rules[${o}][text]`,t.text),a.append(`house_rules[${o}][icon]`,t.icon)});try{await ce.save(a),$(l.current).modal("hide"),$(d.current).dxDataGrid("instance").refresh(),ee.fire({title:"Éxito",text:"Propiedad guardada correctamente",icon:"success"})}catch(t){console.error("Error saving property:",t),ee.fire({title:"Error",text:"Error al guardar la propiedad",icon:"error"})}},he=async({id:r,field:a,value:s})=>{try{await ce.save({id:r,[a]:s}),$(d.current).dxDataGrid("instance").refresh()}catch(n){console.error("Error updating property:",n)}},Ge=async r=>{if((await ee.fire({title:"¿Estás seguro?",text:"¿Estás seguro de eliminar esta propiedad?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await ce.delete(r),$(d.current).dxDataGrid("instance").refresh(),ee.fire({title:"Éxito",text:"Propiedad eliminada correctamente",icon:"success"})}catch(s){console.error("Error deleting property:",s),ee.fire({title:"Error",text:"Error al eliminar la propiedad",icon:"error"})}};return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx(ze,{gridRef:d,title:"Propiedades",rest:ce,toolBar:r=>{r.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(d.current).dxDataGrid("instance").refresh()}}),r.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nueva Propiedad",hint:"Crear nueva propiedad",onClick:async()=>await ue()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"main_image",caption:"Imagen",width:"80px",allowFiltering:!1,cellTemplate:(r,{data:a})=>{S(r,a.main_image?e.jsx("img",{src:`/api/property/media/${a.main_image}`,alt:"Propiedad",className:"rounded",style:{width:"60px",height:"40px",objectFit:"cover"}}):e.jsx("div",{className:"bg-secondary rounded d-flex align-items-center justify-content-center",style:{width:"60px",height:"40px"},children:e.jsx("i",{className:"fas fa-image text-white"})}))}},{dataField:"title",caption:"Título",width:"250px"},{dataField:"platform",caption:"Plataforma",width:"100px"},{dataField:"price_per_night",caption:"Precio/Noche",width:"120px",cellTemplate:(r,{data:a})=>{S(r,e.jsxs("span",{children:[a.currency," ",parseFloat(a.price_per_night||0).toFixed(2)]}))}},{dataField:"district",caption:"Ubicación",width:"150px",cellTemplate:(r,{data:a})=>{S(r,e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:a.district}),e.jsx("small",{className:"text-muted",children:a.department})]}))}},{dataField:"bedrooms",caption:"Dormitorios",width:"100px"},{dataField:"max_guests",caption:"Huéspedes",width:"100px"},{dataField:"rating",caption:"Rating",width:"80px",cellTemplate:(r,{data:a})=>{S(r,e.jsxs("span",{className:"badge bg-warning",children:[e.jsx("i",{className:"fas fa-star me-1"}),a.rating||0]}))}},{dataField:"active",caption:"Activo",dataType:"boolean",width:"100px",cellTemplate:(r,{data:a})=>{S(r,e.jsx("div",{className:"form-check form-switch",children:e.jsx("input",{className:"form-check-input",type:"checkbox",checked:a.active,onChange:s=>he({id:a.id,field:"active",value:s.target.checked})})}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"100px",cellTemplate:(r,{data:a})=>{S(r,e.jsx("div",{className:"form-check form-switch",children:e.jsx("input",{className:"form-check-input",type:"checkbox",checked:a.featured,onChange:s=>he({id:a.id,field:"featured",value:s.target.checked})})}))}},{caption:"Acciones",width:"100px",cellTemplate:(r,{data:a})=>{S(r,e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:async()=>await ue(a),title:"Editar",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Ge(a.id),title:"Eliminar",children:e.jsx("i",{className:"fas fa-trash"})})]}))},allowFiltering:!1,allowExporting:!1}]})})})})}),e.jsx(Je,{modalRef:l,title:G?"Editar Propiedad":"Nueva Propiedad",onSubmit:Me,size:"xl",children:e.jsxs("div",{className:"row",id:"principal-container",children:[e.jsx("input",{type:"hidden",ref:g}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información Básica"]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-8",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 mb-3",children:e.jsx(v,{label:"Título de la propiedad",eRef:b,placeholder:"Ej: Apartamento moderno en Miraflores",required:!0})}),e.jsxs("div",{className:"col-lg-4 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Plataforma"}),e.jsxs("select",{className:"form-select",ref:m,required:!0,disabled:!0,children:[e.jsx("option",{value:"Airbnb",children:"Airbnb"}),e.jsx("option",{value:"Booking",children:"Booking.com"}),e.jsx("option",{value:"Vrbo",children:"Vrbo"}),e.jsx("option",{value:"HomeAway",children:"HomeAway"}),e.jsx("option",{value:"Otras",children:"Otras"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-4 mb-3",children:e.jsx(v,{label:"Precio por noche",eRef:E,type:"number",step:"0.01",min:"0",placeholder:"120.00",required:!0})}),e.jsxs("div",{className:"col-lg-2 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Moneda"}),e.jsxs("select",{className:"form-select",ref:A,children:[e.jsx("option",{value:"PEN",children:"PEN"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]}),e.jsx("div",{className:"col-lg-2 mb-3",children:e.jsx(v,{label:"Dormitorios",eRef:k,type:"number",min:"1",placeholder:"1",required:!0})}),e.jsx("div",{className:"col-lg-2 mb-3",children:e.jsx(v,{label:"Baños",eRef:_,type:"number",min:"1",placeholder:"1",required:!0})}),e.jsx("div",{className:"col-lg-2 mb-3",children:e.jsx(v,{label:"Huéspedes máx.",eRef:F,type:"number",min:"1",placeholder:"2",required:!0})})]})]}),e.jsx("div",{className:"col-lg-4",children:e.jsx(Ke,{label:"Imagen principal",eRef:j,aspect:16/9})})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-images me-2"}),"Galería de Imágenes"]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Agregar imágenes a la galería"}),e.jsxs("div",{className:"border border-dashed border-primary rounded p-4 text-center",onDrop:De,onDragOver:Ce,style:{minHeight:"120px"},children:[e.jsx("i",{className:"fas fa-cloud-upload-alt fa-3x text-primary mb-3"}),e.jsx("p",{className:"mb-2",children:"Arrastra las imágenes aquí o"}),e.jsx("input",{type:"file",ref:i,multiple:!0,accept:"image/*",onChange:ye,className:"d-none"}),e.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>{var r;return(r=i.current)==null?void 0:r.click()},children:"Seleccionar Archivos"})]})]}),re.length>0&&e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"row",children:re.map((r,a)=>e.jsx("div",{className:"col-lg-2 col-md-3 col-sm-4 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:r instanceof File?URL.createObjectURL(r):`/api/property/media/${r}`,alt:`Galería ${a+1}`,className:"img-fluid rounded",style:{width:"100%",height:"100px",objectFit:"cover"}}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm position-absolute top-0 end-0 rounded-circle",style:{width:"25px",height:"25px",fontSize:"12px"},onClick:()=>Pe(a),children:e.jsx("i",{className:"fas fa-times"})})]})},a))})})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-map-marker-alt me-2"}),"Ubicación"]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(v,{label:"Dirección completa",eRef:T,placeholder:"Av. Ricardo Palma 251",required:!0})}),e.jsx("div",{className:"col-lg-2 mb-3",children:e.jsxs(ne,{label:"Departamento",eRef:N,onChange:r=>{const a=r.target.value;se(a),me(a)},dropdownParent:"#principal-container",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar..."}),ve.map((r,a)=>e.jsx("option",{value:r,children:r},a))]})}),e.jsx("div",{className:"col-lg-2 mb-3",children:e.jsxs(ne,{label:"Provincia",eRef:u,onChange:r=>{const a=r.target.value;K(a);const s=N.current?$(N.current).val():J;console.log("🔍 Provincia onChange - Departamento actual:",s),console.log("🔍 Provincia onChange - selectedDepartment estado:",J),pe(a,s)},disabled:!J,dropdownParent:"#principal-container",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar..."}),L.map((r,a)=>e.jsx("option",{value:r,children:r},a))]})}),e.jsx("div",{className:"col-lg-2 mb-3",children:e.jsxs(ne,{label:"Distrito",eRef:f,onChange:r=>{const a=r.target.value;Q(a),we(a)},disabled:!xe,dropdownParent:"#principal-container",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar..."}),V.map((r,a)=>e.jsx("option",{value:r,children:r},a))]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-4 mb-3",children:e.jsx(v,{label:"Área (m²)",eRef:I,type:"number",min:"1",placeholder:"60"})}),e.jsx("div",{className:"col-lg-4 mb-3",children:e.jsx(v,{label:"Latitud",eRef:x,type:"number",step:"0.000001",placeholder:"-12.1211"})}),e.jsx("div",{className:"col-lg-4 mb-3",children:e.jsx(v,{label:"Longitud",eRef:O,type:"number",step:"0.000001",placeholder:"-77.0269"})})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-align-left me-2"}),"Descripción"]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-6 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción completa"}),e.jsx("textarea",{className:"form-control",ref:R,rows:4,placeholder:"Describe detalladamente la propiedad...",required:!0})]}),e.jsxs("div",{className:"col-lg-6 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción corta"}),e.jsx("textarea",{className:"form-control",ref:B,rows:4,placeholder:"Resumen breve para listados..."})]})]})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-wifi me-2"}),"Amenidades"]}),e.jsx("div",{className:"row",children:w.map((r,a)=>e.jsx("div",{className:"col-lg-4 mb-3",children:e.jsx(oe,{feature:r,index:a,onUpdate:Ee,onRemove:$e,type:"amenity",canRemove:w.length>1,amenities:w,addAmenity:Se,propertyIcons:ae})},a))})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-concierge-bell me-2"}),"Servicios"]}),e.jsx("div",{className:"row",children:y.map((r,a)=>e.jsx("div",{className:"col-lg-4 mb-3",children:e.jsx(oe,{feature:r,index:a,onUpdate:Te,onRemove:ke,type:"service",canRemove:y.length>1,services:y,addService:Ae,propertyIcons:ae})},a))})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-home me-2"}),"Características"]}),e.jsx("div",{className:"row",children:D.map((r,a)=>e.jsx("div",{className:"col-lg-4 mb-3",children:e.jsx(oe,{feature:r,index:a,onUpdate:Fe,onRemove:Ie,type:"characteristic",canRemove:D.length>1,characteristics:D,addCharacteristic:_e,propertyIcons:ae})},a))})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-gavel me-2"}),"Reglas de la Casa"]}),e.jsx("div",{className:"row",children:C.map((r,a)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(oe,{feature:r,index:a,onUpdate:Be,onRemove:Ue,type:"houseRule",canRemove:C.length>1,houseRules:C,addHouseRule:Oe,propertyIcons:ae})},a))})]}),e.jsxs("div",{className:"col-12 mb-4",children:[e.jsxs("h5",{className:"border-bottom pb-2",children:[e.jsx("i",{className:"fas fa-star me-2"}),"Información Adicional"]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-3 mb-3",children:e.jsx(v,{label:"Rating",eRef:U,type:"number",step:"0.1",min:"1",max:"5",placeholder:"5.0"})}),e.jsx("div",{className:"col-lg-3 mb-3",children:e.jsx(v,{label:"Número de reseñas",eRef:M,type:"number",min:"0",placeholder:"0"})})]})]})]})})]})};Qe((d,l)=>{Le(d).render(e.jsx(Ve,{...l,title:"Propiedades",children:e.jsx(Ze,{...l})}))});
