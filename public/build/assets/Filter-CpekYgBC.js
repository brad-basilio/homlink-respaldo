import{j as x}from"./RequirementCard-DEdD30eg.js";import{r as e}from"./index-RYns6xqu.js";import{a as c}from"./axios-B4uVmeYG.js";const S=e.createContext(),L=({children:l})=>{const[r,u]=e.useState(()=>{const t=localStorage.getItem("currentLanguage");return t?JSON.parse(t):null}),[g,d]=e.useState({}),[f,n]=e.useState(!1),[m,s]=e.useState(null),i=e.useCallback(async(t,o)=>{try{n(!0),s(null);const a=await c.get(`/api/translations/${t}`,{signal:o});d(a.data)}catch(a){c.isCancel(a)||(console.error("Error loading translations:",a),s(a.message))}finally{n(!1)}},[]);e.useEffect(()=>{if(!(r!=null&&r.id))return;const t=new AbortController;return i(r.id,t.signal),()=>t.abort()},[r==null?void 0:r.id,i]);const p=async t=>{try{if(!(t!=null&&t.id)||!(t!=null&&t.name))throw new Error("Invalid language object");localStorage.setItem("currentLanguage",JSON.stringify(t)),u(t)}catch(o){console.error("Error changing language:",o),s(o.message)}};return x.jsx(S.Provider,{value:{currentLanguage:r,changeLanguage:p,translations:g,loading:f,error:m},children:l})};export{L,S as a};
