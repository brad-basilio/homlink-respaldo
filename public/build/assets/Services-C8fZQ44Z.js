var ee=Object.defineProperty;var se=(c,t,o)=>t in c?ee(c,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[t]=o;var q=(c,t,o)=>(se(c,typeof t!="symbol"?t+"":t,o),o);import{j as e}from"./RequirementCard-DEdD30eg.js";import{r}from"./index-RYns6xqu.js";import{c as ie}from"./ReactAppend-vpV7VTGG.js";import{B as te}from"./Base-mdWpA4Gg.js";import{r as ae}from"./DxBox-DZgBbgD6.js";import{S as re}from"./sweetalert2.all-DJo0UVK6.js";import{B as le}from"./Results-BBVbNL2k.js";import{M as ce}from"./Modal-IE2ysmSM.js";import{T as ne}from"./Table-BTG--uQT.js";import{I as F}from"./ImageFormGroup-Csvj9Cte.js";import{I as x}from"./InputFormGroup-B7mKwzkx.js";import{D as P}from"./DxButton-CsjWvhyj.js";import{C as oe}from"./CreateReactScript-BuKYEKxn.js";import{R as z}from"./ReactAppend-DPXaoPQG.js";import{S as me}from"./SwitchFormGroup-SB6Qzl6-.js";import{L as de}from"./Filter-CpekYgBC.js";import{D as pe}from"./DragDropImage-BoC6KBUm.js";import"./main-Y8JAyXgE.js";import"./index-CXU7o9CY.js";import"./tippy-react.esm-DYFqe69e.js";/* empty css              */import"./Logout-BlWggqgx.js";import"./index.esm-zkRd-kwu.js";import"./axios-B4uVmeYG.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./useTranslation-CZbMeh78.js";/* empty css               */import"./index-DNUR7M9R.js";class fe extends le{constructor(){super(...arguments);q(this,"path","admin/services");q(this,"hasFiles",!0)}}const T=new fe,M=({feature:c,index:t,onUpdate:o,onRemove:v,type:m,canRemove:j,characteristics:N,benefits:R,addCharacteristic:y,addBenefit:w,addStep:C,steps:S})=>{const b=(d,f)=>{o(t,d,f)},_=d=>{o(t,"image",d)},D=()=>{switch(m){case"characteristic":return"fas fa-check-circle text-success";case"benefit":return"fas fa-star text-warning";case"step":return"fas fa-arrow-right text-primary";default:return"fas fa-circle"}},I=()=>{switch(m){case"characteristic":return"Característica";case"benefit":return"Beneficio";case"step":return"Paso";default:return"Item"}};return e.jsxs("div",{className:"card border shadow-sm h-100",children:[e.jsx("div",{className:"card-header bg-transparent border-bottom-0 pb-0",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:D()+" me-2"}),I()," ",t+1]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger rounded-circle d-flex align-items-center justify-content-center",onClick:()=>v(t),disabled:!j,title:"Eliminar",style:{width:"30px",height:"30px"},children:e.jsx("i",{className:"fas fa-times"})})]})}),e.jsx("div",{className:"card-body pt-2",children:m==="characteristic"?e.jsx("div",{className:"mb-3",children:e.jsx(x,{label:"Título de la característica",value:c.title,onChange:d=>b("title",d.target.value),placeholder:"Ingresa el título..."})}):e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-8 mb-3",children:[e.jsx(x,{label:"Título",value:c.title,onChange:d=>b("title",d.target.value),placeholder:"Ingresa el título..."}),e.jsx("label",{className:"form-label fw-semibold",children:"Descripción"}),e.jsx("textarea",{className:"form-control",rows:3,value:c.description,onChange:d=>b("description",d.target.value),placeholder:"Describe brevemente..."})]}),e.jsx("div",{className:"col-lg-3",children:e.jsx(pe,{label:"Imagen",currentImage:c.image,onChange:_,aspect:1})})]})}),e.jsx("div",{className:"card-footer bg-transparent border-top-0 pt-0",children:m==="characteristic"&&t===N.length-1||m==="benefit"&&t===R.length-1||m==="step"&&t===S.length-1?e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary w-100",onClick:m==="characteristic"?y:m==="benefit"?w:C,children:[e.jsx("i",{className:"fas fa-plus me-2"}),"Agregar ",I()]}):null})]})},ue=({brands:c})=>{const t=r.useRef(),o=r.useRef(),v=r.useRef(),m=r.useRef(),j=r.useRef(),N=r.useRef(),R=r.useRef(),y=r.useRef(),w=r.useRef(),C=r.useRef(),S=r.useRef(),b=r.useRef(),_=r.useRef(),D=r.useRef(),[I,d]=r.useState(!1),[f,k]=r.useState([{title:""}]),[h,B]=r.useState([{title:"",description:"",image:void 0}]),[g,E]=r.useState([{title:"",description:"",image:void 0}]),L=()=>{k([...f,{title:""}])},U=r.useCallback((s,i,a)=>{k(u=>{const n=[...u];return n[s]={...n[s],[i]:a},n})},[]),O=s=>{f.length<=1||k(f.filter((i,a)=>a!==s))},W=()=>{B([...h,{title:"",description:"",image:void 0}])},H=r.useCallback((s,i,a)=>{B(u=>{const n=[...u];return n[s]={...n[s],[i]:a},n})},[]),J=s=>{h.length<=1||B(h.filter((i,a)=>a!==s))},K=()=>{E([...g,{title:"",description:"",image:void 0}])},Q=r.useCallback((s,i,a)=>{E(u=>{const n=[...u];return n[s]={...n[s],[i]:a},n})},[]),V=s=>{g.length<=1||E(g.filter((i,a)=>a!==s))},G=s=>{s!=null&&s.id?d(!0):d(!1),v.current.value=(s==null?void 0:s.id)??"",m.current.value=(s==null?void 0:s.name)??"",j.current.value=(s==null?void 0:s.title)??"",N.current.value=(s==null?void 0:s.description)??"",R.current.value=(s==null?void 0:s.title_approach)??"",y.current.value=(s==null?void 0:s.description_approach)??"",w.current.value=(s==null?void 0:s.title_benefits)??"",C.current.value=(s==null?void 0:s.title_methodology)??"",S.current.value=(s==null?void 0:s.description_methodology)??"",b.image.src=`/api/service/media/${(s==null?void 0:s.image)??"undefined"}`,_.image.src=`/api/service/media/${(s==null?void 0:s.image_banner)??"undefined"}`,D.image.src=`/api/service/media/${(s==null?void 0:s.image_secondary)??"undefined"}`,s!=null&&s.characteristics_approach&&k(s.characteristics_approach.map(i=>({title:i.title}))),s!=null&&s.benefits&&B(s.benefits.map(i=>({title:i.title,description:i.description,image:i.image}))),s!=null&&s.steps_methodology&&E(s.steps_methodology.map(i=>({title:i.title,description:i.description,image:i.image}))),$(o.current).modal("show")},X=async s=>{s.preventDefault();const i=new FormData,a={id:v.current.value||void 0,name:m.current.value,title:j.current.value,description:N.current.value,title_approach:R.current.value,description_approach:y.current.value,title_benefits:w.current.value,title_methodology:C.current.value,description_methodology:S.current.value};for(const l in a)i.append(l,a[l]);const u=b.current.files[0];u&&i.append("image",u);const n=_.current.files[0];n&&i.append("image_banner",n);const A=D.current.files[0];A&&i.append("image_secondary",A),f.forEach((l,p)=>{i.append(`characteristics[${p}][title]`,l.title)}),h.forEach((l,p)=>{i.append(`benefits[${p}][title]`,l.title),i.append(`benefits[${p}][description]`,l.description),l.image&&(l.image.file?i.append(`benefits[${p}][image]`,l.image.file):typeof l.image=="string"&&i.append(`benefits[${p}][existing_image]`,l.image))}),g.forEach((l,p)=>{i.append(`steps[${p}][title]`,l.title),i.append(`steps[${p}][description]`,l.description),l.image&&(l.image.file?i.append(`steps[${p}][image]`,l.image.file):typeof l.image=="string"&&i.append(`steps[${p}][existing_image]`,l.image))}),await T.save(i)&&($(t.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},Y=async({id:s,field:i,value:a})=>{await T.boolean({id:s,field:i,value:a})&&$(t.current).dxDataGrid("instance").refresh()},Z=async s=>{const{isConfirmed:i}=await re.fire({title:"Eliminar Servicio",text:"¿Estás seguro de eliminar este Servicio?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!i||!await T.delete(s)||$(t.current).dxDataGrid("instance").refresh()};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{gridRef:t,title:"Servicios",rest:T,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar nuevo servicio",onClick:()=>G()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre del servicio",width:"200px"},{dataField:"title",caption:"Título",width:"200px"},{dataField:"description",caption:"Descripción",cellTemplate:(s,{data:i})=>{s.html(ae(e.jsx("div",{className:"text-truncate",style:{maxWidth:"300px"},children:i.description})))}},{dataField:"image",caption:"Imagen",width:"100px",cellTemplate:(s,{data:i})=>{z(s,e.jsx("img",{src:`/api/service/media/${i.image}`,style:{width:"80px",height:"45px",objectFit:"cover",borderRadius:"4px"},onError:a=>a.target.src="/images/default-thumbnail.jpg"}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:i})=>{z(s,e.jsx(me,{checked:i.featured,onChange:a=>Y({id:i.id,field:"featured",value:a.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:i})=>{s.append(P({className:"btn btn-xs btn-soft-primary me-1",title:"Editar",icon:"fa fa-pen",onClick:()=>G(i)})),s.append(P({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>Z(i.id)}))}}]}),e.jsxs(ce,{modalRef:o,title:I?"Editar Servicio":"Nuevo Servicio",onSubmit:X,size:"xl",children:[e.jsx("input",{ref:v,type:"hidden"}),e.jsxs("ul",{className:"nav nav-tabs nav-justified",id:"serviceModalTabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"basic-tab","data-bs-toggle":"tab","data-bs-target":"#basic-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Información Básica"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"approach-tab","data-bs-toggle":"tab","data-bs-target":"#approach-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-bullseye me-1"}),"Enfoque"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"benefits-tab","data-bs-toggle":"tab","data-bs-target":"#benefits-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-star me-1"}),"Beneficios"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"methodology-tab","data-bs-toggle":"tab","data-bs-target":"#methodology-tab-pane",type:"button",role:"tab",children:[e.jsx("i",{className:"fas fa-tasks me-1"}),"Metodología"]})})]}),e.jsxs("div",{className:"tab-content mt-3",id:"serviceModalTabsContent",children:[e.jsx("div",{className:"tab-pane fade show active",id:"basic-tab-pane",role:"tabpanel","aria-labelledby":"basic-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"Información General del Servicio"]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-bold text-muted mb-3",children:"Datos Principales"}),e.jsx(x,{eRef:m,label:"Nombre del servicio",required:!0}),e.jsx(x,{eRef:j,label:"Título del servicio",required:!0}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción del servicio"}),e.jsx("textarea",{ref:N,className:"form-control",rows:4,placeholder:"Describe brevemente el servicio...",required:!0})]})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-bold text-muted mb-3",children:"Imágenes del Servicio"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mb-3 col-lg-6",children:[e.jsx(F,{eRef:b,label:"Imagen principal",aspect:1}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Imagen que representa el servicio"]})]}),e.jsxs("div",{className:"mb-3 col-lg-6",children:[e.jsx(F,{eRef:D,label:"Icono del servicio",aspect:1}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Icono cuadrado para representar el servicio"]})]})]})]})})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"approach-tab-pane",role:"tabpanel","aria-labelledby":"approach-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-bullseye me-2"}),"Enfoque del Servicio"]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-lg-8",children:[e.jsx(x,{eRef:R,label:"Título del enfoque",required:!0}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción del enfoque"}),e.jsx("textarea",{ref:y,className:"form-control",rows:6,placeholder:"Explica el enfoque del servicio...",required:!0})]})]}),e.jsx("div",{className:" col-lg-4",children:e.jsx(F,{eRef:_,label:"Imagen del enfoque al servicio",aspect:4/3})})]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-list-check me-2"}),"Características del Enfoque"]}),e.jsx("div",{className:"row",children:f.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(M,{feature:s,index:i,onUpdate:U,onRemove:O,canRemove:f.length>1,type:"characteristic",characteristics:f,addCharacteristic:L})},`char-${i}`))})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"methodology-tab-pane",role:"tabpanel","aria-labelledby":"methodology-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-tasks me-2"}),"Metodología del Servicio"]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-lg-12",children:e.jsx(x,{eRef:C,label:"Título de metodología",required:!0})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Descripción de metodología"}),e.jsx("textarea",{ref:S,className:"form-control",rows:4,placeholder:"Describe la metodología utilizada...",required:!0})]})})]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-route me-2"}),"Pasos de la Metodología"]}),e.jsx("div",{className:"row",children:g.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("span",{className:"badge bg-primary position-absolute",style:{top:"-5px",left:"-5px",zIndex:10},children:i+1}),e.jsx(M,{feature:s,index:i,onUpdate:Q,onRemove:V,canRemove:g.length>1,type:"step",addStep:K,steps:g})]})},`step-${i}`))})]})]})})}),e.jsx("div",{className:"tab-pane fade",id:"benefits-tab-pane",role:"tabpanel","aria-labelledby":"benefits-tab",children:e.jsx("div",{className:"card border-0 bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-primary mb-3",children:[e.jsx("i",{className:"fas fa-star me-2"}),"Beneficios del Servicio"]}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-lg-12",children:e.jsx(x,{eRef:w,label:"Título de beneficios",required:!0})})}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsxs("h6",{className:"fw-bold text-muted mb-3",children:[e.jsx("i",{className:"fas fa-thumbs-up me-2"}),"Lista de Beneficios"]}),e.jsx("div",{className:"row",children:h.map((s,i)=>e.jsx("div",{className:"col-lg-6 mb-3",children:e.jsx(M,{feature:s,index:i,onUpdate:H,onRemove:J,canRemove:h.length>1,type:"benefit",benefits:h,addBenefit:W})},`benefit-${i}`))})]})]})})})]})]})]})};oe((c,t)=>{ie(c).render(e.jsx(de,{children:e.jsx(te,{...t,title:"Servicios",children:e.jsx(ue,{...t})})}))});
